import{c as K,M as z,a as F,B as j,b as Y,X as R,A as G,C as q,d as V,e as $,f as X,g as Q,F as W,P as Z,G as tt,T as et,E as ot,h as nt,i as rt,j as at,U as st,D as it,k as lt,l as ct,m as ut,n as dt,o as ft,p as gt,K as mt,q as yt}from"./vendor-Dbh21kxK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();const pt={SquareKanban:yt,Kanban:mt,Search:gt,Plus:ft,Settings:dt,Columns3:ut,Tag:ct,SlidersHorizontal:lt,Download:it,Upload:st,Moon:at,Sun:rt,HelpCircle:nt,EllipsisVertical:ot,Trash2:et,GripVertical:tt,Pencil:Z,Fullscreen:W,ChartColumn:Q,ChevronDown:X,ChevronLeft:$,ChevronRight:V,ChevronsRightLeft:q,ArrowUpDown:G,X:R,Bell:Y,BellRing:j,Maximize2:F,Minimize2:z};function St(){K({icons:pt})}St();function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const M="kanbanBoards",S="kanbanActiveBoardId",ht="kanbanColumns",Dt="kanbanTasks",bt="kanbanLabels",c="default",D=new Map;function O(){return new Date().toISOString()}function i(t,e){return`kanbanBoard:${t}:${e}`}function m(t){if(!t)return null;try{const e=JSON.parse(t);return Array.isArray(e)?e:null}catch{return null}}function It(t){if(!t)return null;try{const e=JSON.parse(t);return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}function y(){const t=m(localStorage.getItem(M));return t?t.filter(e=>e&&typeof e.id=="string").map(e=>({id:e.id,name:typeof e.name=="string"?e.name:"Untitled board",createdAt:typeof e.createdAt=="string"?e.createdAt:void 0})):[]}function xt(t){const e=typeof t=="string"?t:"";return e&&y().find(o=>o.id===e)||null}function Bt(){const t=d(),e=t?xt(t):null;return(typeof e?.name=="string"?e.name.trim():"")||"Untitled board"}function w(t){localStorage.setItem(M,JSON.stringify(t))}function d(){const t=localStorage.getItem(S),e=y();return t&&e.some(o=>o.id===t)?t:e[0]?.id||null}function Ct(t){const e=typeof t=="string"?t:"";!e||!y().some(r=>r.id===e)||localStorage.setItem(S,e)}function v(){return[{id:"todo",name:"To Do",color:"#3b82f6"},{id:"inprogress",name:"In Progress",color:"#f59e0b"},{id:"done",name:"Done",color:"#16a34a"}]}function L(){return[{id:"urgent",name:"Urgent",color:"#ef4444",group:""},{id:"feature",name:"Feature",color:"#3b82f6",group:""},{id:"task",name:"Task",color:"#f59e0b",group:""}]}function U(){const t=O();return[{id:g(),title:"Find out where the Soul Stone is",description:"Identify current location and access requirements.",priority:"high",dueDate:"",column:"todo",labels:["urgent"],creationDate:t,changeDate:t,columnHistory:[{column:"todo",at:t}]},{id:g(),title:"Collect the Time Stone",description:"Coordinate with Dr. Strange and plan retrieval.",priority:"medium",dueDate:"",column:"inprogress",labels:["feature"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:g(),title:"Collect the Mind Stone",description:"Determine safe extraction approach.",priority:"medium",dueDate:"",column:"inprogress",labels:[],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:g(),title:"Collect the Reality Stone",description:"Negotiate with the Collector, avoid escalation.",priority:"low",dueDate:"",column:"inprogress",labels:["task"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:g(),title:"Collect the Power Stone",description:"Verify secure containment after retrieval.",priority:"high",dueDate:"",column:"done",labels:["urgent","feature"],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]},{id:g(),title:"Collect the Space Stone",description:"",priority:"low",dueDate:"",column:"done",labels:[],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]}]}function N(){return{showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:typeof navigator<"u"&&typeof navigator.language=="string"?navigator.language:"en-US",defaultPriority:"low",notificationDays:3}}function At(){const t=m(localStorage.getItem(ht)),e=m(localStorage.getItem(Dt)),o=m(localStorage.getItem(bt)),r=!!(t||e||o),n=[{id:c,name:"Default Board",createdAt:O()}];return w(n),localStorage.setItem(S,c),localStorage.setItem(i(c,"columns"),JSON.stringify(t||v())),localStorage.setItem(i(c,"tasks"),JSON.stringify(e||U())),localStorage.setItem(i(c,"labels"),JSON.stringify(o||L())),localStorage.setItem(i(c,"settings"),JSON.stringify(N())),r}function u(){const t=y();if(t.length>0){d()||Ct(t[0].id);return}At()}function vt(t){u();const o=(typeof t=="string"?t.trim():"")||"Untitled board",r=y(),n=`board-${g()}`,a={id:n,name:o,createdAt:O()};return w([...r,a]),localStorage.setItem(i(n,"columns"),JSON.stringify(v())),localStorage.setItem(i(n,"tasks"),JSON.stringify([])),localStorage.setItem(i(n,"labels"),JSON.stringify(L())),localStorage.setItem(i(n,"settings"),JSON.stringify(N())),localStorage.setItem(S,n),a}function Lt(t,e){u();const o=typeof t=="string"?t:"",r=typeof e=="string"?e.trim():"";if(!o||!r)return!1;const n=y();if(!n.some(l=>l.id===o))return!1;const a=n.map(l=>l.id===o?{...l,name:r}:l);return w(a),!0}function kt(t){u();const e=typeof t=="string"?t:"";if(!e)return!1;const o=y();if(!o.some(a=>a.id===e)||o.length<=1)return!1;const r=o.filter(a=>a.id!==e);return w(r),localStorage.removeItem(i(e,"columns")),localStorage.removeItem(i(e,"tasks")),localStorage.removeItem(i(e,"labels")),localStorage.removeItem(i(e,"settings")),D.delete(e),localStorage.getItem(S)===e&&localStorage.setItem(S,r[0].id),!0}function Ot(t){return typeof t=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(t.trim())}function wt(t){return t==="todo"?"#3b82f6":t==="inprogress"?"#f59e0b":t==="done"?"#16a34a":"#3b82f6"}function E(t){const e=Ot(t?.color)?t.color.trim():wt(t?.id),o=t?.collapsed===!0;return{...t,color:e,collapsed:o}}function T(t){const e=Array.isArray(t)?t.slice():[];if(e.some(r=>r&&r.id==="done"))return e;const o=e.reduce((r,n)=>Math.max(r,Number.isFinite(n?.order)?n.order:0),0);return e.push({id:"done",name:"Done",color:"#16a34a",order:o+1,collapsed:!1}),e}function Jt(){u();const t=d()||c,e=localStorage.getItem(i(t,"columns")),o=m(e);if(o){const r=T(o.map(E));return(!r.some(n=>n&&n.id==="done")||r.length!==o.length)&&localStorage.setItem(i(t,"columns"),JSON.stringify(r)),r}return T(v().map(E))}function Pt(t){u();const e=d()||c;localStorage.setItem(i(e,"columns"),JSON.stringify(t))}function Ht(){u();const t=d()||c,e=localStorage.getItem(i(t,"tasks")),o=m(e);if(o){let a=!1;const l=o.map(f=>{const s=f&&typeof f=="object"?{...f}:f;if(!s||typeof s!="object")return s;const h=s.column==="done",b=typeof s.doneDate=="string"&&s.doneDate.trim()!=="",B=typeof s.changeDate=="string"&&s.changeDate.trim()?s.changeDate.trim():"",k=typeof s.creationDate=="string"&&s.creationDate.trim()?s.creationDate.trim():"";if(h&&!b){const p=B||k;p&&(s.doneDate=p,a=!0)}!h&&b&&(delete s.doneDate,a=!0);const J=s.columnHistory,I=Array.isArray(J)?J:null,x=B||k||O(),C=typeof s.column=="string"?s.column.trim():"";if(!I||I.length===0)x&&C&&(s.columnHistory=[{column:C,at:x}],a=!0);else{const p=I.map(A=>{const P=typeof A?.column=="string"?A.column.trim():"",H=typeof A?.at=="string"?A.at.trim():"";return!P||!H?null:{column:P,at:H}}).filter(Boolean);p.length===0?x&&C&&(s.columnHistory=[{column:C,at:x}],a=!0):p.length!==I.length&&(s.columnHistory=p,a=!0)}return s});return a&&localStorage.setItem(i(t,"tasks"),JSON.stringify(l)),D.set(t,l),l}const r=D.get(t);if(Array.isArray(r))return r;const n=U();return D.set(t,n),n}function Et(t){u();const e=d()||c;localStorage.setItem(i(e,"tasks"),JSON.stringify(t)),D.set(e,t)}function Tt(){u();const t=d()||c,e=localStorage.getItem(i(t,"labels")),o=m(e);return o?o.map(r=>({...r,group:typeof r.group=="string"?r.group:""})):L()}function Mt(t){u();const e=d()||c;localStorage.setItem(i(e,"labels"),JSON.stringify(t))}function _(t){const e=t&&typeof t=="object"?t:{},o=typeof e.locale=="string"&&e.locale.trim()?e.locale.trim():N().locale,r=e.showPriority!==!1,n=e.showDueDate!==!1,a=e.showAge!==!1,l=e.showChangeDate!==!1,f=(e.defaultPriority||"").toString().trim().toLowerCase(),s=f==="low"||f==="medium"||f==="high"?f:"low",h=Number.parseInt((e.notificationDays??"").toString(),10),b=Number.isFinite(h)?Math.min(365,Math.max(0,h)):3;return{showPriority:r,showDueDate:n,showAge:a,showChangeDate:l,locale:o,defaultPriority:s,notificationDays:b}}function Ut(){u();const t=d()||c,e=localStorage.getItem(i(t,"settings")),o=It(e);if(o)return _(o);const r=N();return localStorage.setItem(i(t,"settings"),JSON.stringify(r)),r}function _t(t){u();const e=d()||c,o=_(t);localStorage.setItem(i(e,"settings"),JSON.stringify(o))}export{Jt as a,Pt as b,Tt as c,Mt as d,Ut as e,Bt as f,g,vt as h,Ct as i,_t as j,y as k,Ht as l,u as m,d as n,kt as o,Lt as p,St as r,Et as s};
