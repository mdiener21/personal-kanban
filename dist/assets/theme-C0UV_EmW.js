import{c as q,M as G,a as $,B as V,b as X,X as W,A as Q,C as Z,d as tt,e as et,f as ot,g as nt,h as rt,F as at,P as st,G as it,T as ct,E as lt,i as ut,j as dt,k as ft,U as mt,D as gt,l as yt,m as pt,n as ht,o as St,p as Dt,q as bt,K as It,r as xt}from"./vendor-pJTqpwCg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const At={SquareKanban:xt,Kanban:It,Search:bt,Plus:Dt,Settings:St,Columns3:ht,Tag:pt,SlidersHorizontal:yt,Download:gt,Upload:mt,Moon:ft,Sun:dt,HelpCircle:ut,EllipsisVertical:lt,Trash2:ct,GripVertical:it,Pencil:st,Fullscreen:at,ChartColumn:rt,CalendarDays:nt,ChevronDown:ot,ChevronLeft:et,ChevronRight:tt,ChevronsRightLeft:Z,ArrowUpDown:Q,X:W,Bell:X,BellRing:V,Maximize2:$,Minimize2:G};function z(){q({icons:At})}z();function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const K="kanbanBoards",h="kanbanActiveBoardId",Ct="kanbanColumns",kt="kanbanTasks",Ot="kanbanLabels",l="default",D=new Map;function k(){return new Date().toISOString()}function i(t,e){return`kanbanBoard:${t}:${e}`}function g(t){if(!t)return null;try{const e=JSON.parse(t);return Array.isArray(e)?e:null}catch{return null}}function wt(t){if(!t)return null;try{const e=JSON.parse(t);return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}function y(){const t=g(localStorage.getItem(K));return t?t.filter(e=>e&&typeof e.id=="string").map(e=>({id:e.id,name:typeof e.name=="string"?e.name:"Untitled board",createdAt:typeof e.createdAt=="string"?e.createdAt:void 0})):[]}function Nt(t){const e=typeof t=="string"?t:"";return e&&y().find(o=>o.id===e)||null}function Ht(){const t=f(),e=t?Nt(t):null;return(typeof e?.name=="string"?e.name.trim():"")||"Untitled board"}function O(t){localStorage.setItem(K,JSON.stringify(t))}function f(){const t=localStorage.getItem(h),e=y();return t&&e.some(o=>o.id===t)?t:e[0]?.id||null}function Bt(t){const e=typeof t=="string"?t:"";!e||!y().some(n=>n.id===e)||localStorage.setItem(h,e)}function B(){return[{id:"todo",name:"To Do",color:"#3583ff"},{id:"inprogress",name:"In Progress",color:"#f59e0b"},{id:"done",name:"Done",color:"#16a34a"}]}function v(){return[{id:"urgent",name:"Urgent",color:"#ef4444",group:""},{id:"feature",name:"Feature",color:"#3b82f6",group:""},{id:"task",name:"Task",color:"#f59e0b",group:""}]}function F(){const t=k();return[{id:m(),title:"Find out where the Soul Stone is",description:"Identify current location and access requirements.",priority:"high",dueDate:"",column:"todo",labels:["urgent"],creationDate:t,changeDate:t,columnHistory:[{column:"todo",at:t}]},{id:m(),title:"Steal the Time Stone",description:"Coordinate with Dr. Strange and plan retrieval.",priority:"urgent",dueDate:"",column:"inprogress",labels:["feature"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Collect the Mind Stone",description:"Determine safe extraction approach.",priority:"medium",dueDate:"",column:"inprogress",labels:[],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Hide the Reality Stone",description:"Dig a deep hole to hide the stone from the Collector, avoid escalation.",priority:"low",dueDate:"",column:"inprogress",labels:["task"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Find a bag for stones",description:"A bag with good durability and space is needed to hold all the stones securely.",priority:"none",dueDate:"",column:"inprogress",labels:["task"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Collect the Power Stone",description:"Verify secure containment after retrieval.",priority:"high",dueDate:"",column:"done",labels:["urgent","feature"],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]},{id:m(),title:"Collect the Space Stone",description:"",priority:"low",dueDate:"",column:"done",labels:[],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]}]}function w(){return{showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:typeof navigator<"u"&&typeof navigator.language=="string"?navigator.language:"en-US",defaultPriority:"none",notificationDays:3}}const vt=new Set(["urgent","high","medium","low","none"]);function R(t){const e=(t||"").toString().trim().toLowerCase();return vt.has(e)?e:"none"}function Lt(){const t=g(localStorage.getItem(Ct)),e=g(localStorage.getItem(kt)),o=g(localStorage.getItem(Ot)),n=!!(t||e||o),r=[{id:l,name:"Default Board",createdAt:k()}];return O(r),localStorage.setItem(h,l),localStorage.setItem(i(l,"columns"),JSON.stringify(t||B())),localStorage.setItem(i(l,"tasks"),JSON.stringify(e||F())),localStorage.setItem(i(l,"labels"),JSON.stringify(o||v())),localStorage.setItem(i(l,"settings"),JSON.stringify(w())),n}function u(){const t=y();if(t.length>0){f()||Bt(t[0].id);return}Lt()}function Mt(t){u();const o=(typeof t=="string"?t.trim():"")||"Untitled board",n=y(),r=`board-${m()}`,a={id:r,name:o,createdAt:k()};return O([...n,a]),localStorage.setItem(i(r,"columns"),JSON.stringify(B())),localStorage.setItem(i(r,"tasks"),JSON.stringify([])),localStorage.setItem(i(r,"labels"),JSON.stringify(v())),localStorage.setItem(i(r,"settings"),JSON.stringify(w())),localStorage.setItem(h,r),a}function _t(t,e){u();const o=typeof t=="string"?t:"",n=typeof e=="string"?e.trim():"";if(!o||!n)return!1;const r=y();if(!r.some(c=>c.id===o))return!1;const a=r.map(c=>c.id===o?{...c,name:n}:c);return O(a),!0}function Ut(t){u();const e=typeof t=="string"?t:"";if(!e)return!1;const o=y();if(!o.some(a=>a.id===e)||o.length<=1)return!1;const n=o.filter(a=>a.id!==e);return O(n),localStorage.removeItem(i(e,"columns")),localStorage.removeItem(i(e,"tasks")),localStorage.removeItem(i(e,"labels")),localStorage.removeItem(i(e,"settings")),D.delete(e),localStorage.getItem(h)===e&&localStorage.setItem(h,n[0].id),!0}function Tt(t){return typeof t=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(t.trim())}function Et(t){return t==="todo"?"#3b82f6":t==="inprogress"?"#f59e0b":t==="done"?"#16a34a":"#3b82f6"}function H(t){const e=Tt(t?.color)?t.color.trim():Et(t?.id),o=t?.collapsed===!0;return{...t,color:e,collapsed:o}}function M(t){const e=Array.isArray(t)?t.slice():[];if(e.some(n=>n&&n.id==="done"))return e;const o=e.reduce((n,r)=>Math.max(n,Number.isFinite(r?.order)?r.order:0),0);return e.push({id:"done",name:"Done",color:"#16a34a",order:o+1,collapsed:!1}),e}function zt(){u();const t=f()||l,e=localStorage.getItem(i(t,"columns")),o=g(e);if(o){const n=M(o.map(H));return(!n.some(r=>r&&r.id==="done")||n.length!==o.length)&&localStorage.setItem(i(t,"columns"),JSON.stringify(n)),n}return M(B().map(H))}function Kt(t){u();const e=f()||l;localStorage.setItem(i(e,"columns"),JSON.stringify(t))}function Ft(){u();const t=f()||l,e=localStorage.getItem(i(t,"tasks")),o=g(e);if(o){let a=!1;const c=o.map(d=>{const s=d&&typeof d=="object"?{...d}:d;if(!s||typeof s!="object")return s;const S=R(s.priority);s.priority!==S&&(s.priority=S,a=!0);const b=s.column==="done",L=typeof s.doneDate=="string"&&s.doneDate.trim()!=="",N=typeof s.changeDate=="string"&&s.changeDate.trim()?s.changeDate.trim():"",T=typeof s.creationDate=="string"&&s.creationDate.trim()?s.creationDate.trim():"";if(b&&!L){const p=N||T;p&&(s.doneDate=p,a=!0)}!b&&L&&(delete s.doneDate,a=!0);const E=s.columnHistory,I=Array.isArray(E)?E:null,x=N||T||k(),A=typeof s.column=="string"?s.column.trim():"";if(!I||I.length===0)x&&A&&(s.columnHistory=[{column:A,at:x}],a=!0);else{const p=I.map(C=>{const P=typeof C?.column=="string"?C.column.trim():"",J=typeof C?.at=="string"?C.at.trim():"";return!P||!J?null:{column:P,at:J}}).filter(Boolean);p.length===0?x&&A&&(s.columnHistory=[{column:A,at:x}],a=!0):p.length!==I.length&&(s.columnHistory=p,a=!0)}return s});return a&&localStorage.setItem(i(t,"tasks"),JSON.stringify(c)),D.set(t,c),c}const n=D.get(t);if(Array.isArray(n))return n;const r=F();return D.set(t,r),r}function Rt(t){u();const e=f()||l;localStorage.setItem(i(e,"tasks"),JSON.stringify(t)),D.set(e,t)}function Yt(){u();const t=f()||l,e=localStorage.getItem(i(t,"labels")),o=g(e);return o?o.map(n=>({...n,group:typeof n.group=="string"?n.group:""})):v()}function jt(t){u();const e=f()||l;localStorage.setItem(i(e,"labels"),JSON.stringify(t))}function Y(t){const e=t&&typeof t=="object"?t:{},o=typeof e.locale=="string"&&e.locale.trim()?e.locale.trim():w().locale,n=e.showPriority!==!1,r=e.showDueDate!==!1,a=e.showAge!==!1,c=e.showChangeDate!==!1,d=(e.defaultPriority||"").toString().trim().toLowerCase(),s=R(d),S=Number.parseInt((e.notificationDays??"").toString(),10),b=Number.isFinite(S)?Math.min(365,Math.max(0,S)):3;return{showPriority:n,showDueDate:r,showAge:a,showChangeDate:c,locale:o,defaultPriority:s,notificationDays:b}}function qt(){u();const t=f()||l,e=localStorage.getItem(i(t,"settings")),o=wt(e);if(o)return Y(o);const n=w();return localStorage.setItem(i(t,"settings"),JSON.stringify(n)),n}function Gt(t){u();const e=f()||l,o=Y(t);localStorage.setItem(i(e,"settings"),JSON.stringify(o))}const j="kanban-theme";function Pt(){const t=localStorage.getItem(j);return t==="light"||t==="dark"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function _(t){document.documentElement.dataset.theme=t}function U(t){const e=document.getElementById("theme-toggle-btn");if(!e)return;const o=t==="dark"?"light":"dark",n=o==="dark"?"Dark":"Light",r=o==="dark"?"moon":"sun";e.setAttribute("aria-pressed",String(t==="dark"));const a=e.querySelector("[data-lucide]");a&&a.setAttribute("data-lucide",r);const c=Array.from(e.childNodes).filter(d=>d.nodeType===Node.TEXT_NODE);for(const d of c)d.remove();e.appendChild(document.createTextNode(` ${n}`)),z()}function $t(){const t=Pt();_(t),U(t);const e=document.getElementById("theme-toggle-btn");e&&e.addEventListener("click",()=>{const n=(document.documentElement.dataset.theme==="dark"?"dark":"light")==="dark"?"light":"dark";_(n),localStorage.setItem(j,n),U(n)})}export{zt as a,Kt as b,Yt as c,jt as d,qt as e,Ht as f,m as g,Mt as h,Bt as i,Gt as j,y as k,Ft as l,u as m,f as n,Ut as o,_t as p,$t as q,z as r,Rt as s};
