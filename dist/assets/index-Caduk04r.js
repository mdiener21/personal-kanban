(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function L(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function se(e){return typeof e=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.trim())}function ce(e){return e==="todo"?"#3b82f6":e==="inprogress"?"#f59e0b":e==="done"?"#16a34a":"#3b82f6"}function ue(e){const n=se(e==null?void 0:e.color)?e.color.trim():ce(e==null?void 0:e.id);return{...e,color:n}}function v(){const e=localStorage.getItem("kanbanColumns");if(e)try{const n=JSON.parse(e);if(Array.isArray(n))return n.map(ue)}catch{}return[{id:"todo",name:"To Do",color:"#3b82f6"},{id:"inprogress",name:"In Progress",color:"#f59e0b"},{id:"done",name:"Done",color:"#16a34a"}]}function O(e){localStorage.setItem("kanbanColumns",JSON.stringify(e))}function k(){const e=localStorage.getItem("kanbanTasks");if(e)try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{}return[{id:L(),title:"Find out where the Soul Stone is",description:"Identify current location and access requirements.",priority:"high",dueDate:"",column:"todo",labels:["urgent"],creationDate:new Date().toISOString()},{id:L(),title:"Collect the Time Stone",description:"Coordinate with Dr. Strange and plan retrieval.",priority:"medium",dueDate:"",column:"inprogress",labels:["feature"],creationDate:new Date().toISOString()},{id:L(),title:"Collect the Mind Stone",description:"Determine safe extraction approach.",priority:"medium",dueDate:"",column:"inprogress",labels:[],creationDate:new Date().toISOString()},{id:L(),title:"Collect the Reality Stone",description:"Negotiate with the Collector, avoid escalation.",priority:"low",dueDate:"",column:"inprogress",labels:["task"],creationDate:new Date().toISOString()},{id:L(),title:"Collect the Power Stone",description:"Verify secure containment after retrieval.",priority:"high",dueDate:"",column:"done",labels:["urgent","feature"],creationDate:new Date().toISOString()},{id:L(),title:"Collect the Space Stone",description:"",priority:"low",dueDate:"",column:"done",labels:[],creationDate:new Date().toISOString()}]}function I(e){localStorage.setItem("kanbanTasks",JSON.stringify(e))}function h(){const e=localStorage.getItem("kanbanLabels");if(e)try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{}return[{id:"urgent",name:"Urgent",color:"#ef4444"},{id:"feature",name:"Feature",color:"#3b82f6"},{id:"task",name:"Task",color:"#f59e0b"}]}function M(e){localStorage.setItem("kanbanLabels",JSON.stringify(e))}const me=new Set(["low","medium","high"]);function ee(e){const n=(e||"").toString().trim().toLowerCase();return me.has(n)?n:"medium"}function te(e){return(e||"").toString().trim()}function fe(e,n,r,t,o,a=[]){if(!e||e.trim()==="")return;const d=k(),i=d.filter(u=>u.column===o).reduce((u,c)=>Math.max(u,c.order??0),0),s={id:L(),title:e.trim(),description:(n||"").toString().trim(),priority:ee(r),dueDate:te(t),column:o,order:i+1,labels:[...a],creationDate:new Date().toISOString()};d.push(s),I(d)}function pe(e,n,r,t,o,a,d=[]){if(!n||n.trim()==="")return;const l=k(),i=l.findIndex(s=>s.id===e);i!==-1&&(l[i].title=n.trim(),l[i].description=(r||"").toString().trim(),l[i].priority=ee(t),l[i].dueDate=te(o),l[i].column=a,l[i].labels=[...d],I(l))}function ge(e){if(!confirm("Are you sure you want to delete this task?"))return!1;const r=k().filter(t=>t.id!==e);return I(r),!0}function ye(){const e=[];return document.querySelectorAll(".task-column").forEach(n=>{const r=n.dataset.column;n.querySelectorAll(".task").forEach(t=>{e.push({id:t.dataset.taskId,column:r})})}),e}function be(){const e=ye(),r=k().map(t=>{const o=e.findIndex(a=>a.id===t.id);if(o!==-1){const a=e[o],d=e.filter((l,i)=>l.column===a.column&&i<=o);return{...t,column:a.column,order:d.length}}return t});I(r)}function he(e){return typeof e=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.trim())}function ne(e){return he(e)?e.trim():"#3b82f6"}function Ee(e,n){if(!e||e.trim()==="")return;const r=v(),t=r.reduce((d,l)=>Math.max(d,l.order??0),0),a={id:e.toLowerCase().replace(/\s+/g,"-")+"-"+L().substring(0,8),name:e.trim(),color:ne(n),order:t+1};r.push(a),O(r)}function ve(e,n,r){if(!n||n.trim()==="")return;const t=v(),o=t.findIndex(a=>a.id===e);o!==-1&&(t[o].name=n.trim(),t[o].color=ne(r),O(t))}function Le(e){const n=v();if(n.length<=1)return alert("Cannot delete the last column!"),!1;const r=n.find(i=>i.id===e),t=r!=null&&r.name?`"${r.name}"`:"this column",o=k(),a=o.filter(i=>i.column===e),d=a.length>0?`Delete ${t}? This will also delete ${a.length} task(s).`:`Delete ${t}?`;if(!confirm(d))return!1;if(a.length>0){const i=o.filter(s=>s.column!==e);I(i)}const l=n.filter(i=>i.id!==e);return O(l),!0}function ke(){const n=document.getElementById("board-container").querySelectorAll(".task-column"),r=v();n.forEach((t,o)=>{const a=t.dataset.column,d=r.find(l=>l.id===a);d&&(d.order=o+1)}),O(r)}const Ce="modulepreload",Ie=function(e){return"/"+e},Y={},B=function(n,r,t){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),l=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(r.map(i=>{if(i=Ie(i),i in Y)return;Y[i]=!0;const s=i.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${u}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Ce,s||(c.as="script"),c.crossOrigin="",c.href=i,l&&c.setAttribute("nonce",l),document.head.appendChild(c),s)return new Promise((g,f)=>{c.addEventListener("load",g),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function a(d){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d}return o.then(d=>{for(const l of d||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})};function Se(e,n){if(!e||e.trim()==="")return;const r=h(),o={id:e.toLowerCase().replace(/\s+/g,"-")+"-"+L().substring(0,8),name:e.trim(),color:n};return r.push(o),M(r),o}function Be(e,n,r){if(!n||n.trim()==="")return;const t=h(),o=t.findIndex(a=>a.id===e);o!==-1&&(t[o].name=n.trim(),t[o].color=r,M(t))}function xe(e){const n=h(),r=k();r.forEach(o=>{o.labels&&(o.labels=o.labels.filter(a=>a!==e))}),I(r);const t=n.filter(o=>o.id!==e);M(t)}let W="todo",D=null,A=null,q=null,b=[];function Te(){const e=document.getElementById("task-label-search");return((e==null?void 0:e.value)||"").trim().toLowerCase()}function J(){const e=document.getElementById("task-active-labels");if(!e)return;const n=h(),r=[];for(const o of b)r.includes(o)||r.push(o);b=r;const t=r.map(o=>n.find(a=>a.id===o)).filter(Boolean);e.innerHTML="",e.style.display=t.length>0?"flex":"none",t.forEach(o=>{const a=document.createElement("span");a.classList.add("task-label"),a.style.backgroundColor=o.color,a.textContent=o.name;const d=document.createElement("button");d.type="button",d.classList.add("active-label-remove"),d.setAttribute("aria-label",`Remove label ${o.name}`),d.title="Remove label",d.textContent="Ã—",d.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),b=b.filter(i=>i!==o.id),J(),R()}),a.appendChild(d),e.appendChild(a)})}function we(e){var u;W=e||((u=v()[0])==null?void 0:u.id)||"todo",D=null,b=[];const n=document.getElementById("task-modal"),r=document.getElementById("task-column"),t=document.getElementById("task-title"),o=document.getElementById("task-description"),a=document.getElementById("task-priority"),d=document.getElementById("task-due-date"),l=document.getElementById("task-modal-title"),i=document.getElementById("task-submit-btn");l.textContent="Add New Task",i.textContent="Add Task",r.value=W,t.value="",o.value="",a&&(a.value="medium"),d&&(d.value="");const s=document.getElementById("task-label-search");s&&(s.value=""),R(),n.classList.remove("hidden"),t.focus()}function H(e){const r=k().find(y=>y.id===e);if(!r)return;D=e,b=r.labels||[];const t=document.getElementById("task-modal"),o=document.getElementById("task-column"),a=document.getElementById("task-title"),d=document.getElementById("task-description"),l=document.getElementById("task-priority"),i=document.getElementById("task-due-date"),s=document.getElementById("task-modal-title"),u=document.getElementById("task-submit-btn");s.textContent="Edit Task",u.textContent="Save Changes",o.value=r.column;const c=typeof r.text=="string"?r.text:"";a.value=typeof r.title=="string"&&r.title.trim()!==""?r.title:c,d.value=typeof r.description=="string"?r.description:"",l&&(l.value=typeof r.priority=="string"?r.priority:"medium");const g=typeof r.dueDate=="string"?r.dueDate:"",f=g.includes("T")?g.slice(0,10):g;i&&(i.value=f);const m=document.getElementById("task-label-search");m&&(m.value=""),R(),t.classList.remove("hidden"),a.focus()}function _(){document.getElementById("task-modal").classList.add("hidden"),D=null}function De(){A=null;const e=document.getElementById("column-modal"),n=document.getElementById("column-name"),r=document.getElementById("column-color"),t=document.getElementById("column-modal-title"),o=document.getElementById("column-submit-btn");t.textContent="Add New Column",o.textContent="Add Column",n.value="",r&&(r.value="#3b82f6"),e.classList.remove("hidden"),n.focus()}function Ae(e){const r=v().find(i=>i.id===e);if(!r)return;A=e;const t=document.getElementById("column-modal"),o=document.getElementById("column-name"),a=document.getElementById("column-color"),d=document.getElementById("column-modal-title"),l=document.getElementById("column-submit-btn");d.textContent="Edit Column",l.textContent="Save Changes",o.value=r.name,a&&(a.value=r.color||"#3b82f6"),t.classList.remove("hidden"),o.focus()}function N(){document.getElementById("column-modal").classList.add("hidden"),A=null}function Oe(){F(),document.getElementById("labels-modal").classList.remove("hidden")}function V(){document.getElementById("labels-modal").classList.add("hidden")}function Pe(){document.getElementById("help-modal").classList.remove("hidden")}function U(){document.getElementById("help-modal").classList.add("hidden")}function oe(e=null){q=e;const n=document.getElementById("label-modal"),r=document.getElementById("label-modal-title"),t=document.getElementById("label-name"),o=document.getElementById("label-color"),a=document.getElementById("label-submit-btn");if(e){const l=h().find(i=>i.id===e);l&&(r.textContent="Edit Label",a.textContent="Update Label",t.value=l.name,o.value=l.color)}else r.textContent="Add Label",a.textContent="Add Label",t.value="",o.value="#3b82f6";n.classList.remove("hidden"),t.focus()}function $(){document.getElementById("label-modal").classList.add("hidden"),q=null}function F(){const e=document.getElementById("labels-list");e.innerHTML="",h().forEach(r=>{const t=document.createElement("div");t.classList.add("label-item"),t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="space-between";const o=document.createElement("span");o.classList.add("task-label"),o.style.backgroundColor=r.color,o.textContent=r.name;const a=document.createElement("div");a.classList.add("label-actions"),a.style.display="flex",a.style.gap="4px";const d=document.createElement("button");d.classList.add("btn-small");const l=document.createElement("span");l.dataset.lucide="pencil",d.appendChild(l),d.title="Edit label",d.addEventListener("click",()=>oe(r.id));const i=document.createElement("button");i.classList.add("btn-small","btn-danger");const s=document.createElement("span");s.dataset.lucide="trash-2",i.appendChild(s),i.title="Delete label",i.addEventListener("click",async()=>{if(confirm(`Delete label "${r.name}"? This will remove it from all tasks.`)){xe(r.id),F();const{renderBoard:u}=await B(async()=>{const{renderBoard:c}=await Promise.resolve().then(()=>x);return{renderBoard:c}},void 0);u()}}),a.appendChild(d),a.appendChild(i),t.appendChild(o),t.appendChild(a),e.appendChild(t)}),lucide.createIcons()}function R(){J();const e=document.getElementById("task-labels-selection");e.innerHTML="";const n=Te(),r=h(),t=n?r.filter(o=>{const a=(o.name||"").toLowerCase(),d=(o.id||"").toLowerCase();return a.includes(n)||d.includes(n)}):r;if(t.length===0){const o=document.createElement("div");o.classList.add("labels-empty"),o.textContent="No matching labels",e.appendChild(o);return}t.forEach(o=>{const a=document.createElement("label");a.classList.add("label-checkbox");const d=document.createElement("input");d.type="checkbox",d.value=o.id,d.checked=b.includes(o.id),d.addEventListener("change",i=>{i.target.checked?b.includes(o.id)||b.push(o.id):b=b.filter(s=>s!==o.id),J()});const l=document.createElement("span");l.classList.add("task-label","label-color-swatch"),l.style.backgroundColor=o.color,l.textContent=o.name,a.appendChild(d),a.appendChild(l),e.appendChild(a)})}function _e(){const e=document.getElementById("task-label-search");e==null||e.addEventListener("input",R),document.getElementById("task-form").addEventListener("submit",async n=>{var i,s;n.preventDefault();const r=document.getElementById("task-title").value,t=document.getElementById("task-description").value,o=(i=document.getElementById("task-priority"))==null?void 0:i.value,a=(s=document.getElementById("task-due-date"))==null?void 0:s.value,d=document.getElementById("task-column").value;D?pe(D,r,t,o,a,d,b):fe(r,t,o,a,d,b),_();const{renderBoard:l}=await B(async()=>{const{renderBoard:u}=await Promise.resolve().then(()=>x);return{renderBoard:u}},void 0);l()}),document.getElementById("cancel-task-btn").addEventListener("click",_),document.querySelector("#task-modal .modal-backdrop").addEventListener("click",_),document.getElementById("column-form").addEventListener("submit",async n=>{var a;n.preventDefault();const r=document.getElementById("column-name").value,t=(a=document.getElementById("column-color"))==null?void 0:a.value;A?ve(A,r,t):Ee(r,t),N();const{renderBoard:o}=await B(async()=>{const{renderBoard:d}=await Promise.resolve().then(()=>x);return{renderBoard:d}},void 0);o()}),document.getElementById("cancel-column-btn").addEventListener("click",N),document.querySelector("#column-modal .modal-backdrop").addEventListener("click",N),document.getElementById("manage-labels-btn").addEventListener("click",Oe),document.getElementById("labels-close-btn").addEventListener("click",V),document.getElementById("add-label-btn").addEventListener("click",()=>oe()),document.getElementById("label-form").addEventListener("submit",async n=>{n.preventDefault();const r=document.getElementById("label-name").value,t=document.getElementById("label-color").value;q?Be(q,r,t):Se(r,t),$(),F();const{renderBoard:o}=await B(async()=>{const{renderBoard:a}=await Promise.resolve().then(()=>x);return{renderBoard:a}},void 0);o()}),document.getElementById("cancel-label-btn").addEventListener("click",$),document.querySelector("#labels-modal .modal-backdrop").addEventListener("click",V),document.querySelector("#label-modal .modal-backdrop").addEventListener("click",$),document.getElementById("help-btn").addEventListener("click",Pe),document.getElementById("help-close-btn").addEventListener("click",U),document.querySelector("#help-modal .modal-backdrop").addEventListener("click",U),document.getElementById("add-column-btn").addEventListener("click",De),document.addEventListener("keydown",n=>{n.key==="Escape"&&(_(),N(),V(),$(),U())})}function Ne(){document.querySelectorAll(".task").forEach(n=>{n.addEventListener("dragstart",r=>{n.id="dragged-task",r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("task","")}),n.addEventListener("dragend",r=>{n.removeAttribute("id")})})}function $e(){document.querySelectorAll(".task-column").forEach(n=>{n.addEventListener("dragover",r=>{r.dataTransfer.types.includes("task")?Me(r):r.dataTransfer.types.includes("column")&&re(r)}),n.addEventListener("dragleave",r=>{if(n.contains(r.relatedTarget))return;const t=n.querySelector(".placeholder");t==null||t.remove()}),n.addEventListener("drop",async r=>{r.preventDefault();const t=document.getElementById("dragged-task"),o=n.querySelector(".placeholder");if(!t||!o)return;const a=n.querySelector(".tasks");t.remove(),a.insertBefore(t,o),o.remove(),be();const{renderBoard:d}=await B(async()=>{const{renderBoard:l}=await Promise.resolve().then(()=>x);return{renderBoard:l}},void 0);d()})})}function qe(){const e=document.querySelectorAll(".task-column"),n=document.getElementById("board-container");e.forEach(r=>{const t=r.querySelector(".column-drag-handle");r.draggable=!1,t.addEventListener("mousedown",()=>{r.draggable=!0}),document.addEventListener("mouseup",()=>{r.draggable=!1}),r.addEventListener("dragstart",o=>{o.target.closest(".task")||(r.id="dragged-column",o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("column",""))}),r.addEventListener("dragend",()=>{r.removeAttribute("id"),r.draggable=!1;const o=n.querySelector(".column-placeholder");o==null||o.remove()})}),n.addEventListener("dragover",r=>{r.dataTransfer.types.includes("column")&&(r.preventDefault(),re(r))}),n.addEventListener("drop",r=>{if(!r.dataTransfer.types.includes("column"))return;r.preventDefault();const t=document.getElementById("dragged-column"),o=n.querySelector(".column-placeholder");!t||!o||(n.insertBefore(t,o),o.remove(),ke())})}function K(e){const n=document.createElement("li");return n.classList.add("placeholder"),n.style.height=`${e.offsetHeight}px`,n}function Me(e){if(!e.dataTransfer.types.includes("task"))return;e.preventDefault();const n=document.getElementById("dragged-task"),r=e.currentTarget,t=r.querySelector(".tasks"),o=r.querySelector(".placeholder");if(o){const a=o.getBoundingClientRect();if(a.top<=e.clientY&&a.bottom>=e.clientY)return}for(const a of t.children)if(a.getBoundingClientRect().bottom>=e.clientY){if(a===o||(o==null||o.remove(),a===n||a.previousElementSibling===n))return;t.insertBefore(o??K(n),a);return}o==null||o.remove(),t.lastElementChild!==n&&t.append(o??K(n))}function X(e){const n=document.createElement("div");return n.classList.add("column-placeholder"),n.style.width=`${e.offsetWidth}px`,n.style.height=`${e.offsetHeight}px`,n}function re(e){if(!e.dataTransfer.types.includes("column"))return;const n=document.getElementById("board-container"),r=document.getElementById("dragged-column");if(!r)return;const t=n.querySelector(".column-placeholder"),o=Array.from(n.querySelectorAll(".task-column:not(#dragged-column)"));for(const a of o){const d=a.getBoundingClientRect(),l=d.left+d.width/2;if(e.clientX<l){if(t&&t.nextElementSibling===a)return;t==null||t.remove(),n.insertBefore(X(r),a);return}}t==null||t.remove(),n.appendChild(X(r))}let G=!1;function w(e=null){document.querySelectorAll(".column-menu").forEach(n=>{e&&n===e||n.classList.add("hidden")})}function Re(e){const n=document.createElement("li");n.classList.add("task"),n.draggable=!0,n.dataset.taskId=e.id,n.setAttribute("role","listitem"),n.setAttribute("aria-label",`Task: ${e.title||e.text||"Untitled"}`);const r=document.createElement("div");r.classList.add("task-labels"),r.setAttribute("aria-label","Task labels");const t=h();e.labels&&e.labels.length>0&&e.labels.forEach(p=>{const E=t.find(C=>C.id===p);if(E){const C=document.createElement("span");C.classList.add("task-label"),C.style.backgroundColor=E.color,C.textContent=E.name,r.appendChild(C)}});const o=document.createElement("div");o.classList.add("task-header");const a=document.createElement("div");a.classList.add("task-title"),a.setAttribute("role","button"),a.setAttribute("tabindex","0");const d=typeof e.text=="string"?e.text:"";a.textContent=typeof e.title=="string"&&e.title.trim()!==""?e.title:d,a.addEventListener("click",()=>H(e.id)),a.addEventListener("keydown",p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),H(e.id))});const l=document.createElement("div");l.classList.add("task-actions");const i=document.createElement("button");i.classList.add("delete-task-btn"),i.setAttribute("aria-label","Delete task"),i.type="button";const s=document.createElement("span");s.dataset.lucide="trash-2",s.setAttribute("aria-hidden","true"),i.appendChild(s),i.addEventListener("click",async p=>{p.stopPropagation(),ge(e.id)&&z()}),l.appendChild(i),o.appendChild(a),o.appendChild(l);const u=typeof e.description=="string"?e.description.trim():"",c=document.createElement("div");c.classList.add("task-description"),c.textContent=u,c.style.display=u?"block":"none",c.addEventListener("click",()=>H(e.id));const g=document.createElement("div");g.classList.add("task-meta");const f=typeof e.priority=="string"?e.priority:"medium",m=document.createElement("span");m.classList.add("task-priority",`priority-${f}`),m.textContent=f,m.setAttribute("aria-label",`Priority: ${f}`);const y=typeof e.dueDate=="string"?e.dueDate.trim():"",S=document.createElement("span");if(S.classList.add("task-date"),!y)S.textContent="No due date";else{const p=y.includes("T")?y:`${y}T00:00:00`,E=new Date(p);S.textContent=Number.isNaN(E.getTime())?y:E.toLocaleDateString()}return g.appendChild(m),g.appendChild(S),n.appendChild(o),n.appendChild(c),n.appendChild(r),n.appendChild(g),n}function ze(e){const n=document.createElement("article");n.classList.add("task-column"),n.dataset.column=e.id,n.draggable=!1,n.setAttribute("aria-labelledby",`column-title-${e.id}`),e!=null&&e.color&&n.style.setProperty("--column-accent",e.color);const r=document.createElement("button");r.classList.add("column-drag-handle"),r.type="button",r.setAttribute("aria-label","Drag to reorder column");const t=document.createElement("span");t.dataset.lucide="grip-vertical",t.setAttribute("aria-hidden","true"),r.appendChild(t),r.title="Drag to reorder";const o=document.createElement("header");o.classList.add("column-header");const a=document.createElement("h2");a.id=`column-title-${e.id}`,a.textContent=e.name;const d=document.createElement("span");d.classList.add("task-counter"),d.dataset.columnId=e.id,d.textContent="0",d.setAttribute("aria-label","Task count");const l=document.createElement("div");l.classList.add("column-actions");const i=document.createElement("button");i.classList.add("add-task-btn-icon"),i.type="button",i.setAttribute("aria-label",`Add task to ${e.name}`);const s=document.createElement("span");s.dataset.lucide="plus",s.setAttribute("aria-hidden","true"),i.appendChild(s),i.title="Add task",i.addEventListener("click",()=>we(e.id));const u=document.createElement("div");u.classList.add("column-menu-wrapper");const c=document.createElement("button");c.classList.add("column-menu-btn"),c.type="button",c.setAttribute("aria-haspopup","menu"),c.setAttribute("aria-expanded","false"),c.setAttribute("aria-label",`${e.name} column menu`);const g=document.createElement("span");g.dataset.lucide="ellipsis-vertical",g.setAttribute("aria-hidden","true"),c.appendChild(g),c.title="Column menu";const f=document.createElement("div");f.classList.add("column-menu","hidden"),f.setAttribute("role","menu");const m=document.createElement("button");m.classList.add("column-menu-item"),m.type="button",m.setAttribute("role","menuitem");const y=document.createElement("span");y.dataset.lucide="pencil",y.setAttribute("aria-hidden","true"),m.appendChild(y);const S=document.createTextNode(" Edit");m.appendChild(S),m.title="Edit column",m.addEventListener("click",T=>{T.stopPropagation(),w(),Ae(e.id)});const p=document.createElement("button");p.classList.add("column-menu-item","danger"),p.type="button",p.setAttribute("role","menuitem");const E=document.createElement("span");E.dataset.lucide="trash-2",E.setAttribute("aria-hidden","true"),p.appendChild(E);const C=document.createTextNode(" Delete");p.appendChild(C),p.title="Delete column",p.addEventListener("click",T=>{T.stopPropagation(),w(),Le(e.id)&&z()}),f.appendChild(m),f.appendChild(p),c.addEventListener("click",T=>{T.stopPropagation();const ie=!f.classList.contains("hidden");w(),ie?c.setAttribute("aria-expanded","false"):(f.classList.remove("hidden"),c.setAttribute("aria-expanded","true"))}),u.appendChild(c),u.appendChild(f),l.appendChild(i),l.appendChild(u),o.appendChild(r),o.appendChild(a),o.appendChild(d),o.appendChild(l);const P=document.createElement("ul");return P.classList.add("tasks"),P.setAttribute("role","list"),P.setAttribute("aria-label",`Tasks in ${e.name}`),n.appendChild(o),n.appendChild(P),n}function He(){const e=v(),n=document.getElementById("task-column");n.innerHTML="",e.forEach(r=>{const t=document.createElement("option");t.value=r.id,t.textContent=r.name,n.appendChild(t)})}function z(){const e=v(),n=k(),r=document.getElementById("board-container");r.innerHTML="",[...e].sort((o,a)=>(o.order??0)-(a.order??0)).forEach(o=>{const a=ze(o);r.appendChild(a);const d=a.querySelector(".tasks"),l=a.querySelector(".task-counter"),i=n.filter(s=>s.column===o.id).sort((s,u)=>(s.order??0)-(u.order??0));if(i.forEach(s=>{d.appendChild(Re(s))}),l.textContent=i.length,i.length>12){a.classList.add("has-hidden-tasks");const s=document.createElement("button");s.classList.add("show-all-tasks-btn"),s.type="button";const u=i.length;s.textContent=`Show all tasks (${u})`,s.addEventListener("click",()=>{d.classList.toggle("expanded"),s.textContent=d.classList.contains("expanded")?"Hide extra tasks":`Show all tasks (${u})`}),a.appendChild(s)}}),Ne(),$e(),qe(),He(),lucide.createIcons(),G||(G=!0,document.addEventListener("click",()=>w()),document.addEventListener("keydown",o=>{o.key==="Escape"&&w()}))}const x=Object.freeze(Object.defineProperty({__proto__:null,renderBoard:z},Symbol.toStringTag,{value:"Module"}));function j(e){return typeof e=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.trim())}const Ve=new Set(["low","medium","high"]);function ae(e){const n=(e||"").toString().trim().toLowerCase();return Ve.has(n)?n:"medium"}function de(e){const n=(e||"").toString().trim();return n.length>=10&&n.includes("T")?n.slice(0,10):n}function Ue(e){const n=typeof(e==null?void 0:e.text)=="string"?e.text:"",r=typeof(e==null?void 0:e.title)=="string"?e.title:n,t=typeof(e==null?void 0:e.description)=="string"?e.description:"",o=de((e==null?void 0:e.dueDate)??(e==null?void 0:e["due-date"]));return{...e,title:r.toString().trim(),description:t.toString().trim(),priority:ae(e==null?void 0:e.priority),dueDate:o}}function Je(e){if(!Array.isArray(e))return null;const n=e.map(t=>{const o=typeof(t==null?void 0:t.id)=="string"?t.id:String((t==null?void 0:t.id)??""),a=typeof(t==null?void 0:t.text)=="string"?t.text:String((t==null?void 0:t.text)??""),d=typeof(t==null?void 0:t.title)=="string"?t.title:a,l=typeof(t==null?void 0:t.description)=="string"?t.description:String((t==null?void 0:t.description)??""),i=ae(t==null?void 0:t.priority),s=typeof(t==null?void 0:t.dueDate)=="string"?t.dueDate:typeof(t==null?void 0:t["due-date"])=="string"?t["due-date"]:String((t==null?void 0:t.dueDate)??(t==null?void 0:t["due-date"])??""),u=de(s),c=typeof(t==null?void 0:t.column)=="string"?t.column:String((t==null?void 0:t.column)??""),g=Array.isArray(t==null?void 0:t.labels)?t.labels.map(y=>typeof y=="string"?y:String(y)):[],f=Number.isFinite(t==null?void 0:t.order)?t.order:void 0,m=typeof(t==null?void 0:t.creationDate)=="string"?t.creationDate:void 0;return{id:o.trim(),title:d.trim(),description:l.trim(),priority:i,dueDate:u.trim(),column:c.trim(),...f!==void 0?{order:f}:{},...m?{creationDate:m}:{},labels:g}});return n.every(t=>t.id&&t.title&&t.column)?n:null}function Fe(e){if(!Array.isArray(e))return null;const n=e.map(t=>{const o=typeof(t==null?void 0:t.id)=="string"?t.id:String((t==null?void 0:t.id)??""),a=typeof(t==null?void 0:t.name)=="string"?t.name:String((t==null?void 0:t.name)??""),d=Number.isFinite(t==null?void 0:t.order)?t.order:void 0,l=j(t==null?void 0:t.color)?t.color.trim():"#3b82f6";return{id:o.trim(),name:a.trim(),color:l,...d!==void 0?{order:d}:{}}});return n.every(t=>t.id&&t.name)?n:null}function je(e){if(!Array.isArray(e))return null;const n=e.map(t=>{const o=typeof(t==null?void 0:t.id)=="string"?t.id:String((t==null?void 0:t.id)??""),a=typeof(t==null?void 0:t.name)=="string"?t.name:String((t==null?void 0:t.name)??""),d=j(t==null?void 0:t.color)?t.color.trim():"#3b82f6";return{id:o.trim(),name:a.trim(),color:d}});return n.every(t=>t.id&&t.name&&t.color)?n:null}function Ye(){const e=k().map(Ue),n=v().map(i=>({...i,color:j(i==null?void 0:i.color)?i.color.trim():"#3b82f6"})),r=h(),o=JSON.stringify({columns:n,tasks:e,labels:r},null,2),a=new Blob([o],{type:"application/json"}),d=URL.createObjectURL(a),l=document.createElement("a");l.href=d,l.download=`kanban-board-${new Date().toISOString()}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(d)}function We(e){const n=new FileReader;n.onload=async r=>{try{const t=JSON.parse(r.target.result);let o,a,d;if(Array.isArray(t))o=t,a=v(),d=h();else if(t.tasks&&t.columns)o=t.tasks,a=t.columns,d=t.labels||h();else{alert("Invalid JSON file format");return}const l=Je(o),i=Fe(a),s=d?je(d):null;if(!l||!i||d&&!s){alert("Invalid data structure");return}O(i),I(l),s&&M(s);const{renderBoard:u}=await B(async()=>{const{renderBoard:c}=await Promise.resolve().then(()=>x);return{renderBoard:c}},void 0);u(),alert("Board imported successfully!")}catch(t){alert("Error parsing JSON file: "+t.message)}},n.readAsText(e)}const le="kanban-theme";function Ke(){const e=localStorage.getItem(le);return e==="light"||e==="dark"?e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Q(e){document.documentElement.dataset.theme=e}function Z(e){const n=document.getElementById("theme-toggle-btn");if(!n)return;const r=e==="dark"?"light":"dark",t=r==="dark"?"Dark":"Light",o=r==="dark"?"moon":"sun";n.setAttribute("aria-pressed",String(e==="dark"));const a=n.querySelector("span[data-lucide]");a&&a.setAttribute("data-lucide",o);const d=Array.from(n.childNodes).filter(l=>l.nodeType===Node.TEXT_NODE);for(const l of d)l.remove();n.appendChild(document.createTextNode(` ${t}`)),window.lucide&&typeof window.lucide.createIcons=="function"&&window.lucide.createIcons()}function Xe(){const e=Ke();Q(e),Z(e);const n=document.getElementById("theme-toggle-btn");n&&n.addEventListener("click",()=>{const t=(document.documentElement.dataset.theme==="dark"?"dark":"light")==="dark"?"light":"dark";Q(t),localStorage.setItem(le,t),Z(t)})}document.addEventListener("DOMContentLoaded",()=>{Xe(),_e(),document.getElementById("export-btn").addEventListener("click",Ye),document.getElementById("import-btn").addEventListener("click",()=>{document.getElementById("import-file").click()}),document.getElementById("import-file").addEventListener("change",e=>{const n=e.target.files[0];n&&We(n),e.target.value=""}),window.addEventListener("beforeunload",e=>{const n="Your board data is stored in browser localStorage. Please export to a JSON file to save your work before closing.";return e.preventDefault(),e.returnValue=n,n}),z()});
