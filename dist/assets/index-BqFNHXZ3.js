import{l as B,g as Je,s as O,a as Z,b as ee,c as x,d as he,e as T,f as Se,h as yt,i as pe,j as Xe,k as ae,r as te,m as Pe,n as Ke,o as Kt,p as Qt,q as en}from"./theme-LZpruhkc.js";import{S as Et}from"./vendor-pJTqpwCg.js";const tn=new Set(["urgent","high","medium","low","none"]);function vt(e){const t=(e||"").toString().trim().toLowerCase();return tn.has(t)?t:"none"}function Dt(e){return(e||"").toString().trim()}function nn(e,t,o,n,a,i=[]){if(!e||e.trim()==="")return;const s=B(),r=s.filter(u=>u.column===a).slice().sort((u,m)=>(u.order??0)-(m.order??0)),l=new Map;r.forEach((u,m)=>{l.set(u.id,m+2)});const c=s.map(u=>{if(u.column!==a)return u;const m=l.get(u.id);return typeof m=="number"?{...u,order:m}:u}),d=new Date().toISOString(),p={id:Je(),title:e.trim(),description:(t||"").toString().trim(),priority:vt(o),dueDate:Dt(n),column:a,order:1,labels:[...i],creationDate:d,changeDate:d,columnHistory:[{column:a,at:d}],...a==="done"?{doneDate:d}:{}};c.push(p),O(c)}function on(e,t,o,n,a,i,s=[]){if(!t||t.trim()==="")return;const r=B(),l=r.findIndex(c=>c.id===e);if(l!==-1){const c=r[l].column,d=i,p=new Date().toISOString();if(!Array.isArray(r[l].columnHistory)||r[l].columnHistory.length===0){const u=r[l].creationDate||r[l].changeDate||p,m=typeof c=="string"?c:d;r[l].columnHistory=[{column:m,at:u}]}r[l].title=t.trim(),r[l].description=(o||"").toString().trim(),r[l].priority=vt(n),r[l].dueDate=Dt(a),r[l].column=d,r[l].labels=[...s],c!==d&&r[l].columnHistory.push({column:d,at:p}),c!=="done"&&d==="done"?r[l].doneDate=p:c==="done"&&d!=="done"&&delete r[l].doneDate,r[l].changeDate=p,O(r)}}function an(e){const o=B().filter(n=>n.id!==e);return O(o),!0}function rn(e){const t=e.item?.dataset?.taskId;if(!t)return null;const o=e.from.closest(".task-column"),n=e.to.closest(".task-column");if(!o||!n)return null;const a=o.dataset.column,i=n.dataset.column,s=a!==i,r=B(),l=new Date().toISOString(),c=r.findIndex(m=>m.id===t);if(c===-1)return null;r[c];const d=new Set([a,i]),p=new Map;d.forEach(m=>{const f=document.querySelector(`.task-column[data-column="${m}"]`);if(!f)return;const g=f.querySelectorAll(".task"),b=[];g.forEach((y,k)=>{const v=y.dataset.taskId;v&&b.push({id:v,order:k+1})}),p.set(m,b)});const u=r.map(m=>{if(m.id===t){const f={...m,column:i},b=p.get(i)?.find(y=>y.id===t);if(b&&(f.order=b.order),s){f.changeDate=l;const y=Array.isArray(m.columnHistory)&&m.columnHistory.length?[...m.columnHistory]:[{column:m.column,at:m.creationDate||m.changeDate||l}];y.push({column:i,at:l}),f.columnHistory=y,m.column!=="done"&&i==="done"?f.doneDate=l:m.column==="done"&&i!=="done"&&delete f.doneDate}return f}if(d.has(m.column)){const g=p.get(m.column)?.find(b=>b.id===m.id);if(g&&g.order!==m.order)return{...m,order:g.order}}return m});return O(u),{movedTaskId:t,fromColumn:a,toColumn:i,didChangeColumn:s,tasks:u}}function sn(e,t,o){if(!e||!t)return null;const n=o||B(),a=n.filter(l=>l.column===t&&l.id!==e).slice().sort((l,c)=>(l.order??0)-(c.order??0)),i=new Map;i.set(e,1),a.forEach((l,c)=>{i.set(l.id,c+2)});let s=!1;const r=n.map(l=>{if(l.column!==t&&l.id!==e)return l;const c=i.get(l.id);return typeof c=="number"&&c!==l.order?(s=!0,{...l,order:c}):l});return s?(O(r),r):n}function ln(e){return typeof e=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.trim())}function wt(e){return ln(e)?e.trim():"#3b82f6"}function cn(e,t){if(!e||e.trim()==="")return;const o=Z(),n=o.reduce((s,r)=>Math.max(s,r.order??0),0),i={id:e.toLowerCase().replace(/\s+/g,"-")+"-"+Je().substring(0,8),name:e.trim(),color:wt(t),order:n-1,collapsed:!1};o.push(i),ee(o)}function dn(e){const t=typeof e=="string"?e.trim():"";if(!t)return!1;const o=Z(),n=o.find(a=>a.id===t);return n?(n.collapsed=n.collapsed!==!0,ee(o),!0):!1}function un(e,t,o){if(!t||t.trim()==="")return;const n=Z(),a=n.findIndex(i=>i.id===e);a!==-1&&(n[a].name=t.trim(),n[a].color=wt(o),ee(n))}function mn(e){if(e==="done")return!1;const t=Z();if(t.length<=1)return!1;const o=B();if(o.filter(i=>i.column===e).length>0){const i=o.filter(s=>s.column!==e);O(i)}const a=t.filter(i=>i.id!==e);return ee(a),!0}function pn(){const t=document.getElementById("board-container").querySelectorAll(".task-column"),o=Z();t.forEach((n,a)=>{const i=n.dataset.column,s=o.find(r=>r.id===i);s&&(s.order=a+1)}),ee(o)}const fn="modulepreload",gn=function(e,t){return new URL(e,t).href},st={},M=function(t,o,n){let a=Promise.resolve();if(o&&o.length>0){let c=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const s=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");a=c(o.map(d=>{if(d=gn(d,n),d in st)return;st[d]=!0;const p=d.endsWith(".css"),u=p?'[rel="stylesheet"]':"";if(n)for(let f=s.length-1;f>=0;f--){const g=s[f];if(g.href===d&&(!p||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":fn,p||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),p)return new Promise((f,g)=>{m.addEventListener("load",f),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(s){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s}return a.then(s=>{for(const r of s||[])r.status==="rejected"&&i(r.reason);return t().catch(i)})},Qe=40;function et(e){return e.trim().slice(0,Qe).toLowerCase().replace(/\s+/g," ")}function Ct(e,t,o=null){return e.some(n=>o&&n.id===o?!1:et(n.name)===t)}function bn(e,t,o=""){if(!e||e.trim()==="")return{success:!1,reason:"EMPTY_NAME"};const n=e.trim().slice(0,Qe),a=et(n),i=x();if(Ct(i,a))return{success:!1,reason:"DUPLICATE_NAME",message:`Label "${n}" already exists.`};const s=a.replace(/\s+/g,"-")+"-"+Je().substring(0,8),r=typeof o=="string"?o.trim():"",l={id:s,name:n,color:t,group:r};return i.push(l),he(i),{success:!0,label:l}}function hn(e,t,o,n=""){if(!t||t.trim()==="")return{success:!1,reason:"EMPTY_NAME"};const a=t.trim().slice(0,Qe),i=et(a),s=x(),r=s.findIndex(l=>l.id===e);return r===-1?{success:!1,reason:"NOT_FOUND"}:Ct(s,i,e)?{success:!1,reason:"DUPLICATE_NAME",message:`Another label with the name "${a}" already exists.`}:(s[r].name=a,s[r].color=o,s[r].group=typeof n=="string"?n.trim():"",he(s),{success:!0,label:s[r]})}function yn(e){const t=x(),o=B();o.forEach(a=>{a.labels&&(a.labels=a.labels.filter(i=>i!==e))}),O(o);const n=t.filter(a=>a.id!==e);he(n)}let ke=null;function N(e){return document.getElementById(e)}function ve(e){const t=N("dialog-modal");t&&t.classList.add("hidden");const o=ke;ke=null,typeof o=="function"&&o(!!e)}function En(){const e=N("dialog-modal");return e&&!e.classList.contains("hidden")}function Tt({title:e,message:t,confirmText:o,cancelText:n,showCancel:a}){const i=N("dialog-modal-title"),s=N("dialog-modal-message"),r=N("dialog-confirm-btn"),l=N("dialog-cancel-btn");i&&(i.textContent=e||"Confirm"),s&&(s.textContent=t||""),r&&(r.textContent=o||"OK"),l&&(l.textContent=n||"Cancel"),l&&(l.style.display=a?"inline-flex":"none")}function kt(){const e=N("dialog-modal");if(!e||e.dataset.handlersAttached==="true")return;e.dataset.handlersAttached="true";const t=N("dialog-confirm-btn"),o=N("dialog-cancel-btn");e.querySelector(".modal-backdrop"),t?.addEventListener("click",()=>ve(!0)),o?.addEventListener("click",()=>ve(!1)),P("dialog-modal",()=>ve(!1)),document.addEventListener("keydown",n=>{n.key==="Escape"&&En()&&ve(!1)})}function Lt(){const e=N("dialog-modal");if(!e)return;e.classList.remove("hidden"),N("dialog-confirm-btn")?.focus()}function Q({title:e="Confirm",message:t="",confirmText:o="Delete",cancelText:n="Cancel"}={}){return kt(),Tt({title:e,message:t,confirmText:o,cancelText:n,showCancel:!0}),Lt(),new Promise(a=>{ke=a})}function $({title:e="Notice",message:t="",okText:o="OK"}={}){return kt(),Tt({title:e,message:t,confirmText:o,cancelText:"",showCancel:!1}),Lt(),new Promise(n=>{ke=()=>n(!0)})}function Me(e){if(!e)return null;const t=localStorage.getItem(e);if(!t)return null;try{const o=JSON.parse(t);return Array.isArray(o)?o:null}catch{return null}}function vn(e){if(!e)return null;const t=localStorage.getItem(e);if(!t)return null;try{const o=JSON.parse(t);return o&&typeof o=="object"&&!Array.isArray(o)?o:null}catch{return null}}function Bt(e){return(typeof e?.name=="string"?e.name.trim():"")||"Untitled board"}function Dn(e){const t=document.getElementById("brand-text")||document.querySelector(".brand-text");t&&(t.textContent=Se());const o=document.getElementById("board-select");if(!o)return;const n=ae();o.innerHTML="",n.forEach(a=>{const i=document.createElement("option");i.value=a.id,i.textContent=Bt(a),o.appendChild(i)}),e&&(o.value=e)}function wn(e){const t=typeof e?.name=="string"?e.name.trim():"";return t?t.replace(/\.[^.]+$/,"").trim():""}function Ne(e){return typeof e=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.trim())}const Cn=new Set(["urgent","high","medium","low","none"]);function Ze(e){const t=(e||"").toString().trim().toLowerCase();return Cn.has(t)?t:"none"}function Tn(e){const t=e&&typeof e=="object"&&!Array.isArray(e)?e:{},o=t.showPriority!==!1,n=t.showDueDate!==!1,a=t.showAge!==!1,i=t.showChangeDate!==!1,s=typeof t.locale=="string"&&t.locale.trim()?t.locale.trim():typeof navigator<"u"&&typeof navigator.language=="string"?navigator.language:"en-US",r=Ze(t.defaultPriority),l=Number.parseInt((t.notificationDays??"").toString(),10),c=Number.isFinite(l)?Math.min(365,Math.max(0,l)):3;return{showPriority:o,showDueDate:n,showAge:a,showChangeDate:i,locale:s,defaultPriority:r,notificationDays:c}}function It(e){const t=(e||"").toString().trim();return t.length>=10&&t.includes("T")?t.slice(0,10):t}function At(e){const t=typeof e?.text=="string"?e.text:"",o=typeof e?.title=="string"?e.title:t,n=typeof e?.description=="string"?e.description:"",a=It(e?.dueDate??e?.["due-date"]),i=typeof e?.changeDate=="string"?e.changeDate:typeof e?.changedDate=="string"?e.changedDate:void 0,s=e?.column==="done",r=typeof e?.doneDate=="string"?e.doneDate.toString().trim():"",l=Array.isArray(e?.columnHistory)?e.columnHistory.map(c=>{const d=typeof c?.column=="string"?c.column.trim():"",p=typeof c?.at=="string"?c.at.trim():"";return!d||!p?null:{column:d,at:p}}).filter(Boolean):void 0;return{...e,title:o.toString().trim(),description:n.toString().trim(),priority:Ze(e?.priority),dueDate:a,...typeof i=="string"?{changeDate:i.toString().trim()}:{},...s&&r?{doneDate:r}:{doneDate:void 0},...l&&l.length?{columnHistory:l}:{columnHistory:void 0},changedDate:void 0}}function kn(e){if(!Array.isArray(e))return null;const t=e.map(n=>{const a=typeof n?.id=="string"?n.id:String(n?.id??""),i=typeof n?.text=="string"?n.text:String(n?.text??""),s=typeof n?.title=="string"?n.title:i,r=typeof n?.description=="string"?n.description:String(n?.description??""),l=Ze(n?.priority),c=typeof n?.dueDate=="string"?n.dueDate:typeof n?.["due-date"]=="string"?n["due-date"]:String(n?.dueDate??n?.["due-date"]??""),d=It(c),p=typeof n?.column=="string"?n.column:String(n?.column??""),u=Array.isArray(n?.labels)?n.labels.map(E=>typeof E=="string"?E:String(E)):[],m=Number.isFinite(n?.order)?n.order:void 0,f=typeof n?.creationDate=="string"?n.creationDate:void 0,g=typeof n?.changeDate=="string"?n.changeDate:typeof n?.changedDate=="string"?n.changedDate:void 0,b=typeof n?.doneDate=="string"?n.doneDate.trim():"",k=p.trim()==="done"&&(b||(typeof g=="string"?g.trim():"")||f)||"",v=Array.isArray(n?.columnHistory)?n.columnHistory.map(E=>{const C=typeof E?.column=="string"?E.column.trim():String(E?.column??"").trim(),ie=typeof E?.at=="string"?E.at.trim():String(E?.at??"").trim();return!C||!ie?null:{column:C,at:ie}}).filter(Boolean):void 0;return{id:a.trim(),title:s.trim(),description:r.trim(),priority:l,dueDate:d.trim(),column:p.trim(),...m!==void 0?{order:m}:{},...f?{creationDate:f}:{},...typeof g=="string"&&g.trim()?{changeDate:g.trim()}:{},...k?{doneDate:k}:{},...v&&v.length?{columnHistory:v}:{},labels:u}});return t.every(n=>n.id&&n.title&&n.column)?t:null}function Ln(e){if(!Array.isArray(e))return null;const t=e.map(n=>{const a=typeof n?.id=="string"?n.id:String(n?.id??""),i=typeof n?.name=="string"?n.name:String(n?.name??""),s=Number.isFinite(n?.order)?n.order:void 0,r=Ne(n?.color)?n.color.trim():"#3b82f6",l=n?.collapsed===!0;return{id:a.trim(),name:i.trim(),color:r,collapsed:l,...s!==void 0?{order:s}:{}}});if(!t.some(n=>n.id==="done")){const n=t.reduce((a,i)=>Math.max(a,Number.isFinite(i?.order)?i.order:0),0);t.push({id:"done",name:"Done",color:"#16a34a",order:n+1,collapsed:!1})}return t.every(n=>n.id&&n.name)?t:null}function Bn(e){if(!Array.isArray(e))return null;const t=e.map(n=>{const a=typeof n?.id=="string"?n.id:String(n?.id??""),i=typeof n?.name=="string"?n.name:String(n?.name??""),s=Ne(n?.color)?n.color.trim():"#3b82f6",r=typeof n?.group=="string"?n.group.trim():"";return{id:a.trim(),name:i.trim(),color:s,group:r}});return t.every(n=>n.id&&n.name&&n.color)?t:null}function In(e){if(!e||typeof e!="object"||Array.isArray(e))return null;const t=e.showPriority!==!1,o=e.showDueDate!==!1,n=e.showAge!==!1,a=e.showChangeDate!==!1,i=typeof e.locale=="string"&&e.locale.trim()?e.locale.trim():void 0,s=typeof e.defaultPriority=="string"?e.defaultPriority:void 0,r=s?Ze(s):void 0,l=Number.parseInt((e.notificationDays??"").toString(),10),c=Number.isFinite(l)?Math.min(365,Math.max(0,l)):void 0;return{showPriority:t,showDueDate:o,showAge:n,showChangeDate:a,...i?{locale:i}:{},...r?{defaultPriority:r}:{},...c!==void 0?{notificationDays:c}:{}}}function An(){const e=B().map(At),t=Z().map(d=>({...d,color:Ne(d?.color)?d.color.trim():"#3b82f6"})),o=x(),n=T(),a=Se(),s=JSON.stringify({boardName:a,columns:t,tasks:e,labels:o,settings:n},null,2),r=new Blob([s],{type:"application/json"}),l=URL.createObjectURL(r),c=document.createElement("a");c.href=l,c.download=`${a.replaceAll(" ","_").replaceAll(".","_")}_board_${new Date().toISOString().replaceAll(":","-").replaceAll(".","-")}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)}function xn(e){const t=typeof e=="string"?e.trim():"";if(!t)return;const o=ae().find(C=>C.id===t),n=Bt(o),a=`kanbanBoard:${t}:columns`,i=`kanbanBoard:${t}:tasks`,s=`kanbanBoard:${t}:labels`,r=`kanbanBoard:${t}:settings`,l=Me(i)||[],c=Me(a)||[],d=Me(s)||[],p=vn(r)||null,u=l.map(At),m=c.map(C=>({...C,color:Ne(C?.color)?C.color.trim():"#3b82f6",collapsed:C?.collapsed===!0})),f=Array.isArray(d)?d:[],g=Tn(p),y=JSON.stringify({boardName:n,columns:m,tasks:u,labels:f,settings:g},null,2),k=new Blob([y],{type:"application/json"}),v=URL.createObjectURL(k),E=document.createElement("a");E.href=v,E.download=`${n.replaceAll(" ","_").replaceAll(".","_")}_board_${new Date().toISOString().replaceAll(":","-").replaceAll(".","-")}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(v)}function Sn(e){const t=new FileReader;t.onload=async o=>{try{const n=JSON.parse(o.target.result);let a,i,s,r,l;if(Array.isArray(n))a=n,i=null,s=null,r=null,l=null;else if(n.tasks&&n.columns)a=n.tasks,i=n.columns,s=Object.prototype.hasOwnProperty.call(n,"labels")?n.labels:null,r=Object.prototype.hasOwnProperty.call(n,"settings")?n.settings:null,l=typeof n.boardName=="string"?n.boardName.trim():null;else{alert("Invalid JSON file format");return}const c=kn(a),d=i?Ln(i):null,p=s?Bn(s):null,u=r?In(r):null;if(!c||i&&!d||s&&!p||r&&!u){alert("Invalid data structure");return}const m=l||wn(e)||"Imported board",f=yt(m);if(f?.id&&pe(f.id),d&&ee(d),O(c),p&&he(p),u){const b=T();Xe({...b,...u})}Dn(f?.id);const{renderBoard:g}=await M(async()=>{const{renderBoard:b}=await Promise.resolve().then(()=>z);return{renderBoard:b}},void 0,import.meta.url);g(),document.dispatchEvent(new CustomEvent("kanban:boards-changed")),alert("Board imported successfully!")}catch(n){alert("Error parsing JSON file: "+n.message)}},t.readAsText(e)}function xt(e,t){if(!e)return;const o=e.closest(".form-group");if(!o)return;o.classList.add("error");let n=o.querySelector(".error-message");n||(n=document.createElement("div"),n.classList.add("error-message"),o.appendChild(n)),n.textContent=t,e.focus()}function re(e){if(!e)return;const t=e.closest(".form-group");t&&t.classList.remove("error")}function Pn(e){return(e?.trim()||"").length>0}function Nn(e){const t=e?.value?.trim()||"";return Pn(t)?(re(e),!0):(xt(e,"Task title is required"),!1)}function Zn(e){return(e?.trim()||"").length>0}function $n(e){const t=e?.value?.trim()||"";return Zn(t)?(re(e),!0):(xt(e,"Column name is required"),!1)}function lt(e,t,o,n){const a=document.createElement("div");a.classList.add("accordion");const i=document.createElement("button");i.type="button",i.classList.add("accordion-header"),i.setAttribute("aria-expanded",String(o));const s=document.createElement("span");s.dataset.lucide=o?"chevron-down":"chevron-right",s.setAttribute("aria-hidden","true");const r=document.createElement("span");r.classList.add("accordion-title"),r.textContent=e;const l=document.createElement("span");l.classList.add("accordion-count"),l.textContent=t.length,i.appendChild(s),i.appendChild(r),i.appendChild(l);const c=document.createElement("div");return c.classList.add("accordion-body"),o||c.classList.add("collapsed"),t.forEach(d=>{c.appendChild(n(d))}),i.addEventListener("click",()=>{const d=i.getAttribute("aria-expanded")==="true";i.setAttribute("aria-expanded",String(!d)),c.classList.toggle("collapsed",d),s.dataset.lucide=d?"chevron-right":"chevron-down",te()}),a.appendChild(i),a.appendChild(c),a}let ct="todo",fe=null,ge=null,ce=null,Le=null,I=[],W=!1,ye=!1;const Y=40;let le=!1;function $e(e){const t=document.getElementById("task-modal");if(!t)return;t.classList.toggle("fullscreen",!!e);const o=document.getElementById("task-fullpage-btn");if(o?.setAttribute("aria-pressed",e?"true":"false"),o){const n=o.querySelector("[data-lucide]");n&&n.setAttribute("data-lucide",e?"minimize-2":"maximize-2"),o.title=e?"Exit full page":"Open in full page"}te()}function J(e){const t=document.getElementById(e);return!!t&&!t.classList.contains("hidden")}function P(e,t){const o=document.getElementById(e);if(!o)return;o.querySelector(".modal-backdrop")?.addEventListener("click",t),o.querySelectorAll('[id$="-close-btn"], [id$="-close-modal-btn"], [id$="-cancel-btn"], [id^="cancel-"]').forEach(i=>{i.addEventListener("click",t)})}function _n(){const e=document.getElementById("task-modal");e&&(e.classList.remove("hidden"),oe(),document.getElementById("task-label-search")?.focus(),W=!1)}function Mn(){return(document.getElementById("task-label-search")?.value||"").trim().toLowerCase()}function Hn(){return(document.getElementById("labels-search")?.value||"").trim().toLowerCase()}function tt(){const e=document.getElementById("task-active-labels");if(!e)return;const t=x(),o=[];for(const a of I)o.includes(a)||o.push(a);I=o;const n=o.map(a=>t.find(i=>i.id===a)).filter(Boolean);e.innerHTML="",e.style.display=n.length>0?"flex":"none",n.forEach(a=>{const i=document.createElement("span");i.classList.add("task-label"),i.style.backgroundColor=a.color,i.textContent=a.name;const s=document.createElement("button");s.type="button",s.classList.add("active-label-remove"),s.setAttribute("aria-label",`Remove label ${a.name}`),s.title="Remove label",s.textContent="Ã—",s.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),I=I.filter(l=>l!==a.id),tt(),oe()}),i.appendChild(s),e.appendChild(i)})}function On(e){ct=e||Z()[0]?.id||"todo",fe=null,I=[],W=!1,ye=!1,$e(!1),document.getElementById("task-fullpage-btn")?.classList.add("hidden");const t=document.getElementById("task-modal"),o=document.getElementById("task-column"),n=document.getElementById("task-title"),a=document.getElementById("task-description"),i=document.getElementById("task-priority"),s=document.getElementById("task-due-date"),r=document.getElementById("task-modal-title"),l=document.getElementById("task-submit-btn");if(re(n),r.textContent="Add New Task",l.textContent="Add Task",o.value=ct,n.value="",a.value="",i){const d=T();i.value=d.defaultPriority||"none"}s&&(s.value="");const c=document.getElementById("task-label-search");c&&(c.value=""),oe(),t.classList.remove("hidden"),n.focus()}function j(e){const o=B().find(g=>g.id===e);if(!o)return;fe=e,I=o.labels||[],W=!1,ye=!1,$e(!1),document.getElementById("task-fullpage-btn")?.classList.remove("hidden");const n=document.getElementById("task-modal"),a=document.getElementById("task-column"),i=document.getElementById("task-title"),s=document.getElementById("task-description"),r=document.getElementById("task-priority"),l=document.getElementById("task-due-date"),c=document.getElementById("task-modal-title"),d=document.getElementById("task-submit-btn");re(i),c.textContent="Edit Task",d.textContent="Save Changes",a.value=o.column;const p=typeof o.text=="string"?o.text:"";i.value=typeof o.title=="string"&&o.title.trim()!==""?o.title:p,s.value=typeof o.description=="string"?o.description:"",r&&(r.value=typeof o.priority=="string"?o.priority:"none");const u=typeof o.dueDate=="string"?o.dueDate:"",m=u.includes("T")?u.slice(0,10):u;l&&(l.value=m);const f=document.getElementById("task-label-search");f&&(f.value=""),oe(),n.classList.remove("hidden"),i.focus()}function He(){document.getElementById("task-modal").classList.add("hidden"),fe=null,W=!1,$e(!1),document.getElementById("task-fullpage-btn")?.classList.add("hidden")}function Rn(){ge=null;const e=document.getElementById("column-modal"),t=document.getElementById("column-name"),o=document.getElementById("column-color"),n=document.getElementById("column-modal-title"),a=document.getElementById("column-submit-btn");re(t),n.textContent="Add New Column",a.textContent="Add Column",t.value="",o&&(o.value="#3b82f6",nt("#3b82f6")),e.classList.remove("hidden"),t.focus()}function Fn(e){const o=Z().find(l=>l.id===e);if(!o)return;ge=e;const n=document.getElementById("column-modal"),a=document.getElementById("column-name"),i=document.getElementById("column-color"),s=document.getElementById("column-modal-title"),r=document.getElementById("column-submit-btn");if(re(a),s.textContent="Edit Column",r.textContent="Save Changes",a.value=o.name,i){const l=o.color||"#3b82f6";i.value=l,nt(l)}n.classList.remove("hidden"),a.focus()}function Oe(){document.getElementById("column-modal").classList.add("hidden"),ge=null}function zn(){const e=document.getElementById("labels-search");e&&(e.value=""),Ie(),document.getElementById("labels-modal").classList.remove("hidden"),W||document.getElementById("labels-search")?.focus()}function Re(){document.getElementById("labels-modal").classList.add("hidden");const t=document.getElementById("labels-search");t&&(t.value=""),W&&_n()}function Un(){document.getElementById("help-modal").classList.remove("hidden")}function dt(){document.getElementById("help-modal").classList.add("hidden")}const jn=/^#[0-9a-fA-F]{6}$/;function De(e){return jn.test(e)}function St(e){const t=document.getElementById("label-color-hex");t&&(t.value=e,t.classList.remove("invalid"))}function nt(e){const t=document.getElementById("column-color-hex");t&&(t.value=e,t.classList.remove("invalid"))}function qn(){const e=document.getElementById("label-group-suggestions");if(!e)return;e.innerHTML="";const t=x();[...new Set(t.map(n=>(n.group||"").trim()).filter(n=>n.length>0))].sort((n,a)=>n.localeCompare(a)).forEach(n=>{const a=document.createElement("option");a.value=n,e.appendChild(a)})}function Be(e=null,{openedFromTaskEditor:t=!1,initialName:o=""}={}){ce=e,le=!1,ye=!!t;const n=document.getElementById("label-modal"),a=document.getElementById("label-modal-title"),i=document.getElementById("label-name"),s=document.getElementById("label-color"),r=document.getElementById("label-group"),l=document.getElementById("label-submit-btn");if(e){const d=x().find(p=>p.id===e);d&&(a.textContent="Edit Label",l.textContent="Update Label",i.value=d.name,s.value=d.color,r&&(r.value=d.group||""))}else a.textContent="Add Label",l.textContent="Add Label",i.value=o||"",s.value="#3b82f6",r&&(r.value="");qn(),St(s.value),n.classList.remove("hidden"),i.focus()}function Fe(){document.getElementById("label-modal").classList.add("hidden"),ce=null,ye=!1}function ut(e){const t=document.createElement("div");t.classList.add("label-item"),t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="space-between";const o=document.createElement("span");o.classList.add("task-label"),o.style.backgroundColor=e.color,o.textContent=e.name;const n=document.createElement("div");n.classList.add("label-actions"),n.style.display="flex",n.style.gap="4px";const a=document.createElement("button");a.classList.add("btn-small");const i=document.createElement("span");i.dataset.lucide="pencil",a.appendChild(i),a.title="Edit label",a.addEventListener("click",()=>Be(e.id));const s=document.createElement("button");s.classList.add("btn-small","btn-danger");const r=document.createElement("span");return r.dataset.lucide="trash-2",s.appendChild(r),s.title="Delete label",s.addEventListener("click",async()=>{if(await Q({title:"Delete Label",message:`Delete label "${e.name}"? This will remove it from all tasks.`,confirmText:"Delete"})){yn(e.id),Ie();const{renderBoard:c}=await M(async()=>{const{renderBoard:d}=await Promise.resolve().then(()=>z);return{renderBoard:d}},void 0,import.meta.url);c()}}),n.appendChild(a),n.appendChild(s),t.appendChild(o),t.appendChild(n),t}function Pt(e){const t=e.filter(a=>!(a.group||"").trim()),o=new Map;e.forEach(a=>{const i=(a.group||"").trim();i&&(o.has(i)||o.set(i,[]),o.get(i).push(a))});const n=[...o.keys()].sort((a,i)=>a.localeCompare(i));return{ungrouped:t,groupMap:o,sortedGroups:n}}function Ie(){const e=document.getElementById("labels-list");e.innerHTML="";const t=x(),o=Hn(),n=o?t.filter(l=>{const c=(l.name||"").toLowerCase(),d=(l.id||"").toLowerCase(),p=(l.group||"").toLowerCase();return c.includes(o)||d.includes(o)||p.includes(o)}):t;if(n.length===0){const l=document.createElement("div");l.classList.add("labels-empty"),l.textContent=o?"No matching labels":"No labels yet",e.appendChild(l);return}const{ungrouped:a,groupMap:i,sortedGroups:s}=Pt(n);let r=!0;a.length>0&&(e.appendChild(lt("Ungrouped",a,r,ut)),r=!1),s.forEach(l=>{e.appendChild(lt(l,i.get(l),r,ut)),r=!1}),te()}function qe(){const e=document.getElementById("board-select");if(!e)return;const t=ae(),o=Ke();e.innerHTML="",t.forEach(a=>{const i=document.createElement("option");i.value=a.id,i.textContent=typeof a.name=="string"&&a.name.trim()?a.name.trim():"Untitled board",e.appendChild(i)}),o&&(e.value=o);const n=document.getElementById("brand-text")||document.querySelector(".brand-text");n&&(n.textContent=Se())}function be(){Pe();const e=document.getElementById("boards-list");if(!e)return;e.innerHTML="";const t=ae(),o=Ke();t.forEach(n=>{const a=document.createElement("div");a.classList.add("label-item"),a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="space-between",a.style.gap="10px";const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.gap="8px";const s=document.createElement("span");if(s.textContent=(n.name||"").toString(),i.appendChild(s),n.id===o){const g=document.createElement("span");g.classList.add("task-label"),g.style.backgroundColor="var(--color-primary)",g.textContent="Active",i.appendChild(g)}const r=document.createElement("div");r.classList.add("label-actions"),r.style.display="flex",r.style.gap="4px";const l=document.createElement("button");l.classList.add("btn-small"),l.textContent="Open",l.title="Open board",l.addEventListener("click",async()=>{pe(n.id),qe(),be();const{renderBoard:g}=await M(async()=>{const{renderBoard:b}=await Promise.resolve().then(()=>z);return{renderBoard:b}},void 0,import.meta.url);g(),We()});const c=document.createElement("button");c.classList.add("btn-small"),c.type="button",c.title="Export board",c.setAttribute("aria-label",`Export board ${String(n.name||"Untitled board")}`);const d=document.createElement("span");d.dataset.lucide="download",c.appendChild(d),c.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation(),xn(n.id)});const p=document.createElement("button");p.classList.add("btn-small");const u=document.createElement("span");u.dataset.lucide="pencil",p.appendChild(u),p.title="Rename board",p.addEventListener("click",()=>Gn(n.id));const m=document.createElement("button");m.classList.add("btn-small","btn-danger");const f=document.createElement("span");f.dataset.lucide="trash-2",m.appendChild(f),m.title="Delete board",m.addEventListener("click",async()=>{if(!await Q({title:"Delete Board",message:`Do you really want to delete the board "${n.name}"? This cannot be undone.`,confirmText:"Delete"}))return;if(!Kt(n.id)){await $({title:"Unable to Delete",message:"Unable to delete board (you may be trying to delete the last board)."});return}qe(),be();const{renderBoard:y}=await M(async()=>{const{renderBoard:k}=await Promise.resolve().then(()=>z);return{renderBoard:k}},void 0,import.meta.url);y()}),r.appendChild(l),r.appendChild(c),r.appendChild(p),r.appendChild(m),a.appendChild(i),a.appendChild(r),e.appendChild(a)}),te()}function Wn(){be(),document.getElementById("boards-modal")?.classList.remove("hidden")}function We(){document.getElementById("boards-modal")?.classList.add("hidden")}function Vn(){const e=document.getElementById("boards-modal");!e||e.classList.contains("hidden")||be()}function Gn(e){Pe();const t=ae().find(s=>s.id===e);if(!t)return;Le=e;const o=document.getElementById("board-rename-modal"),n=document.getElementById("board-rename-name"),a=document.getElementById("board-rename-modal-title"),i=document.getElementById("board-rename-submit-btn");a&&(a.textContent="Rename Board"),i&&(i.textContent="Save"),n&&(n.value=(t.name||"").toString()),o?.classList.remove("hidden"),n?.focus()}function ze(){document.getElementById("board-rename-modal")?.classList.add("hidden"),Le=null}function mt(e){const t=document.createElement("label");t.classList.add("label-checkbox");const o=document.createElement("input");o.type="checkbox",o.value=e.id,o.checked=I.includes(e.id),o.addEventListener("change",a=>{a.target.checked?I.includes(e.id)||I.push(e.id):I=I.filter(i=>i!==e.id),tt()});const n=document.createElement("span");return n.classList.add("task-label","label-color-swatch"),n.style.backgroundColor=e.color,n.textContent=e.name,t.appendChild(o),t.appendChild(n),t}function oe(){tt();const e=document.getElementById("task-labels-selection");e.innerHTML="";const t=Mn(),o=x(),n=t?o.filter(r=>{const l=(r.name||"").toLowerCase(),c=(r.id||"").toLowerCase(),d=(r.group||"").toLowerCase();return l.includes(t)||c.includes(t)||d.includes(t)}):o;if(n.length===0){if(t){const r=document.createElement("button");r.type="button",r.classList.add("labels-empty-button"),r.textContent=`No label found "${t}" - Create label`,r.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),Be(null,{openedFromTaskEditor:!0,initialName:t})}),e.appendChild(r)}else{const r=document.createElement("div");r.classList.add("labels-empty"),r.textContent="No matching labels",e.appendChild(r)}return}const{ungrouped:a,groupMap:i,sortedGroups:s}=Pt(n);a.forEach(r=>{e.appendChild(mt(r))}),s.forEach(r=>{const l=document.createElement("div");l.classList.add("label-group-header","label-group-header-picker"),l.textContent=r,e.appendChild(l),i.get(r).forEach(c=>{e.appendChild(mt(c))})})}function Yn(){document.addEventListener("kanban:boards-changed",()=>{Vn()}),document.getElementById("task-label-search")?.addEventListener("input",oe),document.getElementById("labels-search")?.addEventListener("input",Ie),document.getElementById("task-add-label-btn")?.addEventListener("click",()=>{W=!1,Be(null,{openedFromTaskEditor:!0})}),document.getElementById("task-fullpage-btn")?.addEventListener("click",()=>{const c=document.getElementById("task-modal");c&&$e(!c.classList.contains("fullscreen"))}),document.getElementById("task-form").addEventListener("submit",async c=>{c.preventDefault();const d=document.getElementById("task-title");if(!Nn(d))return;const p=d.value.trim(),u=document.getElementById("task-description").value,m=document.getElementById("task-priority")?.value,f=document.getElementById("task-due-date")?.value,g=document.getElementById("task-column").value;fe?on(fe,p,u,m,f,g,I):nn(p,u,m,f,g,I),He();const{renderBoard:b}=await M(async()=>{const{renderBoard:y}=await Promise.resolve().then(()=>z);return{renderBoard:y}},void 0,import.meta.url);b()}),P("task-modal",He),document.getElementById("column-form").addEventListener("submit",async c=>{c.preventDefault();const d=document.getElementById("column-name");if(!$n(d))return;const p=d.value.trim(),u=document.getElementById("column-color-hex"),m=(u?.value||"").trim();let f;if(m&&m!==document.getElementById("column-color").value){const b=m.startsWith("#")?m:"#"+m;if(!De(b)){u?.classList.add("invalid"),await $({title:"Invalid Hex Color",message:"Please enter a valid hex color code (e.g. #3b82f6)."}),u?.focus();return}document.getElementById("column-color").value=b,f=b}else f=document.getElementById("column-color")?.value;ge?un(ge,p,f):cn(p,f),Oe();const{renderBoard:g}=await M(async()=>{const{renderBoard:b}=await Promise.resolve().then(()=>z);return{renderBoard:b}},void 0,import.meta.url);g()}),P("column-modal",Oe),document.getElementById("manage-labels-btn").addEventListener("click",zn),document.getElementById("add-label-btn").addEventListener("click",()=>Be()),P("labels-modal",Re);const a=document.getElementById("label-name");a?.addEventListener("beforeinput",c=>{if(!c||typeof c.data!="string"||c.data.length===0)return;const d=c.target;if(!d||typeof d.value!="string")return;const p=typeof d.selectionStart=="number"?d.selectionStart:d.value.length,u=typeof d.selectionEnd=="number"?d.selectionEnd:d.value.length;(d.value.slice(0,p)+c.data+d.value.slice(u)).trim().length<=Y||(c.preventDefault(),!le&&(le=!0,$({title:"Label Name Too Long",message:`Label names are limited to ${Y} characters.`})))});const i=document.getElementById("label-color");i?.addEventListener("input",c=>{St(c.target.value)}),document.getElementById("label-color-hex")?.addEventListener("input",c=>{let d=c.target.value;d&&!d.startsWith("#")&&(d="#"+d),De(d)?(i.value=d,c.target.classList.remove("invalid")):c.target.classList.toggle("invalid",d.length>0)});const r=document.getElementById("column-color");r?.addEventListener("input",c=>{nt(c.target.value)}),document.getElementById("column-color-hex")?.addEventListener("input",c=>{let d=c.target.value;d&&!d.startsWith("#")&&(d="#"+d),De(d)?(r.value=d,c.target.classList.remove("invalid")):c.target.classList.toggle("invalid",d.length>0)}),a?.addEventListener("input",c=>{const d=c.target;if(!d||typeof d.value!="string")return;const p=d.value.trim();p.length<=Y||(d.value=p.slice(0,Y),!le&&(le=!0,$({title:"Label Name Too Long",message:`Label names are limited to ${Y} characters.`})))}),document.getElementById("label-form").addEventListener("submit",async c=>{c.preventDefault();const d=document.getElementById("label-name").value,p=document.getElementById("label-color-hex"),u=(p?.value||"").trim();let m;if(u&&u!==document.getElementById("label-color").value){const v=u.startsWith("#")?u:"#"+u;if(!De(v)){p?.classList.add("invalid"),await $({title:"Invalid Hex Color",message:"Please enter a valid hex color code (e.g. #3b82f6)."}),p?.focus();return}document.getElementById("label-color").value=v,m=v}else m=document.getElementById("label-color").value;const f=(d||"").trim();if(f.length>Y){await $({title:"Label Name Too Long",message:`Label names are limited to ${Y} characters.`});return}const g=(document.getElementById("label-group")?.value||"").trim(),b=!ce,y=ce?hn(ce,f,m,g):bn(f,m,g);if(!y?.success){let v="Unable to Save Label",E="Could not save label.";y?.reason==="DUPLICATE_NAME"?(v="Label Already Exists",E=y?.message||"A label with that name already exists (case-insensitive)."):y?.reason==="EMPTY_NAME"&&(v="Label Name Required",E="Please enter a label name."),await $({title:v,message:E}),document.getElementById("label-name")?.focus();return}b&&ye&&y?.label?.id&&(I.includes(y.label.id)||I.push(y.label.id),oe(),document.getElementById("task-label-search")?.focus()),Fe(),Ie();const{renderBoard:k}=await M(async()=>{const{renderBoard:v}=await Promise.resolve().then(()=>z);return{renderBoard:v}},void 0,import.meta.url);k(),W&&b&&Re()}),P("label-modal",Fe),document.getElementById("manage-boards-btn")?.addEventListener("click",Wn),document.getElementById("add-board-btn")?.addEventListener("click",async()=>{document.dispatchEvent(new CustomEvent("kanban:open-board-create"))}),document.getElementById("boards-import-btn")?.addEventListener("click",async()=>{await Q({title:"Import Board (New Board)",message:`Import will CREATE A NEW BOARD and switch to it. Your current active board will not be overwritten.

Continue with import?`,confirmText:"Import"})&&document.getElementById("import-file")?.click()}),P("boards-modal",We),document.getElementById("board-rename-form")?.addEventListener("submit",c=>{if(c.preventDefault(),!Le)return;const p=(document.getElementById("board-rename-name")?.value||"").trim();if(!p){alert("Board name cannot be empty.");return}if(!Qt(Le,p)){alert("Unable to rename board.");return}ze(),qe(),be(),window.lucide&&typeof window.lucide.createIcons=="function"&&window.lucide.createIcons()}),P("board-rename-modal",ze),document.getElementById("help-btn").addEventListener("click",Un),P("help-modal",dt),document.getElementById("add-column-btn").addEventListener("click",Rn),document.addEventListener("keydown",c=>{if(c.key==="Escape"){if(J("label-modal")){Fe();return}if(J("labels-modal")){Re();return}if(J("board-rename-modal")){ze();return}if(J("boards-modal")){We();return}if(J("help-modal")){dt();return}if(J("column-modal")){Oe();return}J("task-modal")&&He()}})}let Ve=[],Te=null,de=null,q=0,_=0;const Ge="is-drop-hover";let Ye=!1,K=null;function Jn(){const e=typeof navigator<"u"&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),t=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer: coarse)").matches;return e||t}function Xn(){Kn(),oo(),ao()}function Kn(){Ve.forEach(e=>e.destroy()),Ve=[],Te&&(Te.destroy(),Te=null),Nt()}function Qn(){const e=document.getElementById("board-container");!e||de||(de=setInterval(()=>{if(!e)return;const t=e.getBoundingClientRect(),o=80,n=12;q>0&&(q<t.left+o&&e.scrollLeft>0?e.scrollLeft-=n:q>t.right-o&&e.scrollLeft<e.scrollWidth-e.clientWidth&&(e.scrollLeft+=n))},16))}function Nt(){de&&(clearInterval(de),de=null),q=0,_=0}function eo(){if(!Ye||!K)return;const e=K.getBoundingClientRect(),t=80,o=20;let n=0;if(_>0){if(_<e.top+t){const a=Math.max(0,_-e.top),i=(t-a)/t;n=-Math.ceil(i*o)}else if(_>e.bottom-t){const a=Math.max(0,e.bottom-_),i=(t-a)/t;n=Math.ceil(i*o)}}n!==0&&(K.scrollTop+=n)}function to(){document.querySelectorAll(".task-column.is-collapsed .tasks").forEach(e=>{e.classList.contains("hidden")&&(e.dataset.wasHidden="true",e.classList.remove("hidden"))})}function no(){document.querySelectorAll(".task-column.is-collapsed .tasks").forEach(e=>{e.dataset.wasHidden==="true"&&(e.classList.add("hidden"),delete e.dataset.wasHidden)})}function Ae(){document.querySelectorAll(`.task-column.is-collapsed.${Ge}`).forEach(e=>e.classList.remove(Ge))}function Zt(e){Ae(),e&&e.classList.add(Ge)}function we(e){e.touches&&e.touches[0]?(q=e.touches[0].clientX,_=e.touches[0].clientY):e.clientX&&(q=e.clientX,_=e.clientY),$t(q,_),eo()}function $t(e,t){if(!e&&!t)return;const n=document.elementFromPoint(e,t)?.closest?.(".task-column");n&&n.classList.contains("is-collapsed")?Zt(n):Ae()}function oo(){const e=document.querySelectorAll(".tasks"),t=Jn();e.forEach(o=>{const a=o.closest(".task-column")?.dataset?.column==="done",i=new Et(o,{group:{name:"tasks",pull:!0,put:!0},sort:!a,animation:150,delay:150,delayOnTouchOnly:!0,touchStartThreshold:5,ghostClass:"task-ghost",chosenClass:"task-chosen",dragClass:"task-drag",draggable:".task",forceFallback:t,fallbackClass:"task-fallback",fallbackOnBody:!0,fallbackTolerance:0,swapThreshold:.65,emptyInsertThreshold:20,direction:"vertical",scroll:!0,scrollSensitivity:120,scrollSpeed:22,bubbleScroll:!0,onStart:function(s){document.body.classList.add("dragging"),Ye=!0,K=s.from||null,to(),Qn(),document.addEventListener("touchmove",we,{passive:!0}),document.addEventListener("mousemove",we,{passive:!0}),$t(q,_)},onMove:function(s){K=s.to||K;const r=s.to?.closest(".task-column");r&&r.classList.contains("is-collapsed")?Zt(r):Ae()},onEnd:async function(s){document.body.classList.remove("dragging"),Ye=!1,K=null,Nt(),document.removeEventListener("touchmove",we),document.removeEventListener("mousemove",we);const r=rn(s);let l=r?.tasks||null;const c=s.to?.closest(".task-column"),d=r?.toColumn==="done";if(r&&(c?.classList.contains("is-collapsed")||d)&&(l=sn(r.movedTaskId,r.toColumn,l),d&&s.item&&s.to&&s.to.prepend(s.item)),Ae(),no(),r){const{syncTaskCounters:p,syncCollapsedTitles:u,syncMovedTaskDueDate:m}=await M(async()=>{const{syncTaskCounters:g,syncCollapsedTitles:b,syncMovedTaskDueDate:y}=await Promise.resolve().then(()=>z);return{syncTaskCounters:g,syncCollapsedTitles:b,syncMovedTaskDueDate:y}},void 0,import.meta.url),{refreshNotifications:f}=await M(async()=>{const{refreshNotifications:g}=await Promise.resolve().then(()=>io);return{refreshNotifications:g}},void 0,import.meta.url);p(l),r.didChangeColumn&&(u(l),m(r.movedTaskId,r.toColumn,l),f())}}});Ve.push(i)})}function ao(){const e=document.getElementById("board-container");e&&(Te=new Et(e,{animation:150,delay:150,delayOnTouchOnly:!0,touchStartThreshold:5,ghostClass:"column-ghost",chosenClass:"column-chosen",dragClass:"column-drag",handle:".column-header",filter:"button:not(.column-drag-handle), a, input, select, textarea, [contenteditable]",preventOnFilter:!0,draggable:".task-column",scrollSensitivity:80,scrollSpeed:15,forceFallback:!1,fallbackOnBody:!0,onStart:function(t){document.body.classList.add("dragging-column")},onEnd:function(t){document.body.classList.remove("dragging-column"),pn()}}))}function xe(e,t=null){const o=(e||"").toString().trim();if(!o)return null;const n=new Date(o+"T00:00:00");if(Number.isNaN(n.getTime()))return null;const a=t||new Date;a.setHours(0,0,0,0);const i=n.getTime()-a.getTime();return Math.floor(i/(1e3*60*60*24))}function _t(e){if(e===null)return"";if(e<0){const t=Math.abs(e);if(t<30)return`overdue by ${t} day${t===1?"":"s"}`;{const o=Math.floor(t/30),n=t%30,a=`${o} month${o===1?"":"s"}`,i=n>0?` ${n} day${n===1?"":"s"}`:"";return`overdue by ${a}${i}`}}else{if(e===0)return"today";if(e===1)return"tomorrow";if(e<30)return`${e} days`;{const t=Math.floor(e/30),o=e%30,n=`${t} month${t===1?"":"s"}`,a=o>0?` ${o} day${o===1?"":"s"}`:"";return`${n}${a}`}}}function Mt(e,t=3,o=10){return e===null?"countdown-none":e<t?"countdown-urgent":e<=o?"countdown-warning":"countdown-normal"}const Ht="kanbanNotificationBannerHidden";let pt;function Ot(){return localStorage.getItem(Ht)==="true"}function ft(e){localStorage.setItem(Ht,e?"true":"false")}function Rt(){const e=document.getElementById("notification-banner-visibility-toggle");e&&(e.checked=!Ot())}function _e(){const e=B(),t=T(),o=Number.isFinite(t.notificationDays)?t.notificationDays:3,n=new Date;return n.setHours(0,0,0,0),e.filter(a=>{if(a.column==="done")return!1;const i=(a.dueDate||"").toString().trim();if(!i)return!1;const s=xe(i,n);return s===null?!1:s<=o}).map(a=>{const i=xe(a.dueDate,n);return{...a,daysUntilDue:i}}).sort((a,i)=>a.daysUntilDue-i.daysUntilDue)}function Ft(e,t,o){const a=new Date(t+"T00:00:00").toLocaleDateString(o||void 0);if(e<0){const i=Math.abs(e);return{text:`Overdue by ${i} day${i===1?"":"s"} (${a})`,className:"overdue"}}else return e===0?{text:`Due today (${a})`,className:"overdue"}:e===1?{text:`Due tomorrow (${a})`,className:"due-soon"}:{text:`Due in ${e} days (${a})`,className:"due-soon"}}function ot(){const e=document.getElementById("notification-banner"),t=document.getElementById("notification-banner-list");if(!e||!t)return;const o=_e(),n=T();if(o.length===0){e.classList.add("hidden");return}if(Ot()){e.classList.add("hidden");return}t.innerHTML="";const a=window.matchMedia("(min-width: 601px)").matches,i=s=>{const r=document.createElement("div");r.classList.add("notification-banner-item"),r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.setAttribute("aria-label",`Open task: ${s.title}`);const l=document.createElement("span");l.classList.add("task-title");const c=typeof s.text=="string"?s.text:"";l.textContent=typeof s.title=="string"&&s.title.trim()?s.title:c;const d=Ft(s.daysUntilDue,s.dueDate,n.locale),p=document.createElement("span");p.classList.add("due-date",d.className),p.textContent=d.text,r.appendChild(l),r.appendChild(p);const u=()=>j(s.id);return r.addEventListener("click",u),r.addEventListener("keydown",m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),u())}),r};if(a){const s=t.clientWidth||t.getBoundingClientRect().width;let r=0;for(const c of o){const d=i(c);if(t.appendChild(d),r+=1,t.scrollWidth>s&&r>1){t.removeChild(d),r-=1;break}}const l=o.length-r;if(l>0){const c=document.createElement("div");if(c.classList.add("notification-banner-item","notification-more"),c.setAttribute("role","button"),c.setAttribute("tabindex","0"),c.textContent=`+${l} `,c.addEventListener("click",ne),c.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),ne())}),t.appendChild(c),t.scrollWidth>s&&r>0){t.removeChild(t.children[r-1]),r-=1;const d=o.length-r;c.textContent=`+${d} `,t.appendChild(c)}}}else if(o.slice(0,5).forEach(r=>{const l=i(r);t.appendChild(l)}),o.length>5){const r=document.createElement("div");r.classList.add("notification-banner-item","notification-more"),r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.textContent=`+${o.length-5} `,r.addEventListener("click",ne),r.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),ne())}),t.appendChild(r)}e.classList.remove("hidden"),te()}function ro(){const e=document.getElementById("notifications-list");if(!e)return;const t=_e(),o=T(),n=Number.isFinite(o.notificationDays)?o.notificationDays:3;if(e.innerHTML="",t.length===0){const a=document.createElement("div");a.classList.add("notifications-empty"),a.textContent=n===0?"No tasks due today.":`No tasks due within the next ${n} day${n===1?"":"s"}.`,e.appendChild(a);return}t.forEach(a=>{const i=document.createElement("div");i.classList.add("notification-item"),i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("aria-label",`Open task: ${a.title}`);const s=document.createElement("div");s.classList.add("notification-item-content");const r=document.createElement("div");r.classList.add("notification-item-title");const l=typeof a.text=="string"?a.text:"";r.textContent=typeof a.title=="string"&&a.title.trim()?a.title:l;const c=document.createElement("div");c.classList.add("notification-item-meta");const d=Ft(a.daysUntilDue,a.dueDate,o.locale),p=document.createElement("span");p.classList.add(d.className),p.textContent=d.text;const u=typeof a.priority=="string"?a.priority:"none",m=document.createElement("span");m.classList.add("notification-item-priority",`priority-${u}`),m.textContent=u,c.appendChild(p),c.appendChild(m),s.appendChild(r),s.appendChild(c);const f=document.createElement("span");f.classList.add("notification-item-arrow"),f.dataset.lucide="chevron-right",i.appendChild(s),i.appendChild(f);const g=()=>{ue(),j(a.id)};i.addEventListener("click",g),i.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),g())}),e.appendChild(i)}),te()}function zt(){const e=[document.getElementById("notification-badge"),document.getElementById("notification-quick-badge")].filter(Boolean),t=[document.getElementById("notifications-btn"),document.getElementById("notifications-quick-btn")].filter(Boolean);if(e.length===0)return;const n=_e().length,a=n===1?"1 notification":`${n} notifications`,i=n>99?"99+":String(n);n===0?(e.forEach(s=>{s.classList.add("hidden"),s.textContent=""}),t.forEach(s=>{s.setAttribute("aria-label","Notifications"),s.removeAttribute("title")})):(e.forEach(s=>{s.classList.remove("hidden"),s.textContent=i}),t.forEach(s=>{s.setAttribute("aria-label",`Notifications (${a})`),s.setAttribute("title",`Notifications (${a})`)}))}function ne(){Rt(),ro(),document.getElementById("notifications-modal")?.classList.remove("hidden")}function ue(){document.getElementById("notifications-modal")?.classList.add("hidden")}function Ut(){const e=document.getElementById("notifications-modal");return e&&!e.classList.contains("hidden")}function jt(){document.getElementById("notification-banner-close-btn")?.addEventListener("click",()=>{ft(!0),me()});const t=document.getElementById("notification-banner-visibility-toggle");t?.addEventListener("change",()=>{ft(!t.checked),me()}),[document.getElementById("notifications-btn"),document.getElementById("notifications-quick-btn")].filter(Boolean).forEach(a=>{a.addEventListener("click",ne)}),document.getElementById("notifications-close-btn")?.addEventListener("click",ue),P("notifications-modal",ue),document.addEventListener("keydown",a=>{a.key==="Escape"&&Ut()&&ue()}),window.addEventListener("resize",()=>{clearTimeout(pt),pt=setTimeout(ot,120)}),me(),Rt()}function me(){ot(),zt()}const io=Object.freeze(Object.defineProperty({__proto__:null,getNotificationTasks:_e,hideNotificationsModal:ue,initializeNotifications:jt,isNotificationsModalOpen:Ut,refreshNotifications:me,renderNotificationBanner:ot,showNotificationsModal:ne,updateNotificationBadge:zt},Symbol.toStringTag,{value:"Module"}));let gt=!1,at="";const qt=50,so=50;let Ce=qt;function Wt(e){at=(e||"").toString()}function lo(e){return B().filter(o=>o.column===e).length}function Vt(e,t,o){if(!t)return!0;const n=typeof e?.text=="string"?e.text:"",a=typeof e?.title=="string"&&e.title.trim()!==""?e.title:n,i=typeof e?.description=="string"?e.description:"",s=typeof e?.priority=="string"?e.priority:"";if(a.toLowerCase().includes(t)||i.toLowerCase().includes(t)||s.toLowerCase().includes(t))return!0;const r=Array.isArray(e?.labels)?e.labels:[];for(const l of r){const c=o.get(l);if(c&&(c.name.includes(t)||c.group.includes(t)))return!0}return!1}function X(e=null){document.querySelectorAll(".column-menu").forEach(t=>{e&&t===e||t.classList.add("hidden")}),document.querySelectorAll(".column-submenu").forEach(t=>{t.classList.add("hidden")})}function co(e){return[...e].sort((t,o)=>{const n=(t.dueDate||"").toString().trim(),a=(o.dueDate||"").toString().trim();return!n&&!a?0:n?a?n.localeCompare(a):-1:1})}function uo(e){const t={urgent:0,high:1,medium:2,low:3,none:4};return[...e].sort((o,n)=>{const a=t[o.priority]??4,i=t[n.priority]??4;return a-i})}function bt(e,t){const o=B(),n=o.filter(l=>l.column===e),a=o.filter(l=>l.column!==e),s=(t==="dueDate"?co(n):uo(n)).map((l,c)=>({...l,order:c+1})),r=[...a,...s];O(r),H()}function Gt(e,t){const o=(e||"").toString().trim();if(!o)return"";const n=o.includes("T")?o:`${o}T00:00:00`,a=new Date(n);return Number.isNaN(a.getTime())?o:a.toLocaleDateString(t||void 0)}function mo(e,t){const o=(e||"").toString().trim();if(!o)return"";const n=new Date(o);return Number.isNaN(n.getTime())?o:n.toLocaleString(t||void 0)}function po(e){const t=(e?.creationDate||"").toString().trim();if(!t)return"";const o=new Date(t);if(Number.isNaN(o.getTime()))return"";const n=1440*60*1e3,a=Math.max(0,Math.floor((Date.now()-o.getTime())/n));if(a<30)return`${a}d`;const i=Math.floor(a/365);let s=a%365;const r=Math.floor(s/30);s=s%30;const l=[];return i>=1&&l.push(`${i}y`),r>=1&&l.push(`${r}M`),l.push(`${s}d`),l.join(" ")}function fo(e,t,o=null,n=null){const a=document.createElement("li");a.classList.add("task"),a.draggable=!0,a.dataset.taskId=e.id,a.setAttribute("role","listitem"),a.setAttribute("aria-label",`Task: ${e.title||e.text||"Untitled"}`);const i=document.createElement("div");i.classList.add("task-labels"),i.setAttribute("role","list"),i.setAttribute("aria-label","Task labels");const s=o||new Map(x().map(h=>[h.id,h]));e.labels&&e.labels.length>0&&e.labels.forEach(h=>{const D=s instanceof Map?s.get(h):s.find(w=>w.id===h);if(D){const w=document.createElement("span");w.classList.add("task-label"),w.setAttribute("role","listitem"),w.style.backgroundColor=D.color,w.textContent=D.name,i.appendChild(w)}});const r=document.createElement("div");r.classList.add("task-header");const l=t?.showPriority!==!1,c=t?.showDueDate!==!1,d=document.createElement("div");d.classList.add("task-title"),d.setAttribute("role","button"),d.setAttribute("tabindex","0");const p=typeof e.text=="string"?e.text:"";d.textContent=typeof e.title=="string"&&e.title.trim()!==""?e.title:p,d.addEventListener("click",()=>j(e.id)),d.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),j(e.id))});const u=document.createElement("div");if(u.classList.add("task-actions"),l){const h=typeof e.priority=="string"?e.priority.toLowerCase().trim():"",D=h==="urgent"||h==="high"||h==="medium"||h==="low"||h==="none"?h:"none",w=document.createElement("span");w.classList.add("task-priority",`priority-${D}`,"task-priority-header"),w.textContent=D,w.setAttribute("aria-label",`Priority: ${D}`),w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.title="Edit task",w.addEventListener("click",A=>{A.stopPropagation(),j(e.id)}),w.addEventListener("keydown",A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),j(e.id))}),u.appendChild(w)}const m=document.createElement("button");m.classList.add("delete-task-btn"),m.setAttribute("aria-label","Delete task"),m.type="button";const f=document.createElement("span");f.dataset.lucide="trash-2",f.setAttribute("aria-hidden","true"),m.appendChild(f),m.addEventListener("click",async h=>{h.stopPropagation(),await Q({title:"Delete Task",message:"Are you sure you want to delete this task?",confirmText:"Delete"})&&an(e.id)&&H()}),u.appendChild(m),r.appendChild(d),r.appendChild(u);const g=typeof e.description=="string"?e.description.trim():"",b=document.createElement("div");b.classList.add("task-description"),b.textContent=g,b.style.display=g?"block":"none",b.addEventListener("click",()=>j(e.id)),a.appendChild(r),a.appendChild(b),a.appendChild(i);const y=t?.showChangeDate!==!1,k=t?.showAge!==!1,v=t?.locale,E=document.createElement("div");if(E.classList.add("task-footer"),y){const h=document.createElement("span");h.classList.add("task-change-date");const D=mo(e?.changeDate,v);h.textContent=D?`Updated ${D}`:"",E.appendChild(h)}const C=document.createElement("div");if(C.classList.add("task-footer-row"),c){const h=typeof e.dueDate=="string"?e.dueDate.trim():"",D=document.createElement("span");if(D.classList.add("task-date"),!h)D.textContent="No due date",D.classList.add("countdown-none");else{const w=Gt(h,t?.locale),A=xe(h,n);if(A!==null){const S=_t(A);if(e.column==="done")D.textContent=`Due ${w}`,D.classList.add("countdown-none");else{const R=t?.countdownUrgentThreshold??3,G=t?.countdownWarningThreshold??10,L=Mt(A,R,G);D.textContent=`Due ${w} (${S})`,D.classList.add(L)}}else D.textContent="Due "+w,D.classList.add("countdown-none")}C.appendChild(D)}if(k){const h=document.createElement("span");h.classList.add("task-age");const D=po(e);h.textContent=D?`Age ${D}`:"",C.appendChild(h)}return Array.from(C.childNodes).some(h=>(h.textContent||"").trim()!=="")&&E.appendChild(C),Array.from(E.childNodes).some(h=>(h.textContent||"").trim()!=="")&&a.appendChild(E),a}function go(e){const t=document.createElement("article");t.classList.add("task-column"),t.dataset.column=e.id,t.draggable=!1,t.setAttribute("aria-labelledby",`column-title-${e.id}`);const o=e?.collapsed===!0;o&&t.classList.add("is-collapsed"),e?.color&&t.style.setProperty("--column-accent",e.color);const n=document.createElement("button");n.classList.add("column-collapse-btn"),n.type="button",n.setAttribute("aria-label",o?`Expand ${e.name} column`:`Collapse ${e.name} column`),n.title=o?"Expand column":"Collapse column";const a=document.createElement("span");a.dataset.lucide=o?"chevron-right":"chevrons-right-left",a.setAttribute("aria-hidden","true"),n.appendChild(a),n.addEventListener("click",L=>{L.stopPropagation(),dn(e.id)&&H()});const i=document.createElement("button");i.classList.add("column-drag-handle"),i.type="button",i.setAttribute("aria-label","Drag to reorder column");const s=document.createElement("span");s.dataset.lucide="grip-vertical",s.setAttribute("aria-hidden","true"),i.appendChild(s),i.title="Drag to reorder";const r=document.createElement("header");r.classList.add("column-header");const l=document.createElement("h2");if(l.id=`column-title-${e.id}`,o){const L=lo(e.id);l.textContent=`${e.name} (${L})`}else l.textContent=e.name;const c=document.createElement("span");c.classList.add("task-counter"),c.dataset.columnId=e.id,c.textContent="0",c.setAttribute("aria-label","Task count");const d=document.createElement("div");d.classList.add("column-actions");const p=document.createElement("button");p.classList.add("add-task-btn-icon"),p.type="button",p.setAttribute("aria-label",`Add task to ${e.name}`);const u=document.createElement("span");u.dataset.lucide="plus",u.setAttribute("aria-hidden","true"),p.appendChild(u),p.title="Add task",p.addEventListener("click",()=>On(e.id));const m=document.createElement("div");m.classList.add("column-menu-wrapper");const f=document.createElement("button");f.classList.add("column-menu-btn"),f.type="button",f.setAttribute("aria-haspopup","menu"),f.setAttribute("aria-expanded","false"),f.setAttribute("aria-label",`${e.name} column menu`);const g=document.createElement("span");g.dataset.lucide="ellipsis-vertical",g.setAttribute("aria-hidden","true"),f.appendChild(g),f.title="Column menu";const b=document.createElement("div");b.classList.add("column-menu","hidden"),b.setAttribute("role","menu");const y=document.createElement("button");y.classList.add("column-menu-item"),y.type="button",y.setAttribute("role","menuitem");const k=document.createElement("span");k.dataset.lucide="pencil",k.setAttribute("aria-hidden","true"),y.appendChild(k);const v=document.createTextNode(" Edit");y.appendChild(v),y.title="Edit column",y.addEventListener("click",L=>{L.stopPropagation(),X(),Fn(e.id)});const E=document.createElement("button");E.classList.add("column-menu-item","danger"),E.type="button",E.setAttribute("role","menuitem");const C=document.createElement("span");C.dataset.lucide="trash-2",C.setAttribute("aria-hidden","true"),E.appendChild(C);const ie=document.createTextNode(" Delete");E.appendChild(ie),E.title="Delete column",E.addEventListener("click",L=>{L.stopPropagation(),X(),(async()=>{if(e.id==="done"){await $({title:"Cannot Delete Column",message:"The Done column is permanent and cannot be deleted."});return}if(Z().length<=1){await $({title:"Cannot Delete Column",message:"Cannot delete the last column."});return}const rt=B().filter(Xt=>Xt.column===e.id),it=e?.name?`"${e.name}"`:"this column",Jt=rt.length>0?`Delete ${it}? This will also delete ${rt.length} task(s).`:`Delete ${it}?`;await Q({title:"Delete Column",message:Jt,confirmText:"Delete"})&&mn(e.id)&&H()})()});const V=document.createElement("div");V.classList.add("column-menu-submenu-wrapper");const h=document.createElement("button");h.classList.add("column-menu-item","has-submenu"),h.type="button",h.setAttribute("role","menuitem"),h.setAttribute("aria-haspopup","menu"),h.setAttribute("aria-expanded","false");const D=document.createElement("span");D.dataset.lucide="arrow-up-down",D.setAttribute("aria-hidden","true"),h.appendChild(D);const w=document.createTextNode(" Sort");h.appendChild(w);const A=document.createElement("span");A.dataset.lucide="chevron-left",A.classList.add("submenu-chevron"),A.setAttribute("aria-hidden","true"),h.appendChild(A),h.title="Sort tasks in column";const S=document.createElement("div");S.classList.add("column-submenu","hidden"),S.setAttribute("role","menu");const U=document.createElement("button");U.classList.add("column-menu-item"),U.type="button",U.setAttribute("role","menuitem"),U.textContent="By Due Date",U.title="Sort by due date (earliest first)",U.addEventListener("click",L=>{L.stopPropagation(),X(),bt(e.id,"dueDate")});const R=document.createElement("button");R.classList.add("column-menu-item"),R.type="button",R.setAttribute("role","menuitem"),R.textContent="By Priority",R.title="Sort by priority (urgent to none)",R.addEventListener("click",L=>{L.stopPropagation(),X(),bt(e.id,"priority")}),S.appendChild(U),S.appendChild(R),h.addEventListener("click",L=>{L.stopPropagation();const Ee=!S.classList.contains("hidden");S.classList.toggle("hidden"),h.setAttribute("aria-expanded",Ee?"false":"true")}),V.addEventListener("mouseenter",()=>{S.classList.remove("hidden"),h.setAttribute("aria-expanded","true")}),V.addEventListener("mouseleave",()=>{S.classList.add("hidden"),h.setAttribute("aria-expanded","false")}),V.appendChild(h),V.appendChild(S),b.appendChild(y),b.appendChild(V),b.appendChild(E),f.addEventListener("click",L=>{L.stopPropagation();const Ee=!b.classList.contains("hidden");X(),Ee?f.setAttribute("aria-expanded","false"):(b.classList.remove("hidden"),f.setAttribute("aria-expanded","true"))}),m.appendChild(f),m.appendChild(b),d.appendChild(p),d.appendChild(m),r.appendChild(n),r.appendChild(i),r.appendChild(l),r.appendChild(c),r.appendChild(d);const G=document.createElement("ul");return G.classList.add("tasks"),G.setAttribute("role","list"),G.setAttribute("aria-label",`Tasks in ${e.name}`),o&&(G.classList.add("hidden"),d.classList.add("hidden"),c.classList.add("hidden")),t.appendChild(r),t.appendChild(G),t}function bo(){const e=Z(),t=document.getElementById("task-column");t.innerHTML="",e.forEach(o=>{const n=document.createElement("option");n.value=o.id,n.textContent=o.name,t.appendChild(n)})}function ho(e){const t=e||B(),o=new Map(x().map(a=>[a.id,{name:(a.name||"").toString().trim().toLowerCase(),group:(a.group||"").toString().trim().toLowerCase()}])),n=(at||"").toString().trim().toLowerCase();document.querySelectorAll(".task-counter").forEach(a=>{const i=a.dataset.columnId;if(!i)return;const s=t.filter(r=>r.column!==i?!1:n?Vt(r,n,o):!0);a.textContent=s.length})}function yo(e){const t=e||B();document.querySelectorAll(".task-column.is-collapsed").forEach(o=>{const n=o.dataset.column,a=o.querySelector("h2");if(!n||!a)return;const i=t.filter(r=>r.column===n).length,s=a.textContent.replace(/\s*\(\d+\)$/,"");a.textContent=`${s} (${i})`})}function Eo(e,t,o){if(!e)return;const n=document.querySelector(`.task[data-task-id="${e}"]`);if(!n)return;const a=n.querySelector(".task-date");if(!a)return;const s=(o||B()).find(u=>u.id===e);if(!s)return;const r=typeof s.dueDate=="string"?s.dueDate.trim():"";if(!r)return;const l=T(),c=Gt(r,l?.locale),d=new Date;d.setHours(0,0,0,0);const p=xe(r,d);if(p!==null)if(a.classList.remove("countdown-urgent","countdown-warning","countdown-normal","countdown-none"),t==="done")a.textContent=`Due ${c}`,a.classList.add("countdown-none");else{const u=_t(p),m=l?.countdownUrgentThreshold??3,f=l?.countdownWarningThreshold??10,g=Mt(p,m,f);a.textContent=`Due ${c} (${u})`,a.classList.add(g)}}function H(){const e=Z(),t=B(),o=x(),n=T(),a=new Date;a.setHours(0,0,0,0);const i=new Map(o.map(p=>[p.id,p])),s=new Map(o.map(p=>[p.id,{name:(p.name||"").toString().trim().toLowerCase(),group:(p.group||"").toString().trim().toLowerCase()}])),r=(at||"").toString().trim().toLowerCase(),l=r?t.filter(p=>Vt(p,r,s)):t,c=document.getElementById("board-container");c.innerHTML="",[...e].sort((p,u)=>(p.order??0)-(u.order??0)).forEach(p=>{const u=go(p);c.appendChild(u);const m=u.querySelector(".tasks"),f=u.querySelector(".task-counter"),g=l.filter(v=>v.column===p.id).sort((v,E)=>(v.order??0)-(E.order??0)),y=p.id==="done"&&g.length>qt;if((y?g.slice(0,Ce):g).forEach(v=>{m.appendChild(fo(v,n,i,a))}),y&&Ce<g.length){const v=document.createElement("button");v.classList.add("show-more-btn"),v.type="button",v.textContent=`Show more (${g.length-Ce} remaining)`,v.addEventListener("click",()=>{Ce+=so,H()}),m.appendChild(v)}f.textContent=g.length}),Xn(),bo(),te(),me(),gt||(gt=!0,document.addEventListener("click",()=>X()),document.addEventListener("keydown",p=>{p.key==="Escape"&&X()}))}const z=Object.freeze(Object.defineProperty({__proto__:null,renderBoard:H,setBoardFilterQuery:Wt,syncCollapsedTitles:yo,syncMovedTaskDueDate:Eo,syncTaskCounters:ho},Symbol.toStringTag,{value:"Module"})),vo="Content Creation",Do=[{id:"ideas",name:"Ideas",color:"#a78bfa",order:1,collapsed:!1},{id:"draft",name:"Draft",color:"#60a5fa",order:2,collapsed:!1},{id:"editing",name:"Editing",color:"#f59e0b",order:3,collapsed:!1},{id:"ready",name:"Ready to Publish",color:"#34d399",order:4,collapsed:!1},{id:"done",name:"Published",color:"#374151",order:5,collapsed:!1}],wo=[{id:"b0a8bd7a-e9de-4b7b-9b6b-4c5899d05af0",title:"Blog: Getting started guide",description:"Outline the first-time user journey and include screenshots.",priority:"medium",dueDate:"2026-02-22",column:"draft",order:1,labels:["type-blog","topic-product"],creationDate:"2026-02-14T13:00:00.000Z",changeDate:"2026-02-14T13:00:00.000Z",columnHistory:[{column:"draft",at:"2026-02-14T13:00:00.000Z"}]},{id:"c9c2e45f-7b9c-44b2-8e23-4df18e0a6d3a",title:"Video: 2-minute feature tour",description:"Record a short walkthrough and add captions.",priority:"high",dueDate:"2026-02-20",column:"editing",order:1,labels:["type-video","channel-youtube"],creationDate:"2026-02-14T13:05:00.000Z",changeDate:"2026-02-14T13:05:00.000Z",columnHistory:[{column:"editing",at:"2026-02-14T13:05:00.000Z"}]},{id:"e9d4cbba-7f25-4f6d-b7b1-9a8ab0c971b1",title:"Social: Weekly tips thread",description:"Draft 5 short tips and create a simple graphic.",priority:"low",dueDate:"",column:"ideas",order:1,labels:["type-social","topic-product"],creationDate:"2026-02-14T13:10:00.000Z",changeDate:"2026-02-14T13:10:00.000Z",columnHistory:[{column:"ideas",at:"2026-02-14T13:10:00.000Z"}]},{id:"1b2e9f72-ccab-4e0d-8c6a-4b4d4a8d3a8c",title:"Newsletter: Monthly roundup",description:"Collect highlights, link to top posts, and add a short announcement.",priority:"medium",dueDate:"2026-02-28",column:"ready",order:1,labels:["type-newsletter","topic-community"],creationDate:"2026-02-14T13:15:00.000Z",changeDate:"2026-02-14T13:15:00.000Z",columnHistory:[{column:"ready",at:"2026-02-14T13:15:00.000Z"}]},{id:"7d0b7c21-9b61-4e0f-b34d-3a62e9a7c3d5",title:"Blog: Release notes post",description:"Summarize changes and include upgrade notes.",priority:"none",dueDate:"",column:"done",order:1,labels:["type-blog","topic-release"],creationDate:"2026-02-07T09:00:00.000Z",changeDate:"2026-02-07T09:00:00.000Z",doneDate:"2026-02-07T09:00:00.000Z",columnHistory:[{column:"done",at:"2026-02-07T09:00:00.000Z"}]}],Co=[{id:"type-blog",name:"Blog",color:"#3b82f6",group:"Type"},{id:"type-video",name:"Video",color:"#ef4444",group:"Type"},{id:"type-social",name:"Social",color:"#a78bfa",group:"Type"},{id:"type-newsletter",name:"Newsletter",color:"#22c55e",group:"Type"},{id:"channel-youtube",name:"YouTube",color:"#f59e0b",group:"Channel"},{id:"topic-product",name:"Product",color:"#06b6d4",group:"Topic"},{id:"topic-community",name:"Community",color:"#14b8a6",group:"Topic"},{id:"topic-release",name:"Release",color:"#64748b",group:"Topic"}],To={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},ko={boardName:vo,columns:Do,tasks:wo,labels:Co,settings:To},Lo="Creative / Vision",Bo=[{id:"ideas",name:"Ideas",color:"#a78bfa",order:1,collapsed:!1},{id:"in-focus",name:"In Focus",color:"#60a5fa",order:2,collapsed:!1},{id:"inprogress",name:"In Progress",color:"#f59e0b",order:3,collapsed:!1},{id:"done",name:"Achieved",color:"#374151",order:4,collapsed:!1}],Io=[{id:"b8a1d8e9-5f52-4b8b-90ad-9d4e7c3a9b9f",title:"Create a 30-day learning plan",description:"Pick one skill and define weekly milestones.",priority:"medium",dueDate:"",column:"in-focus",order:1,labels:["theme-learning"],creationDate:"2026-02-14T16:00:00.000Z",changeDate:"2026-02-14T16:00:00.000Z",columnHistory:[{column:"in-focus",at:"2026-02-14T16:00:00.000Z"}]},{id:"f5c9e9d2-8b2d-44f1-8c2e-7e8a4d7a3e2a",title:"Sketch travel photo book concept",description:"Collect 10 favorite photos and draft a simple layout.",priority:"low",dueDate:"",column:"ideas",order:1,labels:["theme-travel","theme-creativity"],creationDate:"2026-02-14T16:05:00.000Z",changeDate:"2026-02-14T16:05:00.000Z",columnHistory:[{column:"ideas",at:"2026-02-14T16:05:00.000Z"}]},{id:"3b0d8e7c-2a2b-4b7b-8f19-4d5e6c7a8b9c",title:"Daily wellness routine",description:"Build a simple morning routine: stretch, water, 10-minute walk.",priority:"medium",dueDate:"",column:"inprogress",order:1,labels:["theme-wellness"],creationDate:"2026-02-14T16:10:00.000Z",changeDate:"2026-02-14T16:10:00.000Z",columnHistory:[{column:"inprogress",at:"2026-02-14T16:10:00.000Z"}]},{id:"0a1b2c3d-4e5f-6789-aaaa-bbbbccccdddd",title:"Finish 12-week fitness goal",description:"Completed the plan and tracked progress weekly.",priority:"none",dueDate:"",column:"done",order:1,labels:["theme-wellness"],creationDate:"2026-01-10T08:00:00.000Z",changeDate:"2026-01-10T08:00:00.000Z",doneDate:"2026-01-10T08:00:00.000Z",columnHistory:[{column:"done",at:"2026-01-10T08:00:00.000Z"}]}],Ao=[{id:"theme-goals",name:"Goals",color:"#3b82f6",group:"Theme"},{id:"theme-future",name:"Future",color:"#a78bfa",group:"Theme"},{id:"theme-wellness",name:"Wellness",color:"#22c55e",group:"Theme"},{id:"theme-travel",name:"Travel",color:"#06b6d4",group:"Theme"},{id:"theme-creativity",name:"Creativity",color:"#f59e0b",group:"Theme"},{id:"theme-learning",name:"Learning",color:"#64748b",group:"Theme"}],xo={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},So={boardName:Lo,columns:Bo,tasks:Io,labels:Ao,settings:xo},Po="EisenhowerBoard",No=[{id:"inprogress",name:"In Progress",color:"#f59e0b",order:3},{id:"done",name:"Done",color:"#505050",order:4},{id:"backlog-cf0403d6",name:"ToDo Backlog",color:"#254d8e",order:2},{id:"waiting-for-3bca5c87",name:"Waiting-For On/Hold Blocked",color:"#f59e0b",order:1}],Zo=[],$o=[{id:"task",name:"Important+Urgent",color:"#ad0000"},{id:"important-55b27e09",name:"Important",color:"#ff5252"},{id:"urgent-0bba893b",name:"Urgent",color:"#af2c93"},{id:"delegate-b97e59d6",name:"Delegate",color:"#3b82f6"}],_o={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en-US",defaultPriority:"low"},Mo={boardName:Po,columns:No,tasks:Zo,labels:$o,settings:_o},Ho="Event Planning",Oo=[{id:"ideas",name:"Ideas",color:"#a78bfa",order:1,collapsed:!1},{id:"planning",name:"Planning",color:"#60a5fa",order:2,collapsed:!1},{id:"booked",name:"Booked",color:"#34d399",order:3,collapsed:!1},{id:"ready",name:"Ready",color:"#f59e0b",order:4,collapsed:!1},{id:"done",name:"Event Done",color:"#505050",order:5,collapsed:!1}],Ro=[{id:"f1a2b3c4-d5e6-47f8-9a0b-1c2d3e4f5a6b",title:"Draft guest list",description:"Collect names, emails, and dietary preferences.",priority:"medium",dueDate:"2026-02-18",column:"planning",order:1,labels:["area-invitations"],creationDate:"2026-02-14T17:00:00.000Z",changeDate:"2026-02-14T17:00:00.000Z",columnHistory:[{column:"planning",at:"2026-02-14T17:00:00.000Z"}]},{id:"a7b8c9d0-e1f2-43a4-b5c6-d7e8f9a0b1c2",title:"Confirm venue options",description:"Get 2 quotes and compare availability.",priority:"high",dueDate:"2026-02-16",column:"ideas",order:1,labels:["area-venue","area-budget"],creationDate:"2026-02-14T17:05:00.000Z",changeDate:"2026-02-14T17:05:00.000Z",columnHistory:[{column:"ideas",at:"2026-02-14T17:05:00.000Z"}]},{id:"c2b1a0f9-e8d7-46c5-b4a3-2f1e0d9c8b7a",title:"Book caterer",description:"Finalize menu and confirm staffing.",priority:"high",dueDate:"2026-02-22",column:"booked",order:1,labels:["area-catering"],creationDate:"2026-02-14T17:10:00.000Z",changeDate:"2026-02-14T17:10:00.000Z",columnHistory:[{column:"booked",at:"2026-02-14T17:10:00.000Z"}]},{id:"0d9c8b7a-6f5e-4d3c-b2a1-0f9e8d7c6b5a",title:"Print signage and agenda",description:"Print 20 copies, check spelling, and pack supplies.",priority:"medium",dueDate:"",column:"ready",order:1,labels:["area-schedule"],creationDate:"2026-02-14T17:15:00.000Z",changeDate:"2026-02-14T17:15:00.000Z",columnHistory:[{column:"ready",at:"2026-02-14T17:15:00.000Z"}]}],Fo=[{id:"area-venue",name:"Venue",color:"#3b82f6",group:"Area"},{id:"area-catering",name:"Catering",color:"#22c55e",group:"Area"},{id:"area-invitations",name:"Invitations",color:"#a78bfa",group:"Area"},{id:"area-schedule",name:"Schedule",color:"#f59e0b",group:"Area"},{id:"area-budget",name:"Budget",color:"#14b8a6",group:"Area"}],zo={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},Uo={boardName:Ho,columns:Oo,tasks:Ro,labels:Fo,settings:zo},jo="GettingThingsDone",qo=[{id:"todo",name:"Inbox",color:"#3b82f6",order:4},{id:"inprogress",name:"Doing",color:"#f5e10a",order:7},{id:"done",name:"Done",color:"#505050",order:8},{id:"waiting-for-f9b5d4b8",name:"Waiting-For",color:"#f9dea4",order:6},{id:"someday-a3bcd4d1",name:"Someday/Maybe",color:"#3b82f6",order:1},{id:"later-105a82af",name:"Projects",color:"#008f37",order:2},{id:"ready-fbe43e9e",name:"Next Actions",color:"#83dd92",order:5}],Wo=[],Vo=[{id:"urgent",name:"Urgent",color:"#ef4444"},{id:"task",name:"Task",color:"#f59e0b"},{id:"tomorrow-80787459",name:"tomorrow",color:"#3bbff7"},{id:"today-79afb42f",name:"today",color:"#289a92"},{id:"someday-fc14473d",name:"someday",color:"#575757"},{id:"maybe-6fea5f21",name:"maybe",color:"#ecb7f0"},{id:"organize-0b7e5660",name:"organize",color:"#2eb280"},{id:"reflect-b4eec4b6",name:"reflect",color:"#32863b"},{id:"next-2e7bc199",name:"next",color:"#3bc8f7"},{id:"project-4010f43a",name:"project",color:"#513bf7"}],Go={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en-US",defaultPriority:"low"},Yo={boardName:jo,columns:qo,tasks:Wo,labels:Vo,settings:Go},Jo="Marketing Campaign",Xo=[{id:"campaign-ideas",name:"Campaign Ideas",color:"#a78bfa",order:1,collapsed:!1},{id:"planning",name:"Planning",color:"#60a5fa",order:2,collapsed:!1},{id:"production",name:"In Production",color:"#f59e0b",order:3,collapsed:!1},{id:"scheduled",name:"Scheduled",color:"#34d399",order:4,collapsed:!1},{id:"live",name:"Live",color:"#22c55e",order:5,collapsed:!1},{id:"review",name:"Performance Review",color:"#fb7185",order:6,collapsed:!1},{id:"done",name:"Completed",color:"#505050",order:7,collapsed:!1}],Ko=[{id:"b9a6a5cc-3af0-4e13-bc33-58f2bcb7bfdf",title:"Spring promo campaign concept",description:"Define offer, audience, and success metrics.",priority:"medium",dueDate:"",column:"campaign-ideas",order:1,labels:["channel-email","audience-smb"],creationDate:"2026-02-14T14:00:00.000Z",changeDate:"2026-02-14T14:00:00.000Z",columnHistory:[{column:"campaign-ideas",at:"2026-02-14T14:00:00.000Z"}]},{id:"d7a0f08f-9f4f-4a3b-9b38-6b0d6c9d0d68",title:"Landing page copy + wireframe",description:"Draft headline/CTA, map sections, and confirm tracking events.",priority:"high",dueDate:"2026-02-19",column:"planning",order:1,labels:["asset-landing-page","asset-ad-copy"],creationDate:"2026-02-14T14:05:00.000Z",changeDate:"2026-02-14T14:05:00.000Z",columnHistory:[{column:"planning",at:"2026-02-14T14:05:00.000Z"}]},{id:"2de2e9d9-12d9-4a9f-9ab4-1f5a2a1ef0ef",title:"Creative set: paid social",description:"Design 3 variations and export platform sizes.",priority:"medium",dueDate:"2026-02-21",column:"production",order:1,labels:["channel-paid-social","asset-design"],creationDate:"2026-02-14T14:10:00.000Z",changeDate:"2026-02-14T14:10:00.000Z",columnHistory:[{column:"production",at:"2026-02-14T14:10:00.000Z"}]},{id:"8b0f4c6f-0d3a-4cb2-9f07-4b5d9f13a5da",title:"Schedule email blast",description:"Finalize segment and set send time; verify UTM parameters.",priority:"medium",dueDate:"2026-02-23",column:"scheduled",order:1,labels:["channel-email","audience-smb"],creationDate:"2026-02-14T14:15:00.000Z",changeDate:"2026-02-14T14:15:00.000Z",columnHistory:[{column:"scheduled",at:"2026-02-14T14:15:00.000Z"}]},{id:"9f4c9c46-fb6a-4a9f-b3a3-0d38a6c7a6c8",title:"Monitor spend + CTR daily",description:"Pause underperforming ads; reallocate budget to winners.",priority:"high",dueDate:"",column:"live",order:1,labels:["channel-paid-search","channel-paid-social"],creationDate:"2026-02-14T14:20:00.000Z",changeDate:"2026-02-14T14:20:00.000Z",columnHistory:[{column:"live",at:"2026-02-14T14:20:00.000Z"}]},{id:"4a7d5b0c-3b71-4f50-8f37-5ee7a277c9a2",title:"Post-campaign performance review",description:"Summarize results and list 3 improvements for next cycle.",priority:"low",dueDate:"",column:"review",order:1,labels:["asset-reporting","audience-smb"],creationDate:"2026-02-10T09:00:00.000Z",changeDate:"2026-02-10T09:00:00.000Z",columnHistory:[{column:"review",at:"2026-02-10T09:00:00.000Z"}]}],Qo=[{id:"channel-email",name:"Email",color:"#22c55e",group:"Channel"},{id:"channel-paid-search",name:"Paid Search",color:"#3b82f6",group:"Channel"},{id:"channel-paid-social",name:"Paid Social",color:"#a78bfa",group:"Channel"},{id:"asset-ad-copy",name:"Ad Copy",color:"#f59e0b",group:"Asset"},{id:"asset-design",name:"Design",color:"#06b6d4",group:"Asset"},{id:"asset-landing-page",name:"Landing Page",color:"#14b8a6",group:"Asset"},{id:"asset-reporting",name:"Reporting",color:"#64748b",group:"Asset"},{id:"audience-smb",name:"SMB",color:"#fb7185",group:"Audience"},{id:"audience-enterprise",name:"Enterprise",color:"#ef4444",group:"Audience"}],ea={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},ta={boardName:Jo,columns:Xo,tasks:Ko,labels:Qo,settings:ea},na="Personal Life",oa=[{id:"ideas",name:"Ideas",color:"#a78bfa",order:1,collapsed:!1},{id:"todo",name:"To Do",color:"#3b82f6",order:2,collapsed:!1},{id:"this-week",name:"This Week",color:"#f59e0b",order:3,collapsed:!1},{id:"done",name:"Done",color:"#505050",order:4,collapsed:!1}],aa=[{id:"b8cfd8d6-73b1-4b3d-9a31-6310f0b0e6c6",title:"Plan weekend hike route",description:"Pick a trail, check weather, and share the plan.",priority:"low",dueDate:"",column:"ideas",order:1,labels:["context-leisure","area-health"],creationDate:"2026-02-14T10:00:00.000Z",changeDate:"2026-02-14T10:00:00.000Z",columnHistory:[{column:"ideas",at:"2026-02-14T10:00:00.000Z"}]},{id:"53a0c995-72b2-4c69-8c2f-7d1d5b5a2d70",title:"Book dentist appointment",description:"Call the office and schedule a checkup.",priority:"medium",dueDate:"2026-02-20",column:"todo",order:1,labels:["area-health","activity-call"],creationDate:"2026-02-14T10:05:00.000Z",changeDate:"2026-02-14T10:05:00.000Z",columnHistory:[{column:"todo",at:"2026-02-14T10:05:00.000Z"}]},{id:"5e2d6f8c-9e29-4c0c-9b7d-6d6b2d60b1fd",title:"Grocery run",description:"Milk, eggs, vegetables, coffee.",priority:"high",dueDate:"2026-02-15",column:"this-week",order:1,labels:["area-groceries","context-home"],creationDate:"2026-02-14T10:10:00.000Z",changeDate:"2026-02-14T10:10:00.000Z",columnHistory:[{column:"this-week",at:"2026-02-14T10:10:00.000Z"}]},{id:"8dfb4b2a-0dc8-44f6-a43b-ec56b4a46a93",title:"Pay electricity bill",description:"Pay online and file receipt.",priority:"medium",dueDate:"2026-02-16",column:"this-week",order:2,labels:["area-finance","context-home"],creationDate:"2026-02-14T10:12:00.000Z",changeDate:"2026-02-14T10:12:00.000Z",columnHistory:[{column:"this-week",at:"2026-02-14T10:12:00.000Z"}]},{id:"2df1c20f-3bb5-49d6-a5b7-01e38a6d3c63",title:"Organize pantry shelf",description:"Group items, toss expired goods, add missing staples to list.",priority:"none",dueDate:"",column:"done",order:1,labels:["area-home","context-home"],creationDate:"2026-02-10T18:00:00.000Z",changeDate:"2026-02-10T18:00:00.000Z",doneDate:"2026-02-10T18:00:00.000Z",columnHistory:[{column:"done",at:"2026-02-10T18:00:00.000Z"}]}],ra=[{id:"context-home",name:"Home",color:"#3b82f6",group:"Context"},{id:"context-leisure",name:"Leisure",color:"#a78bfa",group:"Context"},{id:"area-groceries",name:"Groceries",color:"#22c55e",group:"Area"},{id:"area-home",name:"Home",color:"#f59e0b",group:"Area"},{id:"area-health",name:"Health",color:"#ef4444",group:"Area"},{id:"area-finance",name:"Finance",color:"#14b8a6",group:"Area"},{id:"activity-call",name:"Call",color:"#64748b",group:"Activity"}],ia={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},sa={boardName:na,columns:oa,tasks:aa,labels:ra,settings:ia},la=[{id:"todo",name:"ToDo Today",color:"#3b82f6",order:4},{id:"inprogress",name:"In Progress",color:"#ffff00",order:5},{id:"done",name:"Done",color:"#505050",order:6},{id:"waiting-for-8ca934a0",name:"Waiting For",color:"#482bff",order:3},{id:"backlog-e129fcb8",name:"Backlog",color:"#3b82f6",order:2},{id:"top-prio-34f9a9c9",name:"Top Priority",color:"#ff00ff",order:1}],ca=[{id:"90f293fe-2399-4795-9679-91cde53f1954",title:"Collect Time Stone from Dr. Strange",description:"",priority:"medium",dueDate:"",column:"verified",order:1,creationDate:"2026-01-06T14:38:28.093Z",labels:["feature"]},{id:"7eddf557-f6c5-4240-8c58-5627cf13c3f1",title:"Collect Mind Stone from Vision",description:"",priority:"medium",dueDate:"",column:"verified",order:1,creationDate:"2026-01-06T14:38:28.093Z",labels:[]},{id:"1f1aa89b-b37d-4e5e-bee5-f8a77cf9efe4",title:"Collect Reality Stone from the Collector",description:"",priority:"medium",dueDate:"",column:"verified",order:1,creationDate:"2026-01-06T14:38:28.093Z",labels:["bug"]}],da=[{id:"urgent",name:"Urgent",color:"#ef4444"},{id:"important",name:"Important",color:"#f73bce"},{id:"task",name:"Task",color:"#f59e0b"},{id:"featuret-237acf3a",name:"Feature",color:"#733bf7"},{id:"personal-c74c3b0f",name:"personal",color:"#ffb300"}],ua={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en-US",defaultPriority:"low"},ma={columns:la,tasks:ca,labels:da,settings:ua},pa="Product Development",fa=[{id:"idea-backlog",name:"Idea Backlog",color:"#a78bfa",order:1,collapsed:!1},{id:"planned",name:"Planned",color:"#60a5fa",order:2,collapsed:!1},{id:"in-development",name:"In Development",color:"#f59e0b",order:3,collapsed:!1},{id:"testing",name:"Testing",color:"#fb7185",order:4,collapsed:!1},{id:"ready-release",name:"Ready for Release",color:"#34d399",order:5,collapsed:!1},{id:"done",name:"Shipped",color:"#505050",order:6,collapsed:!1}],ga=[{id:"d0a6a8d2-74f2-4f38-9b7d-0f06c24c5216",title:"Feature: Board export improvements",description:"Add stronger normalization and keep backward compatibility.",priority:"high",dueDate:"",column:"in-development",order:1,labels:["type-feature","area-devops"],creationDate:"2026-02-14T18:00:00.000Z",changeDate:"2026-02-14T18:00:00.000Z",columnHistory:[{column:"in-development",at:"2026-02-14T18:00:00.000Z"}]},{id:"7d2f0a16-7c6a-4a68-b8dc-3c7dfb5fb4d5",title:"Bug: Task due date parsing",description:"Ensure ISO timestamps normalize to YYYY-MM-DD.",priority:"medium",dueDate:"2026-02-19",column:"testing",order:1,labels:["type-bug","area-frontend"],creationDate:"2026-02-14T18:05:00.000Z",changeDate:"2026-02-14T18:05:00.000Z",columnHistory:[{column:"testing",at:"2026-02-14T18:05:00.000Z"}]},{id:"b8c0c151-548d-4b48-9ef2-0a44b7fe7c8a",title:"Tech debt: Reduce render thrash",description:"Batch DOM updates when rendering many tasks.",priority:"low",dueDate:"",column:"planned",order:1,labels:["type-tech-debt","area-frontend"],creationDate:"2026-02-14T18:10:00.000Z",changeDate:"2026-02-14T18:10:00.000Z",columnHistory:[{column:"planned",at:"2026-02-14T18:10:00.000Z"}]},{id:"8b1a2a52-ff0b-4df8-a9a7-5e03e8866d02",title:"UX: Improve modal keyboard flow",description:"Ensure focus trapping and better Escape/backdrop behavior.",priority:"medium",dueDate:"",column:"ready-release",order:1,labels:["type-ux","area-frontend"],creationDate:"2026-02-14T18:15:00.000Z",changeDate:"2026-02-14T18:15:00.000Z",columnHistory:[{column:"ready-release",at:"2026-02-14T18:15:00.000Z"}]},{id:"16b9fe0b-6f2a-45f2-a89c-8f9d4e8c7b6a",title:"Release: vNext patch",description:"Build, update changelog, tag release.",priority:"none",dueDate:"",column:"done",order:1,labels:["type-release"],creationDate:"2026-02-01T10:00:00.000Z",changeDate:"2026-02-01T10:00:00.000Z",doneDate:"2026-02-01T10:00:00.000Z",columnHistory:[{column:"done",at:"2026-02-01T10:00:00.000Z"}]}],ba=[{id:"type-feature",name:"Feature",color:"#3b82f6",group:"Type"},{id:"type-bug",name:"Bug",color:"#ef4444",group:"Type"},{id:"type-tech-debt",name:"Tech Debt",color:"#f59e0b",group:"Type"},{id:"type-ux",name:"UX",color:"#a78bfa",group:"Type"},{id:"type-devops",name:"DevOps",color:"#64748b",group:"Type"},{id:"type-security",name:"Security",color:"#06b6d4",group:"Type"},{id:"type-release",name:"Release",color:"#22c55e",group:"Type"},{id:"area-frontend",name:"Frontend",color:"#60a5fa",group:"Area"},{id:"area-devops",name:"DevOps",color:"#14b8a6",group:"Area"}],ha={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},ya={boardName:pa,columns:fa,tasks:ga,labels:ba,settings:ha},Ea="Project Management",va=[{id:"backlog",name:"Backlog",color:"#64748b",order:1,collapsed:!1},{id:"todo",name:"To Do",color:"#3b82f6",order:2,collapsed:!1},{id:"inprogress",name:"In Progress",color:"#f59e0b",order:3,collapsed:!1},{id:"review",name:"Review",color:"#8b5cf6",order:4,collapsed:!1},{id:"done",name:"Done",color:"#505050",order:5,collapsed:!1}],Da=[{id:"b5c0c4a3-877f-4e0b-9f61-4c2b5fb01f10",title:"Triage incoming bug reports",description:"Review new issues, reproduce key bugs, and add labels for type/area.",priority:"medium",dueDate:"2026-02-18",column:"backlog",order:1,labels:["type-bug","area-backend"],creationDate:"2026-02-14T09:00:00.000Z",changeDate:"2026-02-14T09:00:00.000Z",columnHistory:[{column:"backlog",at:"2026-02-14T09:00:00.000Z"}]},{id:"c0f1f8e8-1c0b-4bc1-9b14-0d4ac3e9a0c1",title:"Implement CSV export for reports",description:"Add an export button and generate a CSV from the current report data.",priority:"high",dueDate:"2026-02-21",column:"todo",order:1,labels:["type-feature","area-frontend"],creationDate:"2026-02-14T09:05:00.000Z",changeDate:"2026-02-14T09:05:00.000Z",columnHistory:[{column:"todo",at:"2026-02-14T09:05:00.000Z"}]},{id:"d8d3b2fb-2f3d-4901-8e40-9a2f36d8232f",title:"Refactor drag/drop reordering performance",description:"Profile reorder on mobile; reduce DOM queries in the drop handler.",priority:"medium",dueDate:"",column:"inprogress",order:1,labels:["type-tech-debt","area-frontend"],creationDate:"2026-02-14T09:10:00.000Z",changeDate:"2026-02-14T09:10:00.000Z",columnHistory:[{column:"inprogress",at:"2026-02-14T09:10:00.000Z"}]},{id:"20fb57b7-7256-46c2-b4f2-7b8a8f8d5a39",title:"Write help page for importing boards",description:"Document import behavior and how legacy fields are handled.",priority:"low",dueDate:"2026-02-25",column:"review",order:1,labels:["type-docs","area-docs"],creationDate:"2026-02-14T09:15:00.000Z",changeDate:"2026-02-14T09:15:00.000Z",columnHistory:[{column:"review",at:"2026-02-14T09:15:00.000Z"}]},{id:"e9a3b6ab-2f0e-4d85-8d32-3cbd1ab0c9b0",title:"Release vNext patch",description:"Run build, update changelog, tag the release.",priority:"none",dueDate:"",column:"done",order:1,labels:["type-process"],creationDate:"2026-02-12T16:30:00.000Z",changeDate:"2026-02-12T16:30:00.000Z",doneDate:"2026-02-12T16:30:00.000Z",columnHistory:[{column:"done",at:"2026-02-12T16:30:00.000Z"}]}],wa=[{id:"type-bug",name:"Bug",color:"#ef4444",group:"Type"},{id:"type-feature",name:"Feature",color:"#3b82f6",group:"Type"},{id:"type-enhancement",name:"Enhancement",color:"#06b6d4",group:"Type"},{id:"type-research",name:"Research",color:"#a855f7",group:"Type"},{id:"type-tech-debt",name:"Tech Debt",color:"#f59e0b",group:"Type"},{id:"type-docs",name:"Docs",color:"#22c55e",group:"Type"},{id:"type-process",name:"Process",color:"#64748b",group:"Type"},{id:"area-frontend",name:"Frontend",color:"#0ea5e9",group:"Area"},{id:"area-backend",name:"Backend",color:"#14b8a6",group:"Area"},{id:"area-docs",name:"Docs",color:"#84cc16",group:"Area"}],Ca={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},Ta={boardName:Ea,columns:va,tasks:Da,labels:wa,settings:Ca},ka="Sales Pipeline",La=[{id:"leads",name:"New Leads",color:"#38bdf8",order:1,collapsed:!1},{id:"contacted",name:"Contacted",color:"#60a5fa",order:2,collapsed:!1},{id:"qualified",name:"Qualified",color:"#34d399",order:3,collapsed:!1},{id:"proposal-sent",name:"Proposal Sent",color:"#818cf8",order:4,collapsed:!1},{id:"negotiation",name:"Negotiation",color:"#f59e0b",order:5,collapsed:!1},{id:"closed-lost",name:"Closed Lost",color:"#fb7185",order:6,collapsed:!1},{id:"done",name:"Closed Won",color:"#505050",order:7,collapsed:!1}],Ba=[{id:"e1a76b2b-4f6c-4b95-bd6c-9f1ddc4a31a1",title:"Acme Co â€” Intro email",description:"Inbound request from website. Send intro and schedule discovery call.",priority:"high",dueDate:"2026-02-17",column:"leads",order:1,labels:["source-inbound","industry-saas","region-na","activity-email"],creationDate:"2026-02-14T12:00:00.000Z",changeDate:"2026-02-14T12:00:00.000Z",columnHistory:[{column:"leads",at:"2026-02-14T12:00:00.000Z"}]},{id:"c0a4c4e9-5b92-4e36-97a6-6d0ec6a1b03d",title:"Northwind â€” Discovery call",description:"Confirm pain points and timeline; capture stakeholders and decision process.",priority:"medium",dueDate:"2026-02-18",column:"contacted",order:1,labels:["source-outbound","industry-finance","region-eu","activity-call"],creationDate:"2026-02-14T12:05:00.000Z",changeDate:"2026-02-14T12:05:00.000Z",columnHistory:[{column:"contacted",at:"2026-02-14T12:05:00.000Z"}]},{id:"4c7f2d5c-3d29-4d73-8b8c-bd2db7f8c8d7",title:"Globex â€” Qualification checklist",description:"Budget confirmed; verify security requirements and procurement steps.",priority:"medium",dueDate:"",column:"qualified",order:1,labels:["source-partner","industry-saas","region-na","deal-size-mid"],creationDate:"2026-02-14T12:10:00.000Z",changeDate:"2026-02-14T12:10:00.000Z",columnHistory:[{column:"qualified",at:"2026-02-14T12:10:00.000Z"}]},{id:"f3d9fdd7-6b1f-4f79-88e8-5d0f6d5bdb2d",title:"Initech â€” Proposal v2",description:"Revise pricing and deliverables based on feedback; resend PDF.",priority:"high",dueDate:"2026-02-16",column:"proposal-sent",order:1,labels:["industry-manufacturing","region-na","activity-follow-up"],creationDate:"2026-02-14T12:15:00.000Z",changeDate:"2026-02-14T12:15:00.000Z",columnHistory:[{column:"proposal-sent",at:"2026-02-14T12:15:00.000Z"}]},{id:"c3b43ea3-07bb-4bdf-84b4-278e2dcb84b7",title:"Umbrella Corp â€” Final negotiation",description:"Work through legal redlines and confirm go-live date.",priority:"high",dueDate:"",column:"negotiation",order:1,labels:["industry-healthcare","region-na","deal-size-enterprise","activity-meeting"],creationDate:"2026-02-14T12:20:00.000Z",changeDate:"2026-02-14T12:20:00.000Z",columnHistory:[{column:"negotiation",at:"2026-02-14T12:20:00.000Z"}]},{id:"86cde0b0-fb83-4e24-ae0a-6a46b9cfb7ce",title:"Contoso â€” Not a fit",description:"Requirements misaligned. Send polite close-out note and log reason.",priority:"none",dueDate:"",column:"closed-lost",order:1,labels:["source-inbound","region-eu"],creationDate:"2026-02-11T09:30:00.000Z",changeDate:"2026-02-11T09:30:00.000Z",columnHistory:[{column:"closed-lost",at:"2026-02-11T09:30:00.000Z"}]},{id:"3b13e2f5-df2e-4867-99ed-2a3918e1e289",title:"Fabrikam â€” Signed agreement",description:"Contract signed. Handoff to onboarding and schedule kickoff.",priority:"none",dueDate:"",column:"done",order:1,labels:["source-partner","region-na","deal-size-mid"],creationDate:"2026-02-08T15:00:00.000Z",changeDate:"2026-02-08T15:00:00.000Z",doneDate:"2026-02-08T15:00:00.000Z",columnHistory:[{column:"done",at:"2026-02-08T15:00:00.000Z"}]}],Ia=[{id:"source-inbound",name:"Inbound",color:"#22c55e",group:"Source"},{id:"source-outbound",name:"Outbound",color:"#3b82f6",group:"Source"},{id:"source-partner",name:"Partner",color:"#8b5cf6",group:"Source"},{id:"industry-saas",name:"SaaS",color:"#06b6d4",group:"Industry"},{id:"industry-finance",name:"Finance",color:"#14b8a6",group:"Industry"},{id:"industry-healthcare",name:"Healthcare",color:"#f97316",group:"Industry"},{id:"industry-manufacturing",name:"Manufacturing",color:"#64748b",group:"Industry"},{id:"region-na",name:"North America",color:"#60a5fa",group:"Region"},{id:"region-eu",name:"Europe",color:"#a78bfa",group:"Region"},{id:"deal-size-mid",name:"Mid-Market",color:"#f59e0b",group:"Deal Size"},{id:"deal-size-enterprise",name:"Enterprise",color:"#ef4444",group:"Deal Size"},{id:"activity-email",name:"Email",color:"#84cc16",group:"Activity"},{id:"activity-call",name:"Call",color:"#10b981",group:"Activity"},{id:"activity-meeting",name:"Meeting",color:"#f59e0b",group:"Activity"},{id:"activity-follow-up",name:"Follow Up",color:"#fb7185",group:"Activity"}],Aa={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},xa={boardName:ka,columns:La,tasks:Ba,labels:Ia,settings:Aa},Sa="Startup / Business Operations",Pa=[{id:"idea-backlog",name:"Idea Backlog",color:"#a78bfa",order:1,collapsed:!1},{id:"backlog",name:"Backlog",color:"#00ff33",order:2,collapsed:!1},{id:"inprogress",name:"In Progress",color:"#f59e0b",order:3,collapsed:!1},{id:"waiting-external",name:"Waiting / External",color:"#fb7185",order:4,collapsed:!1},{id:"done",name:"Completed",color:"#505050",order:5,collapsed:!1}],Na=[{id:"c8e7c3f1-8df0-4c8e-ae27-2b9dfc70d02a",title:"Create quarterly budget forecast",description:"Draft forecast, include assumptions, and share with founders.",priority:"high",dueDate:"2026-02-20",column:"backlog",order:1,labels:["area-finance","activity-writing"],creationDate:"2026-02-14T15:00:00.000Z",changeDate:"2026-02-14T15:00:00.000Z",columnHistory:[{column:"backlog",at:"2026-02-14T15:00:00.000Z"}]},{id:"bff08ae2-02b7-4b06-9fb3-74c31bc0bb2e",title:"Review new vendor contract",description:"Check terms, renewal, and data-processing clauses.",priority:"medium",dueDate:"2026-02-19",column:"inprogress",order:1,labels:["area-legal","activity-review"],creationDate:"2026-02-14T15:05:00.000Z",changeDate:"2026-02-14T15:05:00.000Z",columnHistory:[{column:"inprogress",at:"2026-02-14T15:05:00.000Z"}]},{id:"c4d2f6c5-99d6-4e12-9773-26e3c8f2e1cc",title:"Set up recurring invoice reminders",description:"Automate reminders and add a simple checklist for month-end close.",priority:"medium",dueDate:"",column:"waiting-external",order:1,labels:["area-invoices","activity-follow-up"],creationDate:"2026-02-14T15:10:00.000Z",changeDate:"2026-02-14T15:10:00.000Z",columnHistory:[{column:"waiting-external",at:"2026-02-14T15:10:00.000Z"}]},{id:"1a8a6b4f-7a18-4c01-8f19-6d5b5fa7a4e2",title:"Improve onboarding checklist",description:"Draft a lightweight onboarding doc for the next hire.",priority:"low",dueDate:"",column:"idea-backlog",order:1,labels:["area-hr","activity-writing"],creationDate:"2026-02-14T15:12:00.000Z",changeDate:"2026-02-14T15:12:00.000Z",columnHistory:[{column:"idea-backlog",at:"2026-02-14T15:12:00.000Z"}]},{id:"c2c7f7e9-2c27-47c2-9b33-76f65fd5ff04",title:"Close January books",description:"Reconcile accounts and file receipts.",priority:"none",dueDate:"",column:"done",order:1,labels:["area-finance","area-invoices"],creationDate:"2026-02-05T17:00:00.000Z",changeDate:"2026-02-05T17:00:00.000Z",doneDate:"2026-02-05T17:00:00.000Z",columnHistory:[{column:"done",at:"2026-02-05T17:00:00.000Z"}]}],Za=[{id:"area-finance",name:"Finance",color:"#14b8a6",group:"Area"},{id:"area-legal",name:"Legal",color:"#8b5cf6",group:"Area"},{id:"area-hr",name:"HR",color:"#f59e0b",group:"Area"},{id:"area-invoices",name:"Invoices",color:"#3b82f6",group:"Area"},{id:"area-strategy",name:"Strategy",color:"#64748b",group:"Area"},{id:"activity-writing",name:"Writing",color:"#22c55e",group:"Activity"},{id:"activity-review",name:"Review",color:"#06b6d4",group:"Activity"},{id:"activity-follow-up",name:"Follow Up",color:"#fb7185",group:"Activity"}],$a={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},_a={boardName:Sa,columns:Pa,tasks:Na,labels:Za,settings:$a},Ma="Student",Ha=[{id:"upcoming",name:"Upcoming",color:"#06b6d4",order:1,collapsed:!1},{id:"in-study",name:"In Study",color:"#f59e0b",order:2,collapsed:!1},{id:"ready-submission",name:"Ready for Submission",color:"#8b5cf6",order:3,collapsed:!1},{id:"submitted",name:"Submitted",color:"#3b82f6",order:4,collapsed:!1},{id:"done",name:"Done",color:"#505050",order:5,collapsed:!1}],Oa=[{id:"2d1ef15c-0d8c-4d2d-9c64-7d942790d9b6",title:"Read Chapter 6: Graphs",description:"Focus on BFS/DFS and practice problems.",priority:"medium",dueDate:"2026-02-17",column:"upcoming",order:1,labels:["course-cs201","type-reading"],creationDate:"2026-02-14T11:00:00.000Z",changeDate:"2026-02-14T11:00:00.000Z",columnHistory:[{column:"upcoming",at:"2026-02-14T11:00:00.000Z"}]},{id:"9f73f9fe-7f4a-4b21-a5bb-bb2c1c5a5c48",title:"Homework 3: Algorithm analysis",description:"Write up solutions; include time complexity justifications.",priority:"high",dueDate:"2026-02-19",column:"in-study",order:1,labels:["course-cs201","type-homework"],creationDate:"2026-02-14T11:05:00.000Z",changeDate:"2026-02-14T11:05:00.000Z",columnHistory:[{column:"in-study",at:"2026-02-14T11:05:00.000Z"}]},{id:"c08456b8-9e7c-4f65-83a9-6ef0a64b7d2d",title:"Lab report draft",description:"Finalize charts and verify citations.",priority:"medium",dueDate:"2026-02-18",column:"ready-submission",order:1,labels:["course-chem110","type-writing"],creationDate:"2026-02-14T11:10:00.000Z",changeDate:"2026-02-14T11:10:00.000Z",columnHistory:[{column:"ready-submission",at:"2026-02-14T11:10:00.000Z"}]},{id:"a1d7e6c8-fffd-4c78-9f30-40b24ed38f5b",title:"Submit Essay: Modern ethics",description:"Upload PDF and verify submission receipt.",priority:"none",dueDate:"",column:"submitted",order:1,labels:["course-phil105","type-writing"],creationDate:"2026-02-13T20:00:00.000Z",changeDate:"2026-02-13T20:00:00.000Z",columnHistory:[{column:"submitted",at:"2026-02-13T20:00:00.000Z"}]},{id:"0f9f1266-5c3d-4746-9b60-24891f4a9449",title:"Midterm study plan",description:"Create a 5-day review plan with practice sets.",priority:"low",dueDate:"",column:"done",order:1,labels:["course-cs201","type-planning"],creationDate:"2026-02-09T14:30:00.000Z",changeDate:"2026-02-09T14:30:00.000Z",doneDate:"2026-02-09T14:30:00.000Z",columnHistory:[{column:"done",at:"2026-02-09T14:30:00.000Z"}]}],Ra=[{id:"course-cs201",name:"CS 201",color:"#3b82f6",group:"Course"},{id:"course-chem110",name:"CHEM 110",color:"#06b6d4",group:"Course"},{id:"course-phil105",name:"PHIL 105",color:"#a78bfa",group:"Course"},{id:"type-homework",name:"Homework",color:"#f59e0b",group:"Type"},{id:"type-reading",name:"Reading",color:"#22c55e",group:"Type"},{id:"type-writing",name:"Writing",color:"#ef4444",group:"Type"},{id:"type-planning",name:"Planning",color:"#64748b",group:"Type"}],Fa={showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!0,locale:"en",defaultPriority:"none",notificationDays:3},za={boardName:Ma,columns:Ha,tasks:Oa,labels:Ra,settings:Fa},Ua=Object.assign({"../templates/Content-Creation-Board-Template.json":ko,"../templates/Creative-Vision-Board-Template.json":So,"../templates/Eisenhower-Method-Board-Template.json":Mo,"../templates/Event-Planning-Board-Template.json":Uo,"../templates/Getting-Things-Done-Template.json":Yo,"../templates/Marketing-Campaign-Board-Template.json":ta,"../templates/Personal-Life-Board-Template.json":sa,"../templates/Personal-Work-Kanban-Template.json":ma,"../templates/Product-Development-Board-Template.json":ya,"../templates/Project-Management-Board-Template.json":Ta,"../templates/Sales-Board-Template.json":xa,"../templates/Startup-Business-Operations-Board-Template.json":_a,"../templates/Student-Board-Template.json":za});function ja(e){const t=typeof e=="string"?e.split("/").pop():"";return t?t.replace(/\.json$/i,""):""}function Yt(){return Object.entries(Ua).map(([e,t])=>{const o=ja(e),n=typeof t?.boardName=="string"?t.boardName.trim():"",a=Array.isArray(t?.columns)?t.columns:null,i=Array.isArray(t?.tasks)?t.tasks:null,s=Array.isArray(t?.labels)?t.labels:null,r=t?.settings&&typeof t.settings=="object"?t.settings:null;return!o||!n||!i?null:{id:o,name:n,board:{boardName:n,columns:a,tasks:i,labels:s,settings:r}}}).filter(Boolean).sort((e,t)=>e.name.localeCompare(t.name))}function qa(e){if(!e)return;const t=Yt();e.innerHTML="";const o=document.createElement("option");o.value="",o.textContent="Blank board",o.selected=!0,e.appendChild(o),t.forEach(n=>{const a=document.createElement("option");a.value=n.id,a.textContent=n.name,e.appendChild(a)})}function Wa(e){const t=e&&typeof e=="object"?e:null;if(t&&(Array.isArray(t.columns)&&ee(t.columns),Array.isArray(t.tasks)&&O(t.tasks),Array.isArray(t.labels)&&he(t.labels),t.settings&&typeof t.settings=="object")){const o=T();Xe({...o,...t.settings})}}function Va(e){return(typeof e?.name=="string"?e.name.trim():"")||"Untitled board"}function ht(e){const t=ae(),o=Ke();e.innerHTML="",t.forEach(n=>{const a=document.createElement("option");a.value=n.id,a.textContent=Va(n),e.appendChild(a)}),o&&(e.value=o)}function Ue(){const e=document.getElementById("brand-text")||document.querySelector(".brand-text");e&&(e.textContent=Se())}function Ga(){const e=document.getElementById("board-create-modal"),t=document.getElementById("board-create-name"),o=document.getElementById("board-create-template");!e||!t||(t.value="",o&&(o.value=""),e.classList.remove("hidden"),t.focus())}function se(){const e=document.getElementById("board-create-modal");e&&e.classList.add("hidden")}function Ya(){Pe();const e=document.getElementById("board-select");if(!e)return;ht(e),Ue(),document.addEventListener("kanban:open-board-create",()=>{Ga()}),e.addEventListener("change",()=>{const i=e.value;if(!i)return;pe(i),Ue(),H();const s=document.getElementById("board-controls-menu"),r=document.getElementById("desktop-menu-btn");s?.classList.remove("show"),r?.setAttribute("aria-expanded","false")});const t=document.getElementById("board-create-modal"),o=document.getElementById("board-create-form"),n=document.getElementById("cancel-board-create-btn"),a=document.getElementById("board-create-template");qa(a),t&&(t.querySelector(".modal-backdrop")?.addEventListener("click",se),t.addEventListener("keydown",s=>{s.key==="Escape"&&se()})),n&&n.addEventListener("click",se),P("board-create-modal",se),o&&o.addEventListener("submit",async i=>{i.preventDefault();const s=document.getElementById("board-create-name"),r=(s?.value||"").trim();if(!r){await $({title:"Error",message:"Board name cannot be empty."}),s?.focus();return}const l=(a?.value||"").trim(),c=l?Yt():[],d=l?c.find(u=>u.id===l):null,p=yt(r);pe(p.id),d?.board&&Wa(d.board),ht(e),Ue(),H(),se(),document.dispatchEvent(new CustomEvent("kanban:boards-changed"))})}function Ja(e){const t=[];for(const o of e){if(typeof o!="string")continue;const n=o.trim();n&&(t.includes(n)||t.push(n))}return t}function Xa(e){const t=typeof navigator<"u"&&typeof navigator.language=="string"?navigator.language:"en-US";return Ja([e,t,"en-US","en-GB","de-DE","fr-FR","es-ES","it-IT","pt-BR","ja-JP","zh-CN"])}function Ka(){document.getElementById("settings-modal")?.classList.remove("hidden")}function je(){document.getElementById("settings-modal")?.classList.add("hidden")}async function F(e){Xe(e);const{renderBoard:t}=await M(async()=>{const{renderBoard:o}=await Promise.resolve().then(()=>z);return{renderBoard:o}},void 0,import.meta.url);t()}function Qa(){const e=document.getElementById("settings-btn"),t=document.getElementById("settings-close-btn");document.querySelector("#settings-modal .modal-backdrop");const o=document.getElementById("settings-show-priority"),n=document.getElementById("settings-show-due-date"),a=document.getElementById("settings-notification-days"),i=document.getElementById("settings-countdown-urgent-threshold"),s=document.getElementById("settings-countdown-warning-threshold"),r=document.getElementById("settings-show-age"),l=document.getElementById("settings-show-change-date"),c=document.getElementById("settings-locale"),d=document.getElementById("settings-default-priority");if(!e||!t||!o||!n||!a||!i||!s||!r||!l||!c||!d)return;function p(){const u=T();o.checked=u.showPriority!==!1,n.checked=u.showDueDate!==!1,r.checked=u.showAge!==!1,l.checked=u.showChangeDate!==!1,a.value=String(Number.isFinite(u.notificationDays)?u.notificationDays:3),i.value=String(Number.isFinite(u.countdownUrgentThreshold)?u.countdownUrgentThreshold:3),s.value=String(Number.isFinite(u.countdownWarningThreshold)?u.countdownWarningThreshold:10);const m=Xa(u.locale);c.innerHTML="",m.forEach(f=>{const g=document.createElement("option");g.value=f,g.textContent=f,c.appendChild(g)}),c.value=u.locale,d.value=u.defaultPriority||"none"}e.addEventListener("click",()=>{p(),Ka()}),t.addEventListener("click",je),P("settings-modal",je),document.addEventListener("keydown",u=>{const m=document.getElementById("settings-modal");!m||m.classList.contains("hidden")||u.key==="Escape"&&je()}),r.addEventListener("change",async()=>{const u=T();await F({...u,showAge:!!r.checked})}),l.addEventListener("change",async()=>{const u=T();await F({...u,showChangeDate:!!l.checked})}),o.addEventListener("change",async()=>{const u=T();await F({...u,showPriority:!!o.checked})}),n.addEventListener("change",async()=>{const u=T();await F({...u,showDueDate:!!n.checked})}),a.addEventListener("change",async()=>{const u=T(),m=Number.parseInt(a.value,10),f=Number.isFinite(m)?m:3;await F({...u,notificationDays:f})}),i.addEventListener("change",async()=>{const u=T(),m=Number.parseInt(i.value,10),f=Number.isFinite(m)&&m>=1?m:3;await F({...u,countdownUrgentThreshold:f})}),s.addEventListener("change",async()=>{const u=T(),m=Number.parseInt(s.value,10),f=u.countdownUrgentThreshold||3,g=Number.isFinite(m)&&m>=f?m:10;await F({...u,countdownWarningThreshold:g})}),c.addEventListener("change",async()=>{const u=T();await F({...u,locale:c.value})}),d.addEventListener("change",async()=>{const u=T();await F({...u,defaultPriority:d.value})})}document.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search),t=(e.get("openTaskId")||"").trim(),o=(e.get("openTaskBoardId")||"").trim();o&&(Pe(),pe(o));const n=document.getElementById("app-version");n&&(n.textContent="v1.1.2",n.title="Version 1.1.2"),en(),Qa();const a=document.getElementById("board-search-input");a&&a.addEventListener("input",()=>{Wt(a.value),H()}),Ya(),Yn(),jt(),document.getElementById("export-btn").addEventListener("click",async()=>{await Q({title:"Export Board (Active Only)",message:`Export ONLY saves the current active board. It does NOT back up all boards.

To back up everything, export each board individually.

Continue with export?`,confirmText:"Export"})&&An()}),document.getElementById("import-btn").addEventListener("click",async()=>{await Q({title:"Import Board (New Board)",message:`Import will CREATE A NEW BOARD and switch to it. Your current active board will not be overwritten.

Continue with import?`,confirmText:"Import"})&&document.getElementById("import-file").click()}),document.getElementById("import-file").addEventListener("change",r=>{const l=r.target.files[0];l&&Sn(l),r.target.value=""});const i=document.getElementById("desktop-menu-btn"),s=document.getElementById("board-controls-menu");if(i&&s&&(i.addEventListener("click",r=>{r.stopPropagation();const l=i.getAttribute("aria-expanded")==="true";s.classList.toggle("show"),i.setAttribute("aria-expanded",String(!l)),document.querySelectorAll(".column-menu").forEach(c=>c.classList.add("hidden"))}),s.addEventListener("click",r=>{r.target.closest("select, option, input, textarea, label")||!r.target.closest('button, a, [role="menuitem"]')||(s.classList.remove("show"),i.setAttribute("aria-expanded","false"))}),document.addEventListener("click",r=>{!s.contains(r.target)&&!i.contains(r.target)&&(s.classList.remove("show"),i.setAttribute("aria-expanded","false"))})),H(),t){j(t);const r=`${window.location.pathname}${window.location.hash||""}`;window.history.replaceState({},"",r)}});
