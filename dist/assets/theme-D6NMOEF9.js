import{c as q,M as G,a as W,B as $,b as V,X,A as Q,C as Z,d as tt,e as et,f as ot,g as nt,h as rt,F as at,P as st,G as it,T as ct,E as lt,i as dt,j as ut,k as gt,U as mt,D as ft,l as ht,m as pt,n as yt,o as St,p as Dt,q as bt,K as It,r as xt}from"./vendor-pJTqpwCg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const At={SquareKanban:xt,Kanban:It,Search:bt,Plus:Dt,Settings:St,Columns3:yt,Tag:pt,SlidersHorizontal:ht,Download:ft,Upload:mt,Moon:gt,Sun:ut,HelpCircle:dt,EllipsisVertical:lt,Trash2:ct,GripVertical:it,Pencil:st,Fullscreen:at,ChartColumn:rt,CalendarDays:nt,ChevronDown:ot,ChevronLeft:et,ChevronRight:tt,ChevronsRightLeft:Z,ArrowUpDown:Q,X,Bell:V,BellRing:$,Maximize2:W,Minimize2:G};function F(){q({icons:At})}F();function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const z="kanbanBoards",S="kanbanActiveBoardId",wt="kanbanColumns",Ct="kanbanTasks",Nt="kanbanLabels",l="default",x=new Map;function O(){return new Date().toISOString()}function i(t,e){return`kanbanBoard:${t}:${e}`}function f(t){if(!t)return null;try{const e=JSON.parse(t);return Array.isArray(e)?e:null}catch{return null}}function Tt(t){if(!t)return null;try{const e=JSON.parse(t);return e&&typeof e=="object"&&!Array.isArray(e)?e:null}catch{return null}}function h(){const t=f(localStorage.getItem(z));return t?t.filter(e=>e&&typeof e.id=="string").map(e=>({id:e.id,name:typeof e.name=="string"?e.name:"Untitled board",createdAt:typeof e.createdAt=="string"?e.createdAt:void 0})):[]}function kt(t){const e=typeof t=="string"?t:"";return e&&h().find(o=>o.id===e)||null}function Mt(){const t=g(),e=t?kt(t):null;return(typeof e?.name=="string"?e.name.trim():"")||"Untitled board"}function B(t){localStorage.setItem(z,JSON.stringify(t))}function g(){const t=localStorage.getItem(S),e=h();return t&&e.some(o=>o.id===t)?t:e[0]?.id||null}function Ot(t){const e=typeof t=="string"?t:"";!e||!h().some(n=>n.id===e)||localStorage.setItem(S,e)}function L(){return[{id:"todo",name:"To Do",color:"#3583ff"},{id:"inprogress",name:"In Progress",color:"#f59e0b"},{id:"done",name:"Done",color:"#505050"}]}function E(){return[{id:"urgent",name:"Urgent",color:"#ef4444",group:""},{id:"feature",name:"Feature",color:"#3b82f6",group:""},{id:"task",name:"Task",color:"#f59e0b",group:""}]}function K(){const t=O();return[{id:m(),title:"Find out where the Soul Stone is",description:"Identify current location and access requirements.",priority:"high",dueDate:"",column:"todo",labels:["urgent"],creationDate:t,changeDate:t,columnHistory:[{column:"todo",at:t}]},{id:m(),title:"Steal the Time Stone",description:"Coordinate with Dr. Strange and plan retrieval.",priority:"urgent",dueDate:"",column:"inprogress",labels:["feature"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Collect the Mind Stone",description:"Determine safe extraction approach.",priority:"medium",dueDate:"",column:"inprogress",labels:[],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Hide the Reality Stone",description:"Dig a deep hole to hide the stone from the Collector, avoid escalation.",priority:"low",dueDate:"",column:"inprogress",labels:["task"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Find a bag for stones",description:"A bag with good durability and space is needed to hold all the stones securely.",priority:"none",dueDate:"",column:"inprogress",labels:["task"],creationDate:t,changeDate:t,columnHistory:[{column:"inprogress",at:t}]},{id:m(),title:"Collect the Power Stone",description:"Verify secure containment after retrieval.",priority:"high",dueDate:"",column:"done",labels:["urgent","feature"],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]},{id:m(),title:"Collect the Space Stone",description:"",priority:"low",dueDate:"",column:"done",labels:[],creationDate:t,changeDate:t,doneDate:t,columnHistory:[{column:"done",at:t}]}]}function v(){return{showPriority:!0,showDueDate:!0,showAge:!0,showChangeDate:!1,locale:typeof navigator<"u"&&typeof navigator.language=="string"?navigator.language:"en-US",defaultPriority:"none",notificationDays:3,countdownUrgentThreshold:3,countdownWarningThreshold:10}}const Bt=new Set(["urgent","high","medium","low","none"]);function R(t){const e=(t||"").toString().trim().toLowerCase();return Bt.has(e)?e:"none"}function vt(){const t=f(localStorage.getItem(wt)),e=f(localStorage.getItem(Ct)),o=f(localStorage.getItem(Nt)),n=!!(t||e||o),r=[{id:l,name:"Default Board",createdAt:O()}];return B(r),localStorage.setItem(S,l),localStorage.setItem(i(l,"columns"),JSON.stringify(t||L())),localStorage.setItem(i(l,"tasks"),JSON.stringify(e||K())),localStorage.setItem(i(l,"labels"),JSON.stringify(o||E())),localStorage.setItem(i(l,"settings"),JSON.stringify(v())),n}function d(){const t=h();if(t.length>0){g()||Ot(t[0].id);return}vt()}function Ht(t){d();const o=(typeof t=="string"?t.trim():"")||"Untitled board",n=h(),r=`board-${m()}`,a={id:r,name:o,createdAt:O()};return B([...n,a]),localStorage.setItem(i(r,"columns"),JSON.stringify(L())),localStorage.setItem(i(r,"tasks"),JSON.stringify([])),localStorage.setItem(i(r,"labels"),JSON.stringify(E())),localStorage.setItem(i(r,"settings"),JSON.stringify(v())),localStorage.setItem(S,r),a}function Ut(t,e){d();const o=typeof t=="string"?t:"",n=typeof e=="string"?e.trim():"";if(!o||!n)return!1;const r=h();if(!r.some(c=>c.id===o))return!1;const a=r.map(c=>c.id===o?{...c,name:n}:c);return B(a),!0}function _t(t){d();const e=typeof t=="string"?t:"";if(!e)return!1;const o=h();if(!o.some(a=>a.id===e)||o.length<=1)return!1;const n=o.filter(a=>a.id!==e);return B(n),localStorage.removeItem(i(e,"columns")),localStorage.removeItem(i(e,"tasks")),localStorage.removeItem(i(e,"labels")),localStorage.removeItem(i(e,"settings")),x.delete(e),localStorage.getItem(S)===e&&localStorage.setItem(S,n[0].id),!0}function Lt(t){return typeof t=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(t.trim())}function Et(t){return t==="todo"?"#3b82f6":t==="inprogress"?"#f59e0b":t==="done"?"#16a34a":"#3b82f6"}function M(t){const e=Lt(t?.color)?t.color.trim():Et(t?.id),o=t?.collapsed===!0;return{...t,color:e,collapsed:o}}function H(t){const e=Array.isArray(t)?t.slice():[];if(e.some(n=>n&&n.id==="done"))return e;const o=e.reduce((n,r)=>Math.max(n,Number.isFinite(r?.order)?r.order:0),0);return e.push({id:"done",name:"Done",color:"#16a34a",order:o+1,collapsed:!1}),e}function Ft(){d();const t=g()||l,e=localStorage.getItem(i(t,"columns")),o=f(e);if(o){const n=H(o.map(M));return(!n.some(r=>r&&r.id==="done")||n.length!==o.length)&&localStorage.setItem(i(t,"columns"),JSON.stringify(n)),n}return H(L().map(M))}function zt(t){d();const e=g()||l;localStorage.setItem(i(e,"columns"),JSON.stringify(t))}function Kt(){d();const t=g()||l,e=localStorage.getItem(i(t,"tasks")),o=f(e);if(o){let a=!1;const c=o.map(u=>{const s=u&&typeof u=="object"?{...u}:u;if(!s||typeof s!="object")return s;const D=R(s.priority);s.priority!==D&&(s.priority=D,a=!0);const A=s.column==="done",b=typeof s.doneDate=="string"&&s.doneDate.trim()!=="",p=typeof s.changeDate=="string"&&s.changeDate.trim()?s.changeDate.trim():"",I=typeof s.creationDate=="string"&&s.creationDate.trim()?s.creationDate.trim():"";if(A&&!b){const y=p||I;y&&(s.doneDate=y,a=!0)}!A&&b&&(delete s.doneDate,a=!0);const w=s.columnHistory,C=Array.isArray(w)?w:null,N=p||I||O(),T=typeof s.column=="string"?s.column.trim():"";if(!C||C.length===0)N&&T&&(s.columnHistory=[{column:T,at:N}],a=!0);else{const y=C.map(k=>{const P=typeof k?.column=="string"?k.column.trim():"",J=typeof k?.at=="string"?k.at.trim():"";return!P||!J?null:{column:P,at:J}}).filter(Boolean);y.length===0?N&&T&&(s.columnHistory=[{column:T,at:N}],a=!0):y.length!==C.length&&(s.columnHistory=y,a=!0)}return s});return a&&localStorage.setItem(i(t,"tasks"),JSON.stringify(c)),x.set(t,c),c}const n=x.get(t);if(Array.isArray(n))return n;const r=K();return x.set(t,r),r}function Rt(t){d();const e=g()||l;localStorage.setItem(i(e,"tasks"),JSON.stringify(t)),x.set(e,t)}function Yt(){d();const t=g()||l,e=localStorage.getItem(i(t,"labels")),o=f(e);return o?o.map(n=>({...n,group:typeof n.group=="string"?n.group:""})):E()}function jt(t){d();const e=g()||l;localStorage.setItem(i(e,"labels"),JSON.stringify(t))}function Y(t){const e=t&&typeof t=="object"?t:{},o=typeof e.locale=="string"&&e.locale.trim()?e.locale.trim():v().locale,n=e.showPriority!==!1,r=e.showDueDate!==!1,a=e.showAge!==!1,c=e.showChangeDate!==!1,u=(e.defaultPriority||"").toString().trim().toLowerCase(),s=R(u),D=Number.parseInt((e.notificationDays??"").toString(),10),A=Number.isFinite(D)?Math.min(365,Math.max(0,D)):3,b=Number.parseInt((e.countdownUrgentThreshold??"").toString(),10),p=Number.isFinite(b)?Math.min(365,Math.max(1,b)):3,I=Number.parseInt((e.countdownWarningThreshold??"").toString(),10),w=Number.isFinite(I)?Math.min(365,Math.max(p,I)):10;return{showPriority:n,showDueDate:r,showAge:a,showChangeDate:c,locale:o,defaultPriority:s,notificationDays:A,countdownUrgentThreshold:p,countdownWarningThreshold:w}}function qt(){d();const t=g()||l,e=localStorage.getItem(i(t,"settings")),o=Tt(e);if(o)return Y(o);const n=v();return localStorage.setItem(i(t,"settings"),JSON.stringify(n)),n}function Gt(t){d();const e=g()||l,o=Y(t);localStorage.setItem(i(e,"settings"),JSON.stringify(o))}const j="kanban-theme";function Pt(){const t=localStorage.getItem(j);return t==="light"||t==="dark"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function U(t){document.documentElement.dataset.theme=t}function _(t){const e=document.getElementById("theme-toggle-btn");if(!e)return;const o=t==="dark"?"light":"dark",n=o==="dark"?"Dark":"Light",r=o==="dark"?"moon":"sun";e.setAttribute("aria-pressed",String(t==="dark"));const a=e.querySelector("[data-lucide]");a&&a.setAttribute("data-lucide",r);const c=Array.from(e.childNodes).filter(u=>u.nodeType===Node.TEXT_NODE);for(const u of c)u.remove();e.appendChild(document.createTextNode(` ${n}`)),F()}function Wt(){const t=Pt();U(t),_(t);const e=document.getElementById("theme-toggle-btn");e&&e.addEventListener("click",()=>{const n=(document.documentElement.dataset.theme==="dark"?"dark":"light")==="dark"?"light":"dark";U(n),localStorage.setItem(j,n),_(n)})}export{Ft as a,zt as b,Yt as c,jt as d,qt as e,Mt as f,m as g,Ht as h,Ot as i,Gt as j,h as k,Kt as l,d as m,g as n,_t as o,Ut as p,Wt as q,F as r,Rt as s};
