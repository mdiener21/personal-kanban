(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function p(){const t=localStorage.getItem("kanbanColumns");if(t)try{const n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return[{id:"todo",name:"To Do"},{id:"inprogress",name:"In Progress"},{id:"done",name:"Done"}]}function C(t){localStorage.setItem("kanbanColumns",JSON.stringify(t))}function b(){const t=localStorage.getItem("kanbanTasks");if(t)try{const n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return[{id:g(),text:"Find out where Soul Stone is",column:"todo",labels:["urgent"],creationDate:new Date().toISOString()},{id:g(),text:"Collect Time Stone from Dr. Strange",column:"verified",labels:["feature"],creationDate:new Date().toISOString()},{id:g(),text:"Collect Mind Stone from Vision",column:"verified",labels:[],creationDate:new Date().toISOString()},{id:g(),text:"Collect Reality Stone from the Collector",column:"verified",labels:["bug"],creationDate:new Date().toISOString()},{id:g(),text:"Collect Power Stone from Xandar",column:"done",labels:["urgent","feature"],creationDate:new Date().toISOString()},{id:g(),text:"Collect Space Stone from Asgard",column:"done",labels:[],creationDate:new Date().toISOString()}]}function E(t){localStorage.setItem("kanbanTasks",JSON.stringify(t))}function f(){const t=localStorage.getItem("kanbanLabels");if(t)try{const n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return[{id:"urgent",name:"Urgent",color:"#ef4444"},{id:"feature",name:"Feature",color:"#3b82f6"},{id:"task",name:"Task",color:"#f59e0b"}]}function w(t){localStorage.setItem("kanbanLabels",JSON.stringify(t))}function F(t,n,a=[]){if(!t||t.trim()==="")return;const e=b(),l=e.filter(s=>s.column===n).reduce((s,r)=>Math.max(s,r.order??0),0),d={id:g(),text:t.trim(),column:n,order:l+1,labels:[...a],creationDate:new Date().toISOString()};e.push(d),E(e)}function Y(t,n,a,e=[]){if(!n||n.trim()==="")return;const o=b(),l=o.findIndex(d=>d.id===t);l!==-1&&(o[l].text=n.trim(),o[l].column=a,o[l].labels=[...e],E(o))}function X(t){if(!confirm("Are you sure you want to delete this task?"))return!1;const a=b().filter(e=>e.id!==t);return E(a),!0}function K(){const t=[];return document.querySelectorAll(".task-column").forEach(n=>{const a=n.dataset.column;n.querySelectorAll(".task").forEach(e=>{t.push({id:e.dataset.taskId,column:a})})}),t}function W(){const t=K(),a=b().map(e=>{const o=t.findIndex(l=>l.id===e.id);if(o!==-1){const l=t[o],d=t.filter((s,r)=>s.column===l.column&&r<=o);return{...e,column:l.column,order:d.length}}return e});E(a)}function G(t){if(!t||t.trim()==="")return;const n=p(),a=n.reduce((l,d)=>Math.max(l,d.order??0),0),o={id:t.toLowerCase().replace(/\s+/g,"-")+"-"+g().substring(0,8),name:t.trim(),order:a+1};n.push(o),C(n)}function Q(t,n){if(!n||n.trim()==="")return;const a=p(),e=a.findIndex(o=>o.id===t);e!==-1&&(a[e].name=n.trim(),C(a))}function Z(t){const n=p();if(n.length<=1)return alert("Cannot delete the last column!"),!1;const a=n.find(r=>r.id===t),e=a!=null&&a.name?`"${a.name}"`:"this column",o=b(),l=o.filter(r=>r.column===t),d=l.length>0?`Delete ${e}? This will also delete ${l.length} task(s).`:`Delete ${e}?`;if(!confirm(d))return!1;if(l.length>0){const r=o.filter(c=>c.column!==t);E(r)}const s=n.filter(r=>r.id!==t);return C(s),!0}function ee(){const n=document.getElementById("board-container").querySelectorAll(".task-column"),a=p();n.forEach((e,o)=>{const l=e.dataset.column,d=a.find(s=>s.id===l);d&&(d.order=o+1)}),C(a)}const te="modulepreload",ne=function(t){return"/"+t},M={},y=function(n,a,e){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),s=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(a.map(r=>{if(r=ne(r),r in M)return;M[r]=!0;const c=r.endsWith(".css"),i=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":te,c||(u.as="script"),u.crossOrigin="",u.href=r,s&&u.setAttribute("nonce",s),document.head.appendChild(u),c)return new Promise((h,I)=>{u.addEventListener("load",h),u.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${r}`)))})}))}function l(d){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=d,window.dispatchEvent(s),!s.defaultPrevented)throw d}return o.then(d=>{for(const s of d||[])s.status==="rejected"&&l(s.reason);return n().catch(l)})};function oe(t,n){if(!t||t.trim()==="")return;const a=f(),o={id:t.toLowerCase().replace(/\s+/g,"-")+"-"+g().substring(0,8),name:t.trim(),color:n};return a.push(o),w(a),o}function ae(t,n,a){if(!n||n.trim()==="")return;const e=f(),o=e.findIndex(l=>l.id===t);o!==-1&&(e[o].name=n.trim(),e[o].color=a,w(e))}function le(t){const n=f(),a=b();a.forEach(o=>{o.labels&&(o.labels=o.labels.filter(l=>l!==t))}),E(a);const e=n.filter(o=>o.id!==t);w(e)}let R="todo",L=null,v=null,T=null,m=[];function de(){const t=document.getElementById("task-label-search");return((t==null?void 0:t.value)||"").trim().toLowerCase()}function P(){const t=document.getElementById("task-active-labels");if(!t)return;const n=f(),a=[];for(const o of m)a.includes(o)||a.push(o);m=a;const e=a.map(o=>n.find(l=>l.id===o)).filter(Boolean);t.innerHTML="",t.style.display=e.length>0?"flex":"none",e.forEach(o=>{const l=document.createElement("span");l.classList.add("task-label"),l.style.backgroundColor=o.color,l.textContent=o.name;const d=document.createElement("button");d.type="button",d.classList.add("active-label-remove"),d.setAttribute("aria-label",`Remove label ${o.name}`),d.title="Remove label",d.textContent="Ã—",d.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),m=m.filter(r=>r!==o.id),P(),A()}),l.appendChild(d),t.appendChild(l)})}function se(t){var s;R=t||((s=p()[0])==null?void 0:s.id)||"todo",L=null,m=[];const n=document.getElementById("task-modal"),a=document.getElementById("task-column"),e=document.getElementById("task-text"),o=document.getElementById("task-modal-title"),l=document.getElementById("task-submit-btn");o.textContent="Add New Task",l.textContent="Add Task",a.value=R,e.value="";const d=document.getElementById("task-label-search");d&&(d.value=""),A(),n.classList.remove("hidden"),e.focus()}function re(t){const a=b().find(c=>c.id===t);if(!a)return;L=t,m=a.labels||[];const e=document.getElementById("task-modal"),o=document.getElementById("task-column"),l=document.getElementById("task-text"),d=document.getElementById("task-modal-title"),s=document.getElementById("task-submit-btn");d.textContent="Edit Task",s.textContent="Save Changes",o.value=a.column,l.value=a.text;const r=document.getElementById("task-label-search");r&&(r.value=""),A(),e.classList.remove("hidden"),l.focus()}function x(){document.getElementById("task-modal").classList.add("hidden"),L=null}function ce(){v=null;const t=document.getElementById("column-modal"),n=document.getElementById("column-name"),a=document.getElementById("column-modal-title"),e=document.getElementById("column-submit-btn");a.textContent="Add New Column",e.textContent="Add Column",n.value="",t.classList.remove("hidden"),n.focus()}function ie(t){const a=p().find(s=>s.id===t);if(!a)return;v=t;const e=document.getElementById("column-modal"),o=document.getElementById("column-name"),l=document.getElementById("column-modal-title"),d=document.getElementById("column-submit-btn");l.textContent="Edit Column",d.textContent="Save Changes",o.value=a.name,e.classList.remove("hidden"),o.focus()}function B(){document.getElementById("column-modal").classList.add("hidden"),v=null}function ue(){q(),document.getElementById("labels-modal").classList.remove("hidden")}function O(){document.getElementById("labels-modal").classList.add("hidden")}function me(){document.getElementById("help-modal").classList.remove("hidden")}function _(){document.getElementById("help-modal").classList.add("hidden")}function J(t=null){T=t;const n=document.getElementById("label-modal"),a=document.getElementById("label-modal-title"),e=document.getElementById("label-name"),o=document.getElementById("label-color"),l=document.getElementById("label-submit-btn");if(t){const s=f().find(r=>r.id===t);s&&(a.textContent="Edit Label",l.textContent="Update Label",e.value=s.name,o.value=s.color)}else a.textContent="Add Label",l.textContent="Add Label",e.value="",o.value="#3b82f6";n.classList.remove("hidden"),e.focus()}function S(){document.getElementById("label-modal").classList.add("hidden"),T=null}function q(){const t=document.getElementById("labels-list");t.innerHTML="",f().forEach(a=>{const e=document.createElement("div");e.classList.add("label-item"),e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="space-between";const o=document.createElement("span");o.classList.add("task-label"),o.style.backgroundColor=a.color,o.textContent=a.name;const l=document.createElement("div");l.classList.add("label-actions"),l.style.display="flex",l.style.gap="4px";const d=document.createElement("button");d.classList.add("btn-small");const s=document.createElement("span");s.dataset.lucide="pencil",d.appendChild(s),d.title="Edit label",d.addEventListener("click",()=>J(a.id));const r=document.createElement("button");r.classList.add("btn-small","btn-danger");const c=document.createElement("span");c.dataset.lucide="trash-2",r.appendChild(c),r.title="Delete label",r.addEventListener("click",async()=>{if(confirm(`Delete label "${a.name}"? This will remove it from all tasks.`)){le(a.id),q();const{renderBoard:i}=await y(async()=>{const{renderBoard:u}=await Promise.resolve().then(()=>k);return{renderBoard:u}},void 0);i()}}),l.appendChild(d),l.appendChild(r),e.appendChild(o),e.appendChild(l),t.appendChild(e)}),lucide.createIcons()}function A(){P();const t=document.getElementById("task-labels-selection");t.innerHTML="";const n=de(),a=f(),e=n?a.filter(o=>{const l=(o.name||"").toLowerCase(),d=(o.id||"").toLowerCase();return l.includes(n)||d.includes(n)}):a;if(e.length===0){const o=document.createElement("div");o.classList.add("labels-empty"),o.textContent="No matching labels",t.appendChild(o);return}e.forEach(o=>{const l=document.createElement("label");l.classList.add("label-checkbox");const d=document.createElement("input");d.type="checkbox",d.value=o.id,d.checked=m.includes(o.id),d.addEventListener("change",r=>{r.target.checked?m.includes(o.id)||m.push(o.id):m=m.filter(c=>c!==o.id),P()});const s=document.createElement("span");s.classList.add("task-label","label-color-swatch"),s.style.backgroundColor=o.color,s.textContent=o.name,l.appendChild(d),l.appendChild(s),t.appendChild(l)})}function fe(){const t=document.getElementById("task-label-search");t==null||t.addEventListener("input",A),document.getElementById("task-form").addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("task-text").value,e=document.getElementById("task-column").value;L?Y(L,a,e,m):F(a,e,m),x();const{renderBoard:o}=await y(async()=>{const{renderBoard:l}=await Promise.resolve().then(()=>k);return{renderBoard:l}},void 0);o()}),document.getElementById("cancel-task-btn").addEventListener("click",x),document.querySelector("#task-modal .modal-backdrop").addEventListener("click",x),document.getElementById("column-form").addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("column-name").value;v?Q(v,a):G(a),B();const{renderBoard:e}=await y(async()=>{const{renderBoard:o}=await Promise.resolve().then(()=>k);return{renderBoard:o}},void 0);e()}),document.getElementById("cancel-column-btn").addEventListener("click",B),document.querySelector("#column-modal .modal-backdrop").addEventListener("click",B),document.getElementById("manage-labels-btn").addEventListener("click",ue),document.getElementById("labels-close-btn").addEventListener("click",O),document.getElementById("add-label-btn").addEventListener("click",()=>J()),document.getElementById("label-form").addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("label-name").value,e=document.getElementById("label-color").value;T?ae(T,a,e):oe(a,e),S(),q();const{renderBoard:o}=await y(async()=>{const{renderBoard:l}=await Promise.resolve().then(()=>k);return{renderBoard:l}},void 0);o()}),document.getElementById("cancel-label-btn").addEventListener("click",S),document.querySelector("#labels-modal .modal-backdrop").addEventListener("click",O),document.querySelector("#label-modal .modal-backdrop").addEventListener("click",S),document.getElementById("help-btn").addEventListener("click",me),document.getElementById("help-close-btn").addEventListener("click",_),document.querySelector("#help-modal .modal-backdrop").addEventListener("click",_),document.getElementById("add-column-btn").addEventListener("click",ce),document.addEventListener("keydown",n=>{n.key==="Escape"&&(x(),B(),O(),S(),_())})}function pe(){document.querySelectorAll(".task").forEach(n=>{n.addEventListener("dragstart",a=>{n.id="dragged-task",a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("task","")}),n.addEventListener("dragend",a=>{n.removeAttribute("id")})})}function ge(){document.querySelectorAll(".task-column").forEach(n=>{n.addEventListener("dragover",a=>{a.dataTransfer.types.includes("task")?he(a):a.dataTransfer.types.includes("column")&&U(a)}),n.addEventListener("dragleave",a=>{if(n.contains(a.relatedTarget))return;const e=n.querySelector(".placeholder");e==null||e.remove()}),n.addEventListener("drop",async a=>{a.preventDefault();const e=document.getElementById("dragged-task"),o=n.querySelector(".placeholder");if(!e||!o)return;const l=n.querySelector(".tasks");e.remove(),l.insertBefore(e,o),o.remove(),W();const{renderBoard:d}=await y(async()=>{const{renderBoard:s}=await Promise.resolve().then(()=>k);return{renderBoard:s}},void 0);d()})})}function be(){const t=document.querySelectorAll(".task-column"),n=document.getElementById("board-container");t.forEach(a=>{const e=a.querySelector(".column-drag-handle");a.draggable=!1,e.addEventListener("mousedown",()=>{a.draggable=!0}),document.addEventListener("mouseup",()=>{a.draggable=!1}),a.addEventListener("dragstart",o=>{o.target.closest(".task")||(a.id="dragged-column",o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("column",""))}),a.addEventListener("dragend",()=>{a.removeAttribute("id"),a.draggable=!1;const o=n.querySelector(".column-placeholder");o==null||o.remove()})}),n.addEventListener("dragover",a=>{a.dataTransfer.types.includes("column")&&(a.preventDefault(),U(a))}),n.addEventListener("drop",a=>{if(!a.dataTransfer.types.includes("column"))return;a.preventDefault();const e=document.getElementById("dragged-column"),o=n.querySelector(".column-placeholder");!e||!o||(n.insertBefore(e,o),o.remove(),ee())})}function $(t){const n=document.createElement("li");return n.classList.add("placeholder"),n.style.height=`${t.offsetHeight}px`,n}function he(t){if(!t.dataTransfer.types.includes("task"))return;t.preventDefault();const n=document.getElementById("dragged-task"),a=t.currentTarget,e=a.querySelector(".tasks"),o=a.querySelector(".placeholder");if(o){const l=o.getBoundingClientRect();if(l.top<=t.clientY&&l.bottom>=t.clientY)return}for(const l of e.children)if(l.getBoundingClientRect().bottom>=t.clientY){if(l===o||(o==null||o.remove(),l===n||l.previousElementSibling===n))return;e.insertBefore(o??$(n),l);return}o==null||o.remove(),e.lastElementChild!==n&&e.append(o??$(n))}function H(t){const n=document.createElement("div");return n.classList.add("column-placeholder"),n.style.width=`${t.offsetWidth}px`,n.style.height=`${t.offsetHeight}px`,n}function U(t){if(!t.dataTransfer.types.includes("column"))return;const n=document.getElementById("board-container"),a=document.getElementById("dragged-column");if(!a)return;const e=n.querySelector(".column-placeholder"),o=Array.from(n.querySelectorAll(".task-column:not(#dragged-column)"));for(const l of o){const d=l.getBoundingClientRect(),s=d.left+d.width/2;if(t.clientX<s){if(e&&e.nextElementSibling===l)return;e==null||e.remove(),n.insertBefore(H(a),l);return}}e==null||e.remove(),n.appendChild(H(a))}function Ee(t){const n=document.createElement("li");n.classList.add("task"),n.draggable=!0,n.dataset.taskId=t.id;const a=document.createElement("div");a.classList.add("task-labels");const e=f();t.labels&&t.labels.length>0&&t.labels.forEach(s=>{const r=e.find(c=>c.id===s);if(r){const c=document.createElement("span");c.classList.add("task-label"),c.style.backgroundColor=r.color,c.textContent=r.name,a.appendChild(c)}});const o=document.createElement("span");o.classList.add("task-text"),o.textContent=t.text,o.addEventListener("click",()=>re(t.id));const l=document.createElement("button");l.classList.add("delete-task-btn");const d=document.createElement("span");return d.dataset.lucide="trash-2",l.appendChild(d),l.addEventListener("click",async s=>{s.stopPropagation(),X(t.id)&&D()}),n.appendChild(o),n.appendChild(a),n.appendChild(l),n}function ye(t){const n=document.createElement("div");n.classList.add("task-column"),n.dataset.column=t.id,n.draggable=!1;const a=document.createElement("div");a.classList.add("column-drag-handle");const e=document.createElement("span");e.dataset.lucide="grip-vertical",a.appendChild(e),a.title="Drag to reorder";const o=document.createElement("div");o.classList.add("column-header");const l=document.createElement("h2");l.textContent=t.name;const d=document.createElement("span");d.classList.add("task-counter"),d.dataset.columnId=t.id,d.textContent="0";const s=document.createElement("div");s.classList.add("column-actions");const r=document.createElement("button");r.classList.add("add-task-btn-icon");const c=document.createElement("span");c.dataset.lucide="plus",r.appendChild(c),r.title="Add task",r.addEventListener("click",()=>se(t.id));const i=document.createElement("button");i.classList.add("edit-column-btn");const u=document.createElement("span");u.dataset.lucide="pencil",i.appendChild(u),i.title="Edit column name",i.addEventListener("click",()=>ie(t.id));const h=document.createElement("button");h.classList.add("delete-column-btn");const I=document.createElement("span");I.dataset.lucide="trash-2",h.appendChild(I),h.title="Delete column",h.addEventListener("click",async()=>{Z(t.id)&&D()}),s.appendChild(r),s.appendChild(i),s.appendChild(h),o.appendChild(a),o.appendChild(l),o.appendChild(d),o.appendChild(s);const N=document.createElement("ul");return N.classList.add("tasks"),n.appendChild(o),n.appendChild(N),n}function ke(){const t=p(),n=document.getElementById("task-column");n.innerHTML="",t.forEach(a=>{const e=document.createElement("option");e.value=a.id,e.textContent=a.name,n.appendChild(e)})}function D(){const t=p(),n=b(),a=document.getElementById("board-container");a.innerHTML="",[...t].sort((o,l)=>(o.order??0)-(l.order??0)).forEach(o=>{const l=ye(o);a.appendChild(l);const d=l.querySelector(".tasks"),s=l.querySelector(".task-counter"),r=n.filter(c=>c.column===o.id).sort((c,i)=>(c.order??0)-(i.order??0));if(r.forEach(c=>{d.appendChild(Ee(c))}),s.textContent=r.length,r.length>12){l.classList.add("has-hidden-tasks");const c=document.createElement("button");c.classList.add("show-all-tasks-btn"),c.type="button";const i=r.length;c.textContent=`Show all tasks (${i})`,c.addEventListener("click",()=>{d.classList.toggle("expanded"),c.textContent=d.classList.contains("expanded")?"Hide extra tasks":`Show all tasks (${i})`}),l.appendChild(c)}}),pe(),ge(),be(),ke(),lucide.createIcons()}const k=Object.freeze(Object.defineProperty({__proto__:null,renderBoard:D},Symbol.toStringTag,{value:"Module"}));function Le(t){return typeof t=="string"&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(t.trim())}function ve(t){if(!Array.isArray(t))return null;const n=t.map(e=>{const o=typeof(e==null?void 0:e.id)=="string"?e.id:String((e==null?void 0:e.id)??""),l=typeof(e==null?void 0:e.text)=="string"?e.text:String((e==null?void 0:e.text)??""),d=typeof(e==null?void 0:e.column)=="string"?e.column:String((e==null?void 0:e.column)??""),s=Array.isArray(e==null?void 0:e.labels)?e.labels.map(i=>typeof i=="string"?i:String(i)):[],r=Number.isFinite(e==null?void 0:e.order)?e.order:void 0,c=typeof(e==null?void 0:e.creationDate)=="string"?e.creationDate:void 0;return{id:o.trim(),text:l.trim(),column:d.trim(),...r!==void 0?{order:r}:{},...c?{creationDate:c}:{},labels:s}});return n.every(e=>e.id&&e.text&&e.column)?n:null}function Ce(t){if(!Array.isArray(t))return null;const n=t.map(e=>{const o=typeof(e==null?void 0:e.id)=="string"?e.id:String((e==null?void 0:e.id)??""),l=typeof(e==null?void 0:e.name)=="string"?e.name:String((e==null?void 0:e.name)??""),d=Number.isFinite(e==null?void 0:e.order)?e.order:void 0;return{id:o.trim(),name:l.trim(),...d!==void 0?{order:d}:{}}});return n.every(e=>e.id&&e.name)?n:null}function Ie(t){if(!Array.isArray(t))return null;const n=t.map(e=>{const o=typeof(e==null?void 0:e.id)=="string"?e.id:String((e==null?void 0:e.id)??""),l=typeof(e==null?void 0:e.name)=="string"?e.name:String((e==null?void 0:e.name)??""),d=Le(e==null?void 0:e.color)?e.color.trim():"#3b82f6";return{id:o.trim(),name:l.trim(),color:d}});return n.every(e=>e.id&&e.name&&e.color)?n:null}function xe(){const t=b(),n=p(),a=f(),o=JSON.stringify({columns:n,tasks:t,labels:a},null,2),l=new Blob([o],{type:"application/json"}),d=URL.createObjectURL(l),s=document.createElement("a");s.href=d,s.download=`kanban-board-${new Date().toISOString()}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(d)}function Be(t){const n=new FileReader;n.onload=async a=>{try{const e=JSON.parse(a.target.result);let o,l,d;if(Array.isArray(e))o=e,l=p(),d=f();else if(e.tasks&&e.columns)o=e.tasks,l=e.columns,d=e.labels||f();else{alert("Invalid JSON file format");return}const s=ve(o),r=Ce(l),c=d?Ie(d):null;if(!s||!r||d&&!c){alert("Invalid data structure");return}C(r),E(s),c&&w(c);const{renderBoard:i}=await y(async()=>{const{renderBoard:u}=await Promise.resolve().then(()=>k);return{renderBoard:u}},void 0);i(),alert("Board imported successfully!")}catch(e){alert("Error parsing JSON file: "+e.message)}},n.readAsText(t)}const j="kanban-theme";function Se(){const t=localStorage.getItem(j);return t==="light"||t==="dark"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function V(t){document.documentElement.dataset.theme=t}function z(t){const n=document.getElementById("theme-toggle-btn");if(!n)return;const a=t==="dark"?"light":"dark",e=a==="dark"?"Dark":"Light",o=a==="dark"?"moon":"sun";n.setAttribute("aria-pressed",String(t==="dark"));const l=n.querySelector("span[data-lucide]");l&&l.setAttribute("data-lucide",o);const d=Array.from(n.childNodes).filter(s=>s.nodeType===Node.TEXT_NODE);for(const s of d)s.remove();n.appendChild(document.createTextNode(` ${e}`)),window.lucide&&typeof window.lucide.createIcons=="function"&&window.lucide.createIcons()}function Te(){const t=Se();V(t),z(t);const n=document.getElementById("theme-toggle-btn");n&&n.addEventListener("click",()=>{const e=(document.documentElement.dataset.theme==="dark"?"dark":"light")==="dark"?"light":"dark";V(e),localStorage.setItem(j,e),z(e)})}document.addEventListener("DOMContentLoaded",()=>{Te(),fe(),document.getElementById("export-btn").addEventListener("click",xe),document.getElementById("import-btn").addEventListener("click",()=>{document.getElementById("import-file").click()}),document.getElementById("import-file").addEventListener("change",t=>{const n=t.target.files[0];n&&Be(n),t.target.value=""}),window.addEventListener("beforeunload",t=>{const n="Your board data is stored in browser localStorage. Please export to a JSON file to save your work before closing.";return t.preventDefault(),t.returnValue=n,n}),D()});
