<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Personal Kanban Board - A fully local task management tool with no server required">
  <title>Personal Kanban Board</title>
  <!-- Kanban favicon (inline SVG data URI) -->
  <link rel="icon" href="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Crect x='2' y='3' width='6' height='18' rx='1.5' fill='%233b82f6'/%3E%3Crect x='9' y='3' width='6' height='12' rx='1.5' fill='%2360a5fa'/%3E%3Crect x='16' y='3' width='6' height='8' rx='1.5' fill='%2393c5fd'/%3E%3C/svg%3E">
  <script type="module" crossorigin src="./assets/index-BLGqoSQB.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index-BfUrmpOR.css">
</head>
<body>
  <!-- Skip link for accessibility -->
  <a href="#board-container" class="sr-only">Skip to board</a>

  <header>
    <nav class="controls" role="toolbar" aria-label="Board controls">
      <div class="brand">
        <span data-lucide="square-kanban" aria-hidden="true" class="brand-icon"></span>
        <span id="brand-text" class="brand-text"></span>
      </div>

      <div class="board-search" role="search" aria-label="Filter tasks">
        <label class="sr-only" for="board-search-input">Search tasks</label>
        <span data-lucide="search" aria-hidden="true"></span>
        <input
          id="board-search-input"
          type="search"
          inputmode="search"
          placeholder="Search tasksâ€¦"
          autocomplete="off"
          aria-label="Search tasks by label, title, or description"
        >
      </div>
      
      <div id="board-controls-menu" class="controls-actions">
        <label class="sr-only" for="board-select">Select board</label>
        <select id="board-select" class="control-select" aria-label="Select board"></select>
        <button id="add-column-btn" class="control-btn" type="button" aria-haspopup="dialog">
          <span data-lucide="columns-3" aria-hidden="true"></span>
          <span style="color:green;">Add Column</span>
        </button>
        <button id="manage-boards-btn" class="control-btn" type="button" aria-haspopup="dialog">
          <span data-lucide="settings" aria-hidden="true"></span>
          <span>Manage Boards</span>
        </button>
        <button id="manage-labels-btn" class="control-btn" type="button" aria-haspopup="dialog">
          <span data-lucide="tag" aria-hidden="true"></span>
          <span>Manage Labels</span>
        </button>
        <button id="settings-btn" class="control-btn" type="button" aria-haspopup="dialog">
          <span data-lucide="sliders-horizontal" aria-hidden="true"></span>
          <span>Settings</span>
        </button>
        <button id="export-btn" class="control-btn" type="button">
          <span data-lucide="download" aria-hidden="true"></span>
          <span>Export</span>
        </button>
        <button id="import-btn" class="control-btn" type="button">
          <span data-lucide="upload" aria-hidden="true"></span>
          <span>Import</span>
        </button>
        <button id="theme-toggle-btn" class="control-btn" type="button" aria-pressed="false" aria-label="Toggle dark mode">
          <span data-lucide="moon" aria-hidden="true"></span>
          <span>Dark</span>
        </button>
        <button id="help-btn" class="control-btn" type="button" aria-haspopup="dialog">
          <span data-lucide="help-circle" aria-hidden="true"></span>
          <span>Help</span>
        </button>
      </div>
      
      <button id="desktop-menu-btn" class="control-btn icon-only" type="button" aria-label="Menu" aria-expanded="false" aria-controls="board-controls-menu">
        <span data-lucide="ellipsis-vertical" aria-hidden="true"></span>
      </button>
      
      <input type="file" id="import-file" accept="application/json" class="sr-only" aria-label="Import board file">
    </nav>
  </header>

  <main id="board-container" class="board-container" aria-label="Kanban board">
    <!-- Columns rendered dynamically by JavaScript -->
  </main>

  <!-- Task Modal -->
  <div id="task-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="task-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <header class="modal-header-row">
        <h3 id="task-modal-title">Add New Task</h3>
        <button id="task-fullpage-btn" type="button" class="btn-small hidden" aria-pressed="false" title="Open in full page">
          <span data-lucide="fullscreen" aria-hidden="true"></span>
        </button>
      </header>
      <form id="task-form" novalidate>
        <div class="form-group">
          <label for="task-title">Title <span aria-hidden="true">*</span></label>
          <input id="task-title" type="text" required placeholder="Enter task title..." aria-required="true">
        </div>
        <div class="form-group">
          <label for="task-description">Description</label>
          <textarea id="task-description" rows="3" placeholder="Enter task description..."></textarea>
        </div>
        <div class="form-group">
          <label for="task-priority">Priority</label>
          <select id="task-priority">
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </div>
        <div class="form-group">
          <label for="task-due-date">Due Date</label>
          <input id="task-due-date" type="date">
        </div>
        <div class="form-group">
          <label for="task-column">Column</label>
          <select id="task-column" aria-describedby="task-column-help">
            <!-- Options populated dynamically -->
          </select>
          <span id="task-column-help" class="sr-only">Select which column to place this task in</span>
        </div>
        <fieldset class="form-group">
          <legend>Labels</legend>
          <div id="task-active-labels" class="active-labels" role="list" aria-label="Selected labels"></div>
          <div class="task-label-search-row">
            <input type="text" id="task-label-search" placeholder="Search labelsâ€¦" autocomplete="off" aria-label="Filter available labels">
            <button id="task-add-label-btn" type="button" class="icon-btn" aria-label="Add a new label" title="Add label">
              <span data-lucide="plus" aria-hidden="true"></span>
            </button>
          </div>
          <div id="task-labels-selection" class="labels-selection" role="listbox" aria-label="Available labels">
            <!-- Labels populated dynamically -->
          </div>
        </fieldset>
        <div class="form-actions">
          <button type="button" id="cancel-task-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="task-submit-btn" class="btn btn-primary">Add Task</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Column Modal -->
  <div id="column-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="column-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="column-modal-title">Add New Column</h3>
      <form id="column-form" novalidate>
        <div class="form-group">
          <label for="column-name">Column Name <span aria-hidden="true">*</span></label>
          <input type="text" id="column-name" required placeholder="Enter column name..." aria-required="true">
        </div>
        <div class="form-group">
          <label for="column-color">Color</label>
          <input type="color" id="column-color" value="#3b82f6" aria-describedby="column-color-help">
          <span id="column-color-help" class="sr-only">Choose accent color for the column</span>
        </div>
        <div class="form-actions">
          <button type="button" id="cancel-column-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="column-submit-btn" class="btn btn-primary">Add Column</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Labels Management Modal -->
  <div id="labels-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="labels-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="labels-modal-title">Manage Labels</h3>
      <div class="form-group task-label-search-row">
        <input type="text" id="labels-search" placeholder="Search labelsâ€¦" autocomplete="off" aria-label="Filter labels">
      </div>
      <div id="labels-list" class="labels-list" role="list" aria-label="Available labels">
        <!-- Labels populated dynamically -->
      </div>
      <div class="form-actions">
        <button id="add-label-btn" type="button" class="btn btn-primary">Add Label</button>
        <button type="button" id="labels-close-btn" class="btn btn-secondary">Close</button>
      </div>
    </article>
  </div>

  <!-- Boards Modal -->
  <div id="boards-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="boards-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="boards-modal-title">Manage Boards</h3>
      <div id="boards-list" class="labels-list" aria-label="Boards list"></div>
      <div class="form-actions">
        <button id="add-board-btn" type="button" class="btn btn-primary">
          <span data-lucide="kanban" aria-hidden="true"></span>
          <span> Add Board</span>
        </button>
        <button type="button" id="boards-close-btn" class="btn btn-secondary">Close</button>
      </div>
    </article>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settings-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="settings-modal-title">Settings</h3>
      <form id="settings-form" novalidate>
        <div class="form-group checkbox-group">
          <label>
            <input id="settings-show-priority" type="checkbox">
            Show task priority
          </label>
        </div>
        <div class="form-group checkbox-group">
          <label>
            <input id="settings-show-due-date" type="checkbox">
            Show task due date
          </label>
        </div>
        <div class="form-group checkbox-group">
          <label>
            <input id="settings-show-age" type="checkbox">
            Show task age
          </label>
        </div>
        <div class="form-group checkbox-group">
          <label>
            <input id="settings-show-change-date" type="checkbox">
            Show updated date/time
          </label>
        </div>
        <div class="form-group">
          <label for="settings-locale">Locale</label>
          <select id="settings-locale" aria-label="Select locale"></select>
        </div>
        <div class="form-group">
          <label for="settings-default-priority">Default task priority</label>
          <select id="settings-default-priority" aria-label="Select default task priority">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" id="settings-close-btn" class="btn btn-primary">Close</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Board Rename Modal -->
  <div id="board-rename-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="board-rename-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="board-rename-modal-title">Rename Board</h3>
      <form id="board-rename-form" novalidate>
        <div class="form-group">
          <label for="board-rename-name">Board Name <span aria-hidden="true">*</span></label>
          <input type="text" id="board-rename-name" required placeholder="Enter board name..." aria-required="true">
        </div>
        <div class="form-actions">
          <button type="button" id="cancel-board-rename-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="board-rename-submit-btn" class="btn btn-primary">Save</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Board Create Modal -->
  <div id="board-create-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="board-create-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="board-create-modal-title">Create New Board</h3>
      <form id="board-create-form" novalidate>
        <div class="form-group">
          <label for="board-create-name">Board Name <span aria-hidden="true">*</span></label>
          <input type="text" id="board-create-name" required placeholder="Enter board name..." aria-required="true">
        </div>
        <div class="form-actions">
          <button type="button" id="cancel-board-create-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="board-create-submit-btn" class="btn btn-primary">Create Board</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Confirm / Alert Modal -->
  <div id="dialog-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="dialog-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="dialog-modal-title">Confirm</h3>
      <p id="dialog-modal-message"></p>
      <div class="form-actions">
        <button type="button" id="dialog-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button type="button" id="dialog-confirm-btn" class="btn btn-primary">OK</button>
      </div>
    </article>
  </div>

  <!-- Label Edit Modal -->
  <div id="label-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="label-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="label-modal-title">Add Label</h3>
      <form id="label-form" novalidate>
        <div class="form-group">
          <label for="label-name">Label Name <span aria-hidden="true">*</span></label>
          <input type="text" id="label-name" required maxlength="40" placeholder="Enter label name..." aria-required="true">
        </div>
        <div class="form-group">
          <label for="label-color">Color</label>
          <input type="color" id="label-color" value="#3b82f6">
        </div>
        <div class="form-actions">
          <button type="button" id="cancel-label-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="label-submit-btn" class="btn btn-primary">Save Label</button>
        </div>
      </form>
    </article>
  </div>

  <!-- Help Modal -->
  <div id="help-modal" class="modal modal-large hidden" role="dialog" aria-modal="true" aria-labelledby="help-modal-title">
    <div class="modal-backdrop" data-close-modal></div>
    <article class="modal-content">
      <h3 id="help-modal-title">Personal Kanban Board Help</h3>
      <div class="help-content">
        <section>
          <h4>About This Board</h4>
          <p>This is a fully local personal Kanban board. <strong>NO SERVER REQUIRED</strong> â€” everything runs in your browser and data is stored in <code>localStorage</code>.</p>
        </section>

        <section>
          <h4>Controls Menu</h4>
          <ul>
            <li><strong>Open the menu:</strong> Click the ellipsis (â‹®) button in the header to open the controls dropdown.</li>
            <li><strong>Boards:</strong> Switch boards, create a new board, or manage boards from the same menu.</li>
            <li><strong>Other actions:</strong> Add Column, Manage Labels, Export, Import, Theme, and Help are all in this menu.</li>
          </ul>
        </section>

        <section>
          <h4>Boards</h4>
          <ul>
            <li><strong>Switch boards:</strong> Use the board dropdown to change the active board.</li>
            <li><strong>Remembered selection:</strong> The last active board is restored when you return.</li>
            <li><strong>Manage Boards:</strong> Open, rename, or delete boards (deletes always require confirmation; the last board cannot be deleted).</li>
          </ul>
        </section>
        
        <section>
          <h4>Tasks</h4>
          <ul>
            <li><strong>Add:</strong> Click the plus icon in a column header to add a task.</li>
            <li><strong>Edit:</strong> Click a task card to edit title, description, priority, due date, column, and labels.</li>
            <li><strong>Move:</strong> Drag and drop tasks between columns to update status.</li>
            <li><strong>Delete:</strong> Click the task trash button and confirm deletion.</li>
          </ul>
        </section>

        <section>
          <h4>Columns</h4>
          <ul>
            <li><strong>Create:</strong> Use <strong>Add Column</strong> to create a new workflow stage.</li>
            <li><strong>Edit/Delete:</strong> Use the column ellipsis menu.</li>
            <li><strong>Reorder:</strong> Drag the grip icon on a column header to reorder columns.</li>
            <li><strong>Deleting a column:</strong> If it contains tasks, you will be warned those tasks will also be deleted. The last column cannot be deleted.</li>
          </ul>
        </section>
        
        <section>
          <h4>Labels</h4>
          <ul>
            <li><strong>Manage:</strong> Use <strong>Manage Labels</strong> to create, edit, or delete labels.</li>
            <li><strong>Assign:</strong> Edit a task to assign one or more labels.</li>
            <li><strong>Task editor UX:</strong> Selected labels appear as pills, and the label list includes a search box for quick filtering.</li>
            <li><strong>Delete:</strong> Deleting a label removes it from all tasks (confirmation required).</li>
          </ul>
        </section>
        
        <section>
          <h4>Data Storage &amp; Persistence</h4>
          <ul>
            <li><strong>Local Storage:</strong> All data is stored in your browser&rsquo;s <code>localStorage</code>.</li>
            <li><strong>No Server:</strong> The board runs locally (after loading the page).</li>
            <li><strong>Browser Specific:</strong> Data is stored only in this browser on this device.</li>
          </ul>
        </section>
        
        <section>
          <h4>Import / Export (Backups)</h4>
          <ul>
            <li><strong>Export:</strong> Downloads the <strong>active board only</strong> (columns + tasks + labels) as a JSON file. It does not back up all boards.</li>
            <li><strong>To back up all boards:</strong> Switch boards and export each one.</li>
            <li><strong>Import:</strong> Loads a JSON file into the <strong>active board</strong> and <strong>overwrites</strong> its tasks, columns, and labels.</li>
            <li><strong>Recommended:</strong> Create a new blank board first, switch to it, then click Import.</li>
            <li><strong>IMPORTANT:</strong> If you care about your data, export regularly (clearing site data or using private browsing can delete <code>localStorage</code>).</li>
          </ul>
        </section>

        <section>
          <h4>Keyboard Shortcuts</h4>
          <ul>
            <li><strong>Escape:</strong> Closes most modals.</li>
            <li><strong>Backdrop click:</strong> Clicking outside the modal closes most modals.</li>
          </ul>
        </section>
        
        <section>
          <h4>Tips</h4>
          <ul>
            <li>Export on a schedule (end of day / end of week) to avoid data loss.</li>
            <li>Use multiple boards to separate contexts (work, personal, projects).</li>
            <li>Use labels to categorize across columns (e.g., Urgent, Feature, Task).</li>
          </ul>
        </section>
      </div>
      <div class="form-actions">
        <button type="button" id="help-close-btn" class="btn btn-primary">Close</button>
      </div>
    </article>
  </div>

<footer class="footer">
  <p>ðŸ“Œ Data stored in browser localStorage only! <strong>Export your board to save to disk</strong><a href="https://github.com/mdiener21/personal-kanban/tree/main/docs" target="_blank" rel="noopener noreferrer"> Learn more docs</a></p>
</footer>

</body>
</html>
